<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":true,"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„è™šå¹»ä¸ªäººåšå®¢ï¼Œä¸å®šæœŸæ›´æ–°">
<meta property="og:type" content="website">
<meta property="og:title" content="Zoomiçš„è™šå¹»ä¸–ç•Œ">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Zoomiçš„è™šå¹»ä¸–ç•Œ">
<meta property="og:description" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„è™šå¹»ä¸ªäººåšå®¢ï¼Œä¸å®šæœŸæ›´æ–°">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zoomi">
<meta property="article:tag" content="Unreal Engine, æ¸¸æˆå¼€å‘, ç¼–ç¨‹, æŠ€æœ¯, åšå®¢">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Zoomiçš„è™šå¹»ä¸–ç•Œ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <link rel="stylesheet" href="/css/win11-dark.css">
  <!-- APlayer CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
  <!-- MetingJS -->
  <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
  <!-- APlayer JS -->
  <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<link rel="alternate" href="/atom.xml" title="Zoomiçš„è™šå¹»ä¸–ç•Œ" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zoomiçš„è™šå¹»ä¸–ç•Œ</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æˆ‘çš„é‚®ç®±:LFF3216689784@outlook.com</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ç›®å½•</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
  <!-- ä¸»é¡µå¼¹çª—æç¤º -->
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      if (!sessionStorage.getItem('ue5_tip_shown')) {
        var tip = document.createElement('div');
        tip.innerHTML = '<div id="ue5-tip-mask" style="position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);display:flex;align-items:center;justify-content:center;">'+
          '<div style="background:#fff;padding:32px 38px 24px 38px;border-radius:14px;box-shadow:0 4px 28px #0003;max-width:90vw;text-align:center;font-size:18px;line-height:2;">'+
          'å¦‚éœ€æŸ¥é˜…æˆ‘çš„ä¸ªäººå­¦ä¹ æ–‡æ¡£è¯·ç‚¹å‡»<b style="color:#409EFF;">ç›®å½•</b>ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒğŸ˜€<br><button id="ue5-tip-btn" style="margin-top:18px;padding:6px 22px;background:#409EFF;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;">çŸ¥é“äº†</button></div></div>';
        document.body.appendChild(tip);
        document.getElementById('ue5-tip-btn').onclick = function() {
          tip.remove();
          sessionStorage.setItem('ue5_tip_shown', '1');
        };
        document.getElementById('ue5-tip-mask').onclick = function(e) {
          if (e.target === this) {
            tip.remove();
            sessionStorage.setItem('ue5_tip_shown', '1');
          }
        };
      }
    });
  </script>

  <!-- UE5 æ¨èå­¦ä¹ ç½‘ç«™ -->
  <div class="ue5-recommend-wrap" style="max-width:900px;margin:40px auto 24px auto;padding:36px 28px 28px 28px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #0002;">
    <h2 style="color:#409EFF;text-align:center;margin-bottom:18px;">è™šå¹»5å¼•æ“æ¨èå­¦ä¹ ç½‘ç«™</h2>
    <ul style="font-size:17px;line-height:2;">
      <li><a href="https://docs.unrealengine.com/5.0/zh-CN/" target="_blank" style="color:#2563eb;">Unreal Engine 5 å®˜æ–¹æ–‡æ¡£ï¼ˆä¸­æ–‡ï¼‰</a></li>
      <li><a href="https://www.unrealengine.com/marketplace/zh-CN/store" target="_blank" style="color:#2563eb;">UE5 å®˜æ–¹å•†åŸ</a></li>
      <li><a href="https://learn.unrealengine.com/home" target="_blank" style="color:#2563eb;">Unreal Online Learningï¼ˆè‹±æ–‡å®˜æ–¹æ•™ç¨‹ï¼‰</a></li>
      <li><a href="https://bilibili.com" target="_blank" style="color:#2563eb;">Bç«™ UE5 é«˜è´¨é‡æ•™ç¨‹åˆé›†</a></li>
      <li><a href="https://www.youtube.com/c/UnrealEngine" target="_blank" style="color:#2563eb;">YouTube Unreal Engine å®˜æ–¹é¢‘é“</a></li>
      <li><a href="https://forums.unrealengine.com/" target="_blank" style="color:#2563eb;">Unreal Engine å®˜æ–¹è®ºå›</a></li>
      <li><a href="https://www.zhihu.com/topic/20727423/hot" target="_blank" style="color:#2563eb;">çŸ¥ä¹ UE5 çƒ­é—¨é—®ç­”</a></li>
      <li><a href="https://github.com/EpicGames/UnrealEngine" target="_blank" style="color:#2563eb;">Unreal Engine GitHub æºç </a></li>
    </ul>
    <div style="text-align:center;color:#888;font-size:14px;margin-top:12px;">æŒç»­è¡¥å……æ›´å¤šä¼˜è´¨å­¦ä¹ èµ„æºï¼Œæ¬¢è¿ç•™è¨€æ¨èï¼</div>
  </div>

  <!-- æ¸²æŸ“æ–‡ç« åˆ—è¡¨ -->
  
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/22/GAS%E7%B3%BB%E7%BB%9FAPI%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6-by_Zoomi_%E8%BD%AC%E8%BD%BD%E8%AF%B7%E8%81%94%E7%B3%BB%E6%88%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zoomi">
      <meta itemprop="description" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„è™šå¹»ä¸ªäººåšå®¢ï¼Œä¸å®šæœŸæ›´æ–°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zoomiçš„è™šå¹»ä¸–ç•Œ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/22/GAS%E7%B3%BB%E7%BB%9FAPI%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6-by_Zoomi_%E8%BD%AC%E8%BD%BD%E8%AF%B7%E8%81%94%E7%B3%BB%E6%88%91/" class="post-title-link" itemprop="url">GASç³»ç»ŸAPIç™¾ç§‘å…¨ä¹¦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-04-22 22:00:54 / ä¿®æ”¹æ—¶é—´ï¼š22:01:04" itemprop="dateCreated datePublished" datetime="2025-04-22T22:00:54+08:00">2025-04-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8E/" itemprop="url" rel="index"><span itemprop="name">è™šå¹»å¼•æ“</span></a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8E/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">æ¸¸æˆå¼€å‘</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="GASç³»ç»Ÿç®€ä»‹-ä»€ä¹ˆæ˜¯GASç³»ç»Ÿ"><a href="#GASç³»ç»Ÿç®€ä»‹-ä»€ä¹ˆæ˜¯GASç³»ç»Ÿ" class="headerlink" title="GASç³»ç»Ÿç®€ä»‹-ä»€ä¹ˆæ˜¯GASç³»ç»Ÿ"></a>GASç³»ç»Ÿç®€ä»‹-ä»€ä¹ˆæ˜¯GASç³»ç»Ÿ</h1><p><strong>GASâ€‹</strong>â€‹ å³ â€‹<strong>â€‹Gameplay Ability Systemâ€‹</strong>â€‹ï¼ˆæ¸¸æˆç©æ³•èƒ½åŠ›ç³»ç»Ÿï¼‰ï¼Œæ˜¯ â€‹<strong>â€‹Epic Gamesâ€‹</strong>â€‹ åœ¨ â€‹<strong>â€‹Unreal Engineï¼ˆè™šå¹»å¼•æ“ï¼‰â€‹</strong>â€‹ ä¸­å¼€å‘çš„ä¸€å¥—åŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„æ¡†æ¶ï¼Œç”¨äºç®¡ç†å’Œå®ç°å¤æ‚çš„æ¸¸æˆç©æ³•æœºåˆ¶ã€‚â€‹</p>
<h3 id="GAS-çš„æ ¸å¿ƒç»„ä»¶"><a href="#GAS-çš„æ ¸å¿ƒç»„ä»¶" class="headerlink" title="GAS çš„æ ¸å¿ƒç»„ä»¶"></a>GAS çš„æ ¸å¿ƒç»„ä»¶</h3><p>GAS ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š</p>
<ol>
<li><p>â€‹<strong>â€‹Ability System Component (ASC)â€‹</strong>â€‹:</p>
<ul>
<li>â€‹<strong>â€‹ä½œç”¨â€‹</strong>â€‹ï¼šä½œä¸º GAS çš„æ ¸å¿ƒï¼ŒASC è´Ÿè´£ç®¡ç†è§’è‰²çš„èƒ½åŠ›ã€å±æ€§å’Œæ•ˆæœã€‚æ¯ä¸ªæ‹¥æœ‰ GAS çš„è§’è‰²é€šå¸¸éƒ½æœ‰ä¸€ä¸ª ASC å®ä¾‹ã€‚</li>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼š<ul>
<li>ç®¡ç†å’Œæ¿€æ´»èƒ½åŠ›ï¼ˆAbilitiesï¼‰ã€‚</li>
<li>å¤„ç†å±æ€§ï¼ˆAttributesï¼‰çš„å¢å‡å’ŒæŸ¥è¯¢ã€‚</li>
<li>åº”ç”¨å’Œç®¡ç†æ•ˆæœï¼ˆEffectsï¼‰ï¼Œå¦‚å¢ç›Šã€å‡ç›Šã€ä¼¤å®³ç­‰ã€‚</li>
<li>æä¾›è¾“å…¥ç»‘å®šå’Œèƒ½åŠ›æ¿€æ´»çš„æ¥å£ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹Abilitiesï¼ˆèƒ½åŠ›ï¼‰â€‹</strong>â€‹:</p>
<ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šèƒ½åŠ›ä»£è¡¨è§’è‰²å¯ä»¥æ‰§è¡Œçš„ç‰¹å®šåŠ¨ä½œæˆ–è¡Œä¸ºï¼Œå¦‚æ”»å‡»ã€è·³è·ƒã€æ²»ç–—ç­‰ã€‚</li>
<li>â€‹<strong>â€‹å®ç°â€‹</strong>â€‹ï¼šé€šè¿‡ç»§æ‰¿Â <code>UGameplayAbility</code>Â ç±»æ¥åˆ›å»ºè‡ªå®šä¹‰èƒ½åŠ›ï¼Œå®šä¹‰èƒ½åŠ›çš„æ¿€æ´»æ¡ä»¶ã€æ‰§è¡Œé€»è¾‘å’Œå†·å´æ—¶é—´ç­‰ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹Attributesï¼ˆå±æ€§ï¼‰â€‹</strong>â€‹:</p>
<ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šå±æ€§ä»£è¡¨è§’è‰²çš„å„ç§æ•°å€¼ç‰¹å¾ï¼Œå¦‚ç”Ÿå‘½å€¼ã€æ³•åŠ›å€¼ã€æ”»å‡»åŠ›ç­‰ã€‚</li>
<li>â€‹<strong>â€‹å®ç°â€‹</strong>â€‹ï¼šé€šè¿‡ç»§æ‰¿Â <code>UAttributeSet</code>Â ç±»æ¥åˆ›å»ºè‡ªå®šä¹‰å±æ€§é›†ï¼Œå®šä¹‰è§’è‰²çš„åŸºç¡€å±æ€§å’Œè¡ç”Ÿå±æ€§ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹Effectsï¼ˆæ•ˆæœï¼‰â€‹</strong>â€‹:</p>
<ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šæ•ˆæœç”¨äºä¿®æ”¹è§’è‰²çš„å±æ€§æˆ–çŠ¶æ€ï¼Œå¦‚å¢åŠ æ”»å‡»åŠ›ã€å‡å°‘ç§»åŠ¨é€Ÿåº¦ã€æ–½åŠ ä¸­æ¯’æ•ˆæœç­‰ã€‚</li>
<li>â€‹<strong>â€‹å®ç°â€‹</strong>â€‹ï¼šé€šè¿‡åˆ›å»ºÂ <code>GameplayEffect</code>Â å­ç±»æ¥å®šä¹‰å„ç§æ•ˆæœï¼Œè®¾ç½®æ•ˆæœçš„ç±»å‹ã€æŒç»­æ—¶é—´ã€æ•°å€¼å˜åŒ–ç­‰ã€‚</li>
</ul>
</li>
</ol>
<h3 id="GAS-çš„ä¼˜åŠ¿ä¸ä½¿ç”¨æ­¥éª¤"><a href="#GAS-çš„ä¼˜åŠ¿ä¸ä½¿ç”¨æ­¥éª¤" class="headerlink" title="GAS çš„ä¼˜åŠ¿ä¸ä½¿ç”¨æ­¥éª¤"></a>GAS çš„ä¼˜åŠ¿ä¸ä½¿ç”¨æ­¥éª¤</h3><ul>
<li>â€‹<strong>â€‹æ¨¡å—åŒ–è®¾è®¡â€‹</strong>â€‹ï¼šGAS å°†èƒ½åŠ›ã€å±æ€§å’Œæ•ˆæœåˆ†ç¦»ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ã€‚</li>
<li>â€‹<strong>â€‹é«˜åº¦å¯æ‰©å±•â€‹</strong>â€‹ï¼šå¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è‡ªå®šä¹‰èƒ½åŠ›ã€å±æ€§å’Œæ•ˆæœï¼Œæ»¡è¶³å„ç§å¤æ‚çš„æ¸¸æˆç©æ³•éœ€æ±‚ã€‚</li>
<li>â€‹<strong>â€‹çµæ´»çš„æ¿€æ´»æœºåˆ¶â€‹</strong>â€‹ï¼šæ”¯æŒåŸºäºè¾“å…¥ã€çŠ¶æ€æˆ–å…¶ä»–æ¡ä»¶çš„èƒ½åŠ›æ¿€æ´»ï¼Œé€‚åº”ä¸åŒçš„æ¸¸æˆè®¾è®¡æ¨¡å¼ã€‚</li>
<li>â€‹<strong>â€‹ç½‘ç»œåŒæ­¥â€‹</strong>â€‹ï¼šå†…ç½®çš„ç½‘ç»œåŒæ­¥æœºåˆ¶ï¼Œç¡®ä¿åœ¨å¤šäººæ¸¸æˆä¸­èƒ½åŠ›ã€å±æ€§å’Œæ•ˆæœçš„ä¸€è‡´æ€§å’Œå®æ—¶æ€§ã€‚</li>
<li>â€‹<strong>â€‹å¯è§†åŒ–ç¼–è¾‘â€‹</strong>â€‹ï¼šé€šè¿‡è“å›¾ç³»ç»Ÿï¼Œå¼€å‘è€…å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­ç›´è§‚åœ°é…ç½®å’Œè°ƒè¯• GAS ç»„ä»¶ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li>
<li><h3 id="å¦‚ä½•åœ¨é¡¹ç›®ä¸­å¯ç”¨-GAS"><a href="#å¦‚ä½•åœ¨é¡¹ç›®ä¸­å¯ç”¨-GAS" class="headerlink" title="å¦‚ä½•åœ¨é¡¹ç›®ä¸­å¯ç”¨ GAS"></a>å¦‚ä½•åœ¨é¡¹ç›®ä¸­å¯ç”¨ GAS</h3></li>
</ul>
<ol>
<li><p>â€‹<strong>â€‹å¯ç”¨ GAS æ’ä»¶â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨ Unreal Engine ç¼–è¾‘å™¨ä¸­ï¼Œå¯¼èˆªåˆ°Â <code>ç¼–è¾‘</code>Â &gt;Â <code>æ’ä»¶</code>ã€‚</li>
<li>æœç´¢å¹¶å¯ç”¨Â <code>Gameplay Ability System</code>Â æ’ä»¶ã€‚</li>
<li>é‡å¯ç¼–è¾‘å™¨ä»¥åº”ç”¨æ›´æ”¹ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹åˆ›å»º Ability System Component (ASC)â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨è§’è‰²ç±»ä¸­æ·»åŠ ä¸€ä¸ªÂ <code>UAbilitySystemComponent</code>Â ç±»å‹çš„æˆå‘˜å˜é‡ã€‚</li>
<li>åˆå§‹åŒ–å¹¶ç»‘å®š ASC åˆ°è§’è‰²ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹å®šä¹‰ Attributesâ€‹</strong>â€‹ï¼š</p>
<ul>
<li>åˆ›å»ºç»§æ‰¿è‡ªÂ <code>UAttributeSet</code>Â çš„è‡ªå®šä¹‰å±æ€§é›†ç±»ã€‚</li>
<li>å®šä¹‰æ‰€éœ€çš„å±æ€§ï¼Œå¦‚ç”Ÿå‘½å€¼ã€æ³•åŠ›å€¼ç­‰ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹åˆ›å»º Abilitiesâ€‹</strong>â€‹ï¼š</p>
<ul>
<li>åˆ›å»ºç»§æ‰¿è‡ªÂ <code>UGameplayAbility</code>Â çš„è‡ªå®šä¹‰èƒ½åŠ›ç±»ã€‚</li>
<li>å®ç°èƒ½åŠ›çš„æ¿€æ´»é€»è¾‘ã€æ‰§è¡Œè¿‡ç¨‹å’Œå†·å´æœºåˆ¶ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹é…ç½® Effectsâ€‹</strong>â€‹ï¼š</p>
<ul>
<li>åˆ›å»ºç»§æ‰¿è‡ªÂ <code>UGameplayEffect</code>Â çš„è‡ªå®šä¹‰æ•ˆæœç±»ã€‚</li>
<li>å®šä¹‰æ•ˆæœçš„ç±»å‹ã€æ•°å€¼å˜åŒ–å’Œåº”ç”¨é€»è¾‘ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹ç»‘å®šè¾“å…¥å’Œæ¿€æ´»èƒ½åŠ›â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨è§’è‰²æˆ–æ§åˆ¶å™¨ä¸­ç»‘å®šè¾“å…¥äº‹ä»¶ï¼Œè°ƒç”¨ ASC çš„èƒ½åŠ›æ¿€æ´»å‡½æ•°ã€‚</li>
<li>æ ¹æ®æ¸¸æˆé€»è¾‘å†³å®šä½•æ—¶æ¿€æ´»ç‰¹å®šèƒ½åŠ›ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨è§’è‰²ç±»ä¸­åˆå§‹åŒ– GAS ç»„ä»¶å¹¶æ¿€æ´»ä¸€ä¸ªèƒ½åŠ›ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemInterface.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MYGAME_API</span> AMyCharacter : <span class="keyword">public</span> ACharacter, <span class="keyword">public</span> IAbilitySystemInterface</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">AMyCharacter</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IAbilitySystemInterface å®ç°</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> UAbilitySystemComponent* <span class="title">GetAbilitySystemComponent</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// ASC å®ä¾‹</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(VisibleAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Abilities&quot;</span>, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UAbilitySystemComponent</span>* AbilitySystemComponent;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PossessedBy</span><span class="params">(AController* NewController)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ¿€æ´»ç‰¹å®šèƒ½åŠ›</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">ActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyCharacter.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAbilitySet.h&quot;</span> <span class="comment">// è‡ªå®šä¹‰å±æ€§é›†</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyGameplayAbility.h&quot;</span> <span class="comment">// è‡ªå®šä¹‰èƒ½åŠ›</span></span></span><br><span class="line"></span><br><span class="line">AMyCharacter::<span class="built_in">AMyCharacter</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¹¶é™„åŠ  ASC</span></span><br><span class="line">    AbilitySystemComponent = <span class="built_in">CreateDefaultSubobject</span>&lt;UAbilitySystemComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;AbilitySystemComponent&quot;</span>));</span><br><span class="line">    AbilitySystemComponent-&gt;<span class="built_in">SetupAttachment</span>(RootComponent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">UAbilitySystemComponent* <span class="title">AMyCharacter::GetAbilitySystemComponent</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AbilitySystemComponent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å±æ€§é›†</span></span><br><span class="line">        AbilitySystemComponent-&gt;<span class="built_in">InitAbilityActorInfo</span>(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ è½½å¹¶èµ‹äºˆåŸºç¡€èƒ½åŠ›ï¼ˆå‡è®¾åœ¨è“å›¾ä¸­é…ç½®ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::PossessedBy</span><span class="params">(AController* NewController)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">PossessedBy</span>(NewController);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent &amp;&amp; NewController)</span><br><span class="line">    &#123;</span><br><span class="line">        AbilitySystemComponent-&gt;<span class="built_in">InitAbilityActorInfo</span>(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ä»¥åœ¨è¿™é‡Œæ ¹æ®æ§åˆ¶å™¨ç±»å‹è¿›è¡Œé¢å¤–çš„åˆå§‹åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::ActivateAbility</span><span class="params">(FGameplayAbilitySpecHandle AbilityHandle)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent)</span><br><span class="line">    &#123;</span><br><span class="line">        AbilitySystemComponent-&gt;<span class="built_in">TryActivateAbility</span>(AbilityHandle);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="APIç™¾ç§‘"><a href="#APIç™¾ç§‘" class="headerlink" title="APIç™¾ç§‘"></a>APIç™¾ç§‘</h1><h2 id="virtual-void-UAibilitySystemComponent-InitAbilityActorInfo-AActor-InOwnerActor-AActor-InAvatarActor-å‡½æ•°è¯´æ˜"><a href="#virtual-void-UAibilitySystemComponent-InitAbilityActorInfo-AActor-InOwnerActor-AActor-InAvatarActor-å‡½æ•°è¯´æ˜" class="headerlink" title="virtual void UAibilitySystemComponent::InitAbilityActorInfo(AActor *InOwnerActor, AActor *InAvatarActor)Â å‡½æ•°è¯´æ˜"></a><code>virtual void UAibilitySystemComponent::InitAbilityActorInfo(AActor *InOwnerActor, AActor *InAvatarActor)</code>Â å‡½æ•°è¯´æ˜</h2><ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šåˆå§‹åŒ–èƒ½åŠ›çš„ Actor ä¿¡æ¯â€”â€”ç”¨äºä¿å­˜å…³äºæˆ‘ä»¬ä½œç”¨äºè°ä»¥åŠè°æ§åˆ¶æˆ‘ä»¬çš„ä¿¡æ¯çš„ç»“æ„ä½“ã€‚</li>
<li>â€‹<strong>â€‹å‚æ•°â€‹</strong>â€‹ï¼š<ul>
<li><code>InOwnerActor</code>ï¼šä»é€»è¾‘ä¸Šæ‹¥æœ‰æ­¤ç»„ä»¶çš„ Actorã€‚</li>
<li><code>InAvatarActor</code>ï¼šæˆ‘ä»¬åœ¨ä¸–ç•Œä¸­å®é™…ä½œç”¨çš„ç‰©ç† Actorã€‚é€šå¸¸æ˜¯ Pawnï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯ Towerã€Buildingã€Turret ç­‰ï¼Œå¯èƒ½ä¸Â <code>InOwnerActor</code>Â æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
<h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><p>åœ¨è™šå¹»å¼•æ“çš„ Gameplay Ability Systemï¼ˆGASï¼‰ä¸­ï¼Œè¿™ä¸ªå‡½æ•°èµ·ç€å…³é”®ä½œç”¨ã€‚å®ƒç¡®ä¿äº†èƒ½åŠ›ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œç®¡ç†ä¸è§’è‰²ç›¸å…³çš„ Actor ä¿¡æ¯ã€‚<code>OwnerActor</code>Â å¸®åŠ©ç¡®å®šé€»è¾‘ä¸Šçš„æ‰€å±å…³ç³»ï¼Œè€ŒÂ <code>InAvatarActor</code>Â åˆ™æ˜ç¡®äº†å®é™…è¿›è¡Œäº¤äº’æ“ä½œçš„å¯¹è±¡ï¼Œè¿™å¯¹äºèƒ½åŠ›çš„è§¦å‘ã€æ•ˆæœåº”ç”¨ç­‰æ–¹é¢éƒ½éå¸¸é‡è¦ã€‚</p>
<h3 id="ç¤ºä¾‹ä»£ç ï¼ˆå‡è®¾åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼‰"><a href="#ç¤ºä¾‹ä»£ç ï¼ˆå‡è®¾åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼‰" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼ˆå‡è®¾åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼‰"></a>ç¤ºä¾‹ä»£ç ï¼ˆå‡è®¾åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­è°ƒç”¨è¯¥å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾åœ¨æŸä¸ªè‡ªå®šä¹‰ç»„ä»¶ç±»ä¸­</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Components/ActorComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAbilitySystemComponent.h&quot;</span> <span class="comment">// å¼•å…¥ä½ çš„ Ability System Component å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCustomComponent.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>( ClassGroup=(Custom), meta=(BlueprintSpawnableComponent) )</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURGAMENAME_API</span> UMyCustomComponent : <span class="keyword">public</span> UActorComponent</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:    </span><br><span class="line">    <span class="comment">// Sets default values for this component&#x27;s properties</span></span><br><span class="line">    <span class="built_in">UMyCustomComponent</span>();</span><br><span class="line">    </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// Called when the game starts</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;AbilitySystem&quot;</span>)</span><br><span class="line">    UAbilitySystemComponent* AbilitySystemComp; <span class="comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ª Ability System Component æˆå‘˜å˜é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Actors&quot;</span>)</span><br><span class="line">    AActor* OwnerActor; <span class="comment">// å¯ä»¥è®¾ç½®é€»è¾‘æ‹¥æœ‰è€… Actor</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Actors&quot;</span>)</span><br><span class="line">    AActor* AvatarActor; <span class="comment">// å¯ä»¥è®¾ç½®å®é™…ä½œç”¨çš„ Actor</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// å…¶ä»–ç§æœ‰æˆå‘˜å˜é‡å’Œå‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç° BeginPlay å‡½æ•°ï¼Œåœ¨å…¶ä¸­è°ƒç”¨ InitAbilityActorInfo è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyCustomComponent::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComp &amp;&amp; OwnerActor &amp;&amp; AvatarActor)</span><br><span class="line">    &#123;</span><br><span class="line">        AbilitySystemComp-&gt;<span class="built_in">InitAbilityActorInfo</span>(OwnerActor, AvatarActor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨åœºæ™¯è¯´æ˜"><a href="#ä½¿ç”¨åœºæ™¯è¯´æ˜" class="headerlink" title="ä½¿ç”¨åœºæ™¯è¯´æ˜"></a>ä½¿ç”¨åœºæ™¯è¯´æ˜</h3><p>åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå½“ä½ éœ€è¦ä½¿ç”¨ GAS æ¥ç®¡ç†è§’è‰²çš„èƒ½åŠ›æ—¶ï¼Œé€šå¸¸ä¼šåœ¨è§’è‰²æˆ–ç›¸å…³ç»„ä»¶çš„åˆå§‹åŒ–é˜¶æ®µè°ƒç”¨Â <code>InitAbilityActorInfo</code>Â å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨è§’è‰²ç”Ÿæˆæ—¶ï¼Œæˆ–è€…åœ¨è‡ªå®šä¹‰ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œç¡®ä¿ GAS èƒ½å¤Ÿæ­£ç¡®å…³è”åˆ°å¯¹åº”çš„ Actor ä¿¡æ¯ï¼Œä»¥ä¾¿åç»­è¿›è¡Œèƒ½åŠ›çš„æ¿€æ´»ã€æ•ˆæœçš„ç®¡ç†ç­‰æ“ä½œã€‚</p>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul>
<li>ç¡®ä¿Â <code>AbilitySystemComp</code>ã€<code>OwnerActor</code>Â å’ŒÂ <code>AvatarActor</code>Â åœ¨è°ƒç”¨å‡½æ•°æ—¶éƒ½å·²ç»æ­£ç¡®åˆå§‹åŒ–ä¸”ä¸ä¸ºç©ºï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
<li>æ ¹æ®å®é™…æ¸¸æˆé€»è¾‘ï¼Œåˆç†è®¾ç½®Â <code>OwnerActor</code>Â å’ŒÂ <code>AvatarActor</code>Â çš„å€¼ï¼Œä»¥å‡†ç¡®åæ˜ è§’è‰²ä¹‹é—´çš„æ‰€å±å’Œäº¤äº’å…³ç³»ã€‚</li>
<li>å¦‚æœåœ¨å¤šäººè”æœºç¯å¢ƒä¸‹ï¼Œè¦æ³¨æ„è¿™äº› Actor ä¿¡æ¯çš„åŒæ­¥é—®é¢˜ï¼Œç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h2 id="PossessedBy-AController-NewController-å‡½æ•°è¯¦è§£"><a href="#PossessedBy-AController-NewController-å‡½æ•°è¯¦è§£" class="headerlink" title="PossessedBy(AController* NewController)Â å‡½æ•°è¯¦è§£"></a><code>PossessedBy(AController* NewController)</code>Â å‡½æ•°è¯¦è§£</h2><h4 id="æ ¸å¿ƒå†…å®¹åˆ†æ"><a href="#æ ¸å¿ƒå†…å®¹åˆ†æ" class="headerlink" title="æ ¸å¿ƒå†…å®¹åˆ†æ"></a>æ ¸å¿ƒå†…å®¹åˆ†æ</h4><p><code>PossessedBy(AController* NewController)</code>Â æ˜¯ Unreal Engineï¼ˆè™šå¹»å¼•æ“ï¼‰ä¸­Â <code>ACharacter</code>Â ç±»çš„ä¸€ä¸ªé‡è¦è™šå‡½æ•°ï¼Œç”¨äºå¤„ç†æ§åˆ¶å™¨ï¼ˆControllerï¼‰æ‹¥æœ‰ï¼ˆPossessï¼‰è§’è‰²ï¼ˆCharacterï¼‰æ—¶çš„é€»è¾‘ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œæ§åˆ¶å™¨è´Ÿè´£ç®¡ç†ç©å®¶çš„è¾“å…¥æˆ– AI çš„å†³ç­–ï¼Œè€Œè§’è‰²åˆ™æ˜¯æ¸¸æˆä¸­å®é™…æ‰§è¡ŒåŠ¨ä½œçš„å®ä½“ã€‚å½“æ§åˆ¶å™¨æ‹¥æœ‰ä¸€ä¸ªè§’è‰²æ—¶ï¼Œ<code>PossessedBy</code>Â å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå…è®¸å¼€å‘è€…åœ¨è§’è‰²è¢«æ§åˆ¶æ—¶è¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–å’Œè®¾ç½®ã€‚</p>
<h4 id="å‡½æ•°ç­¾å"><a href="#å‡½æ•°ç­¾å" class="headerlink" title="å‡½æ•°ç­¾å"></a>å‡½æ•°ç­¾å</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PossessedBy</span><span class="params">(AController* NewController)</span> <span class="keyword">override</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>â€‹<strong>â€‹<code>PossessedBy</code>â€‹</strong>â€‹: è™šå‡½æ•°ï¼Œç”¨äºå“åº”æ§åˆ¶å™¨æ‹¥æœ‰è§’è‰²çš„äº‹ä»¶ã€‚</li>
<li>â€‹<strong>â€‹<code>AController* NewController</code>â€‹</strong>â€‹: æŒ‡å‘æ–°æ‹¥æœ‰è¯¥è§’è‰²çš„æ§åˆ¶å™¨çš„æŒ‡é’ˆã€‚</li>
</ul>
<h4 id="åœ¨-GAS-ä¸­çš„ä½œç”¨"><a href="#åœ¨-GAS-ä¸­çš„ä½œç”¨" class="headerlink" title="åœ¨ GAS ä¸­çš„ä½œç”¨"></a>åœ¨ GAS ä¸­çš„ä½œç”¨</h4><p>åœ¨ â€‹<strong>â€‹Gameplay Ability System (GAS)â€‹</strong>â€‹ ä¸­ï¼Œ<code>PossessedBy</code>Â å‡½æ•°çš„ä½œç”¨å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ° â€‹<strong>â€‹Ability System Component (ASC)â€‹</strong>â€‹ çš„åˆå§‹åŒ–å’Œç®¡ç†ã€‚ASC æ˜¯ GAS çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ç®¡ç†è§’è‰²çš„èƒ½åŠ›ï¼ˆAbilitiesï¼‰ã€å±æ€§ï¼ˆAttributesï¼‰å’Œæ•ˆæœï¼ˆEffectsï¼‰ã€‚å½“æ§åˆ¶å™¨æ‹¥æœ‰è§’è‰²æ—¶ï¼Œéœ€è¦ç¡®ä¿ ASC èƒ½å¤Ÿæ­£ç¡®åœ°ä¸æ§åˆ¶å™¨å…³è”ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
<h4 id="è¯¦ç»†è§£é‡Š"><a href="#è¯¦ç»†è§£é‡Š" class="headerlink" title="è¯¦ç»†è§£é‡Š"></a>è¯¦ç»†è§£é‡Š</h4><ol>
<li><p>â€‹<strong>â€‹åˆå§‹åŒ– Ability System Component (ASC)â€‹</strong>â€‹:<br> å½“æ§åˆ¶å™¨æ‹¥æœ‰ä¸€ä¸ªè§’è‰²æ—¶ï¼Œé€šå¸¸éœ€è¦ç¡®ä¿è¯¥è§’è‰²çš„ ASC è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚è¿™åŒ…æ‹¬ç»‘å®šä¸æ§åˆ¶å™¨ç›¸å…³çš„è¾“å…¥ã€è®¾ç½®é»˜è®¤çš„æ¸¸æˆç©æ³•æ ‡ç­¾ï¼ˆGameplay Tagsï¼‰ç­‰ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹ç»‘å®šè¾“å…¥å’Œèƒ½åŠ›æ¿€æ´»â€‹</strong>â€‹:<br> æ§åˆ¶å™¨å¯èƒ½è´Ÿè´£å¤„ç†ç©å®¶çš„è¾“å…¥ï¼Œè¿™äº›è¾“å…¥ç”¨äºæ¿€æ´»è§’è‰²çš„èƒ½åŠ›ã€‚é€šè¿‡åœ¨Â <code>PossessedBy</code>Â ä¸­è®¾ç½®é€‚å½“çš„ç»‘å®šï¼Œå¯ä»¥ç¡®ä¿å½“æ§åˆ¶å™¨å‘å‡ºæŒ‡ä»¤æ—¶ï¼ŒASC èƒ½å¤Ÿæ­£ç¡®å“åº”å¹¶æ¿€æ´»ç›¸åº”çš„èƒ½åŠ›ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹ç®¡ç†æ¸¸æˆç©æ³•æ ‡ç­¾å’Œæ•ˆæœâ€‹</strong>â€‹:<br> æ§åˆ¶å™¨çš„æ‹¥æœ‰å…³ç³»å˜åŒ–å¯èƒ½ä¼šå½±å“è§’è‰²çš„æ¸¸æˆç©æ³•æ ‡ç­¾æˆ–åº”ç”¨çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå½“ AI æ§åˆ¶å™¨æ‹¥æœ‰è§’è‰²æ—¶ï¼Œå¯èƒ½éœ€è¦åº”ç”¨ç‰¹å®šçš„æ•ˆæœæˆ–æ ‡ç­¾ï¼Œä»¥åæ˜  AI çš„è¡Œä¸ºæ¨¡å¼ã€‚</p>
</li>
</ol>
<h4 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨è‡ªå®šä¹‰çš„ Character ç±»ä¸­é‡å†™Â <code>PossessedBy</code>Â å‡½æ•°ï¼Œå¹¶åœ¨å…¶ä¸­åˆå§‹åŒ– GAS ç›¸å…³çš„é€»è¾‘ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemInterface.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MYGAME_API</span> AMyCharacter : <span class="keyword">public</span> ACharacter, <span class="keyword">public</span> IAbilitySystemInterface</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">AMyCharacter</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IAbilitySystemInterface å®ç°</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> UAbilitySystemComponent* <span class="title">GetAbilitySystemComponent</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// ASC å®ä¾‹</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(VisibleAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Abilities&quot;</span>, meta = (AllowPrivateAccess = <span class="string">&quot;true&quot;</span>))</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">UMyAbilitySystemComponent</span>* AbilitySystemComponent;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PossessedBy</span><span class="params">(AController* NewController)</span> <span class="keyword">override</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">UnPossess</span><span class="params">()</span> <span class="keyword">override</span></span>; <span class="comment">// å¯é€‰ï¼šå¤„ç†æ§åˆ¶å™¨å¤±å»æ§åˆ¶çš„æƒ…å†µ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyCharacter.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AbilitySystemComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAbilitySystemComponent.h&quot;</span> <span class="comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„ ASC ç±»</span></span></span><br><span class="line"></span><br><span class="line">AMyCharacter::<span class="built_in">AMyCharacter</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¹¶é™„åŠ  ASC</span></span><br><span class="line">    AbilitySystemComponent = <span class="built_in">CreateDefaultSubobject</span>&lt;UMyAbilitySystemComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;AbilitySystemComponent&quot;</span>));</span><br><span class="line">    AbilitySystemComponent-&gt;<span class="built_in">SetupAttachment</span>(RootComponent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">UAbilitySystemComponent* <span class="title">AMyCharacter::GetAbilitySystemComponent</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AbilitySystemComponent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::PossessedBy</span><span class="params">(AController* NewController)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">PossessedBy</span>(NewController);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent &amp;&amp; NewController)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ– ASCï¼Œä¾‹å¦‚ç»‘å®šè¾“å…¥ã€è®¾ç½®é»˜è®¤æ ‡ç­¾ç­‰</span></span><br><span class="line">        AbilitySystemComponent-&gt;<span class="built_in">InitAbilityActorInfo</span>(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰ç©å®¶æ§åˆ¶å™¨ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆå§‹åŒ–ä¸ç©å®¶ç›¸å…³çš„å†…å®¹</span></span><br><span class="line">        APlayerController* PlayerController = <span class="built_in">Cast</span>&lt;APlayerController&gt;(NewController);</span><br><span class="line">        <span class="keyword">if</span> (PlayerController)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// ä¾‹å¦‚ï¼Œç»‘å®šè¾“å…¥æ˜ å°„</span></span><br><span class="line">            <span class="comment">// AbilitySystemComponent-&gt;BindToInput(PlayerController);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¿€æ´»é»˜è®¤èƒ½åŠ›ï¼ˆå¦‚æœéœ€è¦ï¼‰</span></span><br><span class="line">        <span class="comment">// AbilitySystemComponent-&gt;ActivateAbility(FGameplayAbilitySpecHandle());</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::UnPossess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">UnPossess</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†ä¸æ§åˆ¶å™¨ç›¸å…³çš„é€»è¾‘ï¼Œä¾‹å¦‚æ¸…é™¤è¾“å…¥ç»‘å®šã€é‡ç½®çŠ¶æ€ç­‰</span></span><br><span class="line">        <span class="comment">// AbilitySystemComponent-&gt;ClearBindings();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å…³é”®æ­¥éª¤è§£é‡Š"><a href="#å…³é”®æ­¥éª¤è§£é‡Š" class="headerlink" title="å…³é”®æ­¥éª¤è§£é‡Š"></a>å…³é”®æ­¥éª¤è§£é‡Š</h4><ol>
<li><p>â€‹<strong>â€‹è°ƒç”¨çˆ¶ç±»å‡½æ•°â€‹</strong>â€‹:</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Super::<span class="built_in">PossessedBy</span>(NewController);</span><br></pre></td></tr></table></figure>
<p> ç¡®ä¿åŸºç±»çš„Â <code>PossessedBy</code>Â é€»è¾‘è¢«æ‰§è¡Œï¼Œä»¥å¤„ç†é»˜è®¤çš„æ‹¥æœ‰è¡Œä¸ºã€‚</p>
</li>
<li><p>â€‹<strong>â€‹åˆå§‹åŒ– ASCâ€‹</strong>â€‹:</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AbilitySystemComponent-&gt;<span class="built_in">InitAbilityActorInfo</span>(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p> è¿™ä¸€æ­¥å°†è§’è‰²å’Œæ§åˆ¶å™¨ä¿¡æ¯ç»‘å®šåˆ° ASCï¼Œä½¿å…¶èƒ½å¤Ÿæ­£ç¡®ç®¡ç†è§’è‰²çš„èƒ½åŠ›å’Œå±æ€§ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹å¤„ç†ç‰¹å®šç±»å‹çš„æ§åˆ¶å™¨â€‹</strong>â€‹:</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">APlayerController* PlayerController = <span class="built_in">Cast</span>&lt;APlayerController&gt;(NewController);</span><br><span class="line"><span class="keyword">if</span> (PlayerController)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç»‘å®šè¾“å…¥æˆ–å…¶ä»–ç©å®¶ç‰¹å®šé€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> æ ¹æ®æ§åˆ¶å™¨çš„ç±»å‹ï¼ˆç©å®¶æ§åˆ¶å™¨æˆ– AI æ§åˆ¶å™¨ï¼‰ï¼Œæ‰§è¡Œä¸åŒçš„åˆå§‹åŒ–é€»è¾‘ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹æ¿€æ´»é»˜è®¤èƒ½åŠ›â€‹</strong>â€‹:<br> æ ¹æ®éœ€è¦ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨æ‹¥æœ‰è§’è‰²æ—¶æ¿€æ´»æŸäº›é»˜è®¤çš„èƒ½åŠ›ï¼Œç¡®ä¿è§’è‰²åœ¨æ‹¥æœ‰åç«‹å³å…·å¤‡æ‰€éœ€çš„è¡Œä¸ºã€‚</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AbilitySystemComponent-&gt;ActivateAbility(FGameplayAbilitySpecHandle());</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>â€‹<strong>â€‹å¤„ç†å¤±å»æ§åˆ¶çš„æƒ…å†µâ€‹</strong>â€‹ï¼ˆå¯é€‰ï¼‰:</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::UnPossess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">UnPossess</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (AbilitySystemComponent)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†ä¸æ§åˆ¶å™¨ç›¸å…³çš„é€»è¾‘ï¼Œä¾‹å¦‚æ¸…é™¤è¾“å…¥ç»‘å®šã€é‡ç½®çŠ¶æ€ç­‰</span></span><br><span class="line">        <span class="comment">// AbilitySystemComponent-&gt;ClearBindings();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> åœ¨æ§åˆ¶å™¨å¤±å»å¯¹è§’è‰²çš„æ§åˆ¶æ—¶ï¼Œè¿›è¡Œå¿…è¦çš„æ¸…ç†å·¥ä½œï¼Œç¡®ä¿è§’è‰²çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚</p>
</li>
</ol>
<h4 id="ä½¿ç”¨åœºæ™¯è¯´æ˜-1"><a href="#ä½¿ç”¨åœºæ™¯è¯´æ˜-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯è¯´æ˜"></a>ä½¿ç”¨åœºæ™¯è¯´æ˜</h4><p>åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œ<code>PossessedBy</code>Â å‡½æ•°é€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>â€‹<strong>â€‹è§’è‰²åˆå§‹åŒ–â€‹</strong>â€‹: å½“ç©å®¶æˆ– AI æ§åˆ¶å™¨é¦–æ¬¡æ‹¥æœ‰è§’è‰²æ—¶ï¼Œè¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–è®¾ç½®ï¼Œå¦‚ç»‘å®šè¾“å…¥ã€æ¿€æ´»é»˜è®¤èƒ½åŠ›ç­‰ã€‚</li>
<li>â€‹<strong>â€‹æ§åˆ¶å™¨åˆ‡æ¢â€‹</strong>â€‹: å½“æ§åˆ¶å™¨åœ¨è¿è¡Œæ—¶åˆ‡æ¢ï¼ˆä¾‹å¦‚ï¼Œç©å®¶æ­»äº¡åé‡æ–°æ§åˆ¶å¦ä¸€ä¸ªè§’è‰²ï¼‰ï¼Œç¡®ä¿æ–°æ§åˆ¶å™¨æ­£ç¡®åœ°ä¸è§’è‰²å…³è”ã€‚</li>
<li>â€‹<strong>â€‹çŠ¶æ€ç®¡ç†â€‹</strong>â€‹: æ ¹æ®æ§åˆ¶å™¨çš„ç±»å‹ï¼ˆç©å®¶æˆ– AIï¼‰ï¼Œè°ƒæ•´è§’è‰²çš„è¡Œä¸ºå’ŒçŠ¶æ€ï¼Œä»¥é€‚åº”ä¸åŒçš„æ¸¸æˆé€»è¾‘ã€‚</li>
</ul>
<h4 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><ul>
<li><p>â€‹<strong>â€‹é¿å…é‡å¤åˆå§‹åŒ–â€‹</strong>â€‹: ç¡®ä¿Â <code>PossessedBy</code>Â ä¸­çš„åˆå§‹åŒ–é€»è¾‘ä¸ä¼šåœ¨æ¯æ¬¡æ§åˆ¶å™¨åˆ‡æ¢æ—¶é‡å¤æ‰§è¡Œä¸å¿…è¦çš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡æ ‡å¿—ä½æˆ–å…¶ä»–æœºåˆ¶æ¥ç®¡ç†åˆå§‹åŒ–çŠ¶æ€ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹å¤„ç†å¤±å»æ§åˆ¶çš„æƒ…å†µâ€‹</strong>â€‹: é™¤äº†Â <code>PossessedBy</code>ï¼Œè¿˜éœ€è¦é‡å†™Â <code>UnPossess</code>Â å‡½æ•°ï¼Œä»¥å¤„ç†æ§åˆ¶å™¨å¤±å»å¯¹è§’è‰²æ§åˆ¶æ—¶çš„æ¸…ç†å·¥ä½œï¼Œç¡®ä¿è§’è‰²çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹åŒæ­¥é—®é¢˜â€‹</strong>â€‹: åœ¨å¤šäººè”æœºç¯å¢ƒä¸‹ï¼Œè¦æ³¨æ„è¿™äº› Actor ä¿¡æ¯çš„åŒæ­¥é—®é¢˜ï¼Œç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„ä¸€è‡´æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¿€æ´»èƒ½åŠ›å’Œåº”ç”¨æ•ˆæœæ—¶ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹è¾“å…¥ç»‘å®šâ€‹</strong>â€‹: ç¡®ä¿è¾“å…¥ç»‘å®šä¸æ§åˆ¶å™¨çš„ç±»å‹åŒ¹é…ï¼Œé¿å…åœ¨ AI æ§åˆ¶å™¨ä¸Šç»‘å®šä¸å¿…è¦çš„ç©å®¶è¾“å…¥é€»è¾‘ã€‚</p>
</li>
</ul>
<hr>
<h2 id="â€‹â€‹FGameplayAbilitySpecâ€‹â€‹"><a href="#â€‹â€‹FGameplayAbilitySpecâ€‹â€‹" class="headerlink" title="â€‹â€‹FGameplayAbilitySpecâ€‹â€‹"></a>â€‹<strong>â€‹FGameplayAbilitySpecâ€‹</strong>â€‹</h2><blockquote>
<p>â€‹<strong>â€‹æ˜¯Unreal Engine (UE)â€‹</strong>â€‹ ä¸­ â€‹<strong>â€‹Gameplay Ability System (GAS)â€‹</strong>â€‹ çš„æ ¸å¿ƒç»“æ„ä½“ï¼Œç”¨äºå®šä¹‰å’Œç®¡ç†å•ä¸ªæ¸¸æˆç©æ³•èƒ½åŠ›å®ä¾‹ã€‚</p>
</blockquote>
<hr>
<h2 id="â€‹â€‹1-ä¸»è¦ç»„æˆéƒ¨åˆ†â€‹â€‹"><a href="#â€‹â€‹1-ä¸»è¦ç»„æˆéƒ¨åˆ†â€‹â€‹" class="headerlink" title="â€‹â€‹1. ä¸»è¦ç»„æˆéƒ¨åˆ†â€‹â€‹"></a>â€‹<strong>â€‹1. ä¸»è¦ç»„æˆéƒ¨åˆ†â€‹</strong>â€‹</h2><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>â€‹<strong>â€‹<code>Ability</code>â€‹</strong>â€‹</td>
<td><code>TSubclassOf&lt;UGameplayAbility&gt;</code></td>
<td>å…·ä½“çš„èƒ½åŠ›ç±»ï¼ˆå¦‚Â <code>UMyGameplayAbility</code>ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>InputID</code>â€‹</strong>â€‹</td>
<td><code>int32</code></td>
<td>è¾“å…¥ç»‘å®š IDï¼ˆå¦‚é”®ç›˜æŒ‰é”®æˆ–æ‰‹æŸ„æŒ‰é’®ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>Level</code>â€‹</strong>â€‹</td>
<td><code>int32</code></td>
<td>èƒ½åŠ›ç­‰çº§ï¼ˆå½±å“å¼ºåº¦æˆ–æ•ˆæœï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>ActivationBlockedBy</code>â€‹</strong>â€‹</td>
<td><code>FGameplayTagContainer</code></td>
<td>é˜»æ­¢æ¿€æ´»çš„æ ‡ç­¾ï¼ˆå¦‚â€œçœ©æ™•â€çŠ¶æ€ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>GrantedTags</code>â€‹</strong>â€‹</td>
<td><code>FGameplayTagContainer</code></td>
<td>æ¿€æ´»æ—¶æˆäºˆçš„æ ‡ç­¾ï¼ˆå½±å“å…¶ä»–èƒ½åŠ›ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>SourceObject</code>â€‹</strong>â€‹</td>
<td><code>UObject*</code></td>
<td>èƒ½åŠ›æ¥æºï¼ˆå¦‚è§’è‰²ã€é“å…·ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>StartTime</code>â€‹</strong>â€‹</td>
<td><code>float</code></td>
<td>æ¿€æ´»æ—¶é—´ï¼ˆç”¨äºè®¡ç®—æŒç»­æ—¶é—´&#x2F;å†·å´ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>Duration</code>â€‹</strong>â€‹</td>
<td><code>float</code></td>
<td>æŒç»­æ—¶é—´ï¼ˆæŒç»­å‹èƒ½åŠ›ï¼‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>CooldownTimeRemaining</code>â€‹</strong>â€‹</td>
<td><code>float</code></td>
<td>å‰©ä½™å†·å´æ—¶é—´ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹<code>bIsActive</code>â€‹</strong>â€‹</td>
<td><code>bool</code></td>
<td>æ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€ã€‚</td>
</tr>
</tbody></table>
<hr>
<h2 id="â€‹â€‹2-åˆ›å»ºä¸ç®¡ç†â€‹â€‹"><a href="#â€‹â€‹2-åˆ›å»ºä¸ç®¡ç†â€‹â€‹" class="headerlink" title="â€‹â€‹2. åˆ›å»ºä¸ç®¡ç†â€‹â€‹"></a>â€‹<strong>â€‹2. åˆ›å»ºä¸ç®¡ç†â€‹</strong>â€‹</h2><h3 id="â€‹â€‹2-1-åˆ›å»º-FGameplayAbilitySpecâ€‹â€‹"><a href="#â€‹â€‹2-1-åˆ›å»º-FGameplayAbilitySpecâ€‹â€‹" class="headerlink" title="â€‹â€‹2.1 åˆ›å»ºÂ FGameplayAbilitySpecâ€‹â€‹"></a>â€‹<strong>â€‹2.1 åˆ›å»ºÂ <code>FGameplayAbilitySpec</code>â€‹</strong>â€‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å– AbilitySystemComponent</span></span><br><span class="line">UAbilitySystemComponent* ASC = xxx<span class="comment">/* è·å–æˆ–åˆå§‹åŒ– */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰èƒ½åŠ›ç±»å’Œç­‰çº§</span></span><br><span class="line">TSubclassOf&lt;UGameplayAbility&gt; AbilityClass = UMyGameplayAbility::<span class="built_in">StaticClass</span>();</span><br><span class="line">int32 Level = <span class="number">1</span>;</span><br><span class="line">int32 InputID = <span class="number">0</span>; <span class="comment">// ç»‘å®šè¾“å…¥ï¼ˆå¦‚æŒ‰é”®ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Spec</span></span><br><span class="line"><span class="function">FGameplayAbilitySpec <span class="title">Spec</span><span class="params">(AbilityClass, Level, InputID)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ åˆ° AbilitySystemComponent</span></span><br><span class="line">ASC-&gt;<span class="built_in">GiveAbility</span>(Spec);</span><br></pre></td></tr></table></figure>

<h3 id="â€‹â€‹3-1-æ¿€æ´»-å–æ¶ˆèƒ½åŠ›â€‹â€‹"><a href="#â€‹â€‹3-1-æ¿€æ´»-å–æ¶ˆèƒ½åŠ›â€‹â€‹" class="headerlink" title="â€‹â€‹3.1 æ¿€æ´»&#x2F;å–æ¶ˆèƒ½åŠ›â€‹â€‹"></a>â€‹<strong>â€‹3.1 æ¿€æ´»&#x2F;å–æ¶ˆèƒ½åŠ›â€‹</strong>â€‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¿€æ´»èƒ½åŠ›</span></span><br><span class="line">ASC-&gt;<span class="built_in">ActivateAbility</span>(Spec.Handle);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ¶ˆèƒ½åŠ›</span></span><br><span class="line">ASC-&gt;<span class="built_in">CancelAbility</span>(Spec.Handle, Spec.ActivationInfo, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>



<h1 id="GAS-é€šçŸ¥è“å›¾-å¾ˆé‡è¦å¿…é¡»çœ‹ï¼"><a href="#GAS-é€šçŸ¥è“å›¾-å¾ˆé‡è¦å¿…é¡»çœ‹ï¼" class="headerlink" title="GAS-é€šçŸ¥è“å›¾-å¾ˆé‡è¦å¿…é¡»çœ‹ï¼"></a>GAS-é€šçŸ¥è“å›¾-å¾ˆé‡è¦å¿…é¡»çœ‹ï¼</h1><p>çœ‹ä¸åˆ°å›¾ç‰‡è¯·è”ç³»æˆ‘ï¼Œæˆ‘ä¼šç»™ä½ å‘æœ¬åœ°æ–‡æ¡£ï¼Œå› ä¸ºæœ¬äººå¾ˆæ‡’ï¼Œæš‚æ—¶ä¸æƒ³æ·»åŠ å›¾ç‰‡æ˜¾ç¤ºã€‚</p>
<h2 id="Pasted-image-20250422172242-png"><a href="#Pasted-image-20250422172242-png" class="headerlink" title="![[Pasted image 20250422172242.png]]"></a>![[Pasted image 20250422172242.png]]</h2><p>é€šçŸ¥è“å›¾ä¸­æœ‰ä¸ªæ¥å—é€šçŸ¥äº‹ä»¶ï¼ŒèŠ‚ç‚¹å¦‚ä¸‹<br>è¯¥èŠ‚ç‚¹å‘é€é€šçŸ¥ç»™è§’è‰²ï¼Œæ¥å—ä¸€ä¸ªè§’è‰²æ ‡ç­¾<br>![[Pasted image 20250422172549.png]]<br>é€šçŸ¥çš„çš„åŸç†ï¼šä¸€å®šè¦ä½¿å¾—æ¸¸æˆæ ‡ç­¾å¯è§ï¼Œä½¿ç”¨send gameplayevent to actor èŠ‚ç‚¹å°†é€šçŸ¥é€šè¿‡æ¸¸æˆæ ‡ç­¾å‘é€ç»™è§’è‰²ï¼ŒEvent gameplay enentèŠ‚ç‚¹ç”¨äºæ¥å—é€šçŸ¥å¹¶æ‰§è¡Œ<br>![[Pasted image 20250422173850.png]]<br>é‚£ä¹ˆå¯ä»¥åˆ©ç”¨åœ¨åŠ¨ç”»è“å›¾ä¸­æ”¾ç½®è‡ªå®šä¹‰é€šçŸ¥ï¼Œä¸€æ—¦åŠ¨ç”»æ’­æ”¾å®Œï¼Œæ”¶åˆ°é€šçŸ¥åˆ™å°†æ­¦å™¨ç»‘å®šåˆ°æ‰‹éƒ¨ï¼Œå®ç°æˆ–è€…å®ç°å…¶å®ƒä»»æ„åŠŸèƒ½äº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/15/2025-04-15-%E8%99%9A%E5%B9%BBCpp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zoomi">
      <meta itemprop="description" content="æ¬¢è¿æ¥åˆ°æˆ‘çš„è™šå¹»ä¸ªäººåšå®¢ï¼Œä¸å®šæœŸæ›´æ–°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zoomiçš„è™šå¹»ä¸–ç•Œ">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/15/2025-04-15-%E8%99%9A%E5%B9%BBCpp/" class="post-title-link" itemprop="url">è™šå¹»C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-04-15 13:00:00 / ä¿®æ”¹æ—¶é—´ï¼š13:04:44" itemprop="dateCreated datePublished" datetime="2025-04-15T13:00:00+08:00">2025-04-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8E/" itemprop="url" rel="index"><span itemprop="name">è™šå¹»å¼•æ“</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="UE5-è°ƒè¯•-API-å¸¸ç”¨"><a href="#UE5-è°ƒè¯•-API-å¸¸ç”¨" class="headerlink" title="UE5 è°ƒè¯• API-å¸¸ç”¨"></a>UE5 è°ƒè¯• API-å¸¸ç”¨</h1><h2 id="åŸºç¡€è°ƒè¯•è¾“å‡º"><a href="#åŸºç¡€è°ƒè¯•è¾“å‡º" class="headerlink" title="åŸºç¡€è°ƒè¯•è¾“å‡º"></a>åŸºç¡€è°ƒè¯•è¾“å‡º</h2><h3 id="æ—¥å¿—è¾“å‡º"><a href="#æ—¥å¿—è¾“å‡º" class="headerlink" title="æ—¥å¿—è¾“å‡º"></a>æ—¥å¿—è¾“å‡º</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€æ—¥å¿—</span></span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;This is a log message&quot;</span>));</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;This is a warning&quot;</span>));</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Error, <span class="built_in">TEXT</span>(<span class="string">&quot;This is an error&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦å˜é‡çš„è¾“å‡º</span></span><br><span class="line"><span class="type">float</span> Health = <span class="number">75.0f</span>;</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogTemp, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Player health: %f&quot;</span>), Health);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦åˆ†ç±»çš„æ—¥å¿—ï¼ˆéœ€å…ˆåœ¨å¤´æ–‡ä»¶å£°æ˜ï¼‰</span></span><br><span class="line"><span class="built_in">DECLARE_LOG_CATEGORY_EXTERN</span>(LogMyGame, Log, All);</span><br><span class="line"><span class="built_in">DEFINE_LOG_CATEGORY</span>(LogMyGame);</span><br><span class="line"><span class="built_in">UE_LOG</span>(LogMyGame, Log, <span class="built_in">TEXT</span>(<span class="string">&quot;Custom category log&quot;</span>));</span><br><span class="line"><span class="comment">// å±å¹•è¾“å‡ºï¼ˆé»˜è®¤æ˜¾ç¤º2ç§’ï¼‰</span></span><br><span class="line">GEngine-&gt;<span class="built_in">AddOnScreenDebugMessage</span>(<span class="number">-1</span>, <span class="number">2.0f</span>, FColor::White, <span class="built_in">TEXT</span>(<span class="string">&quot;Hello World!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦Keyçš„å±å¹•è¾“å‡ºï¼ˆå¯æ›´æ–°ï¼‰</span></span><br><span class="line"><span class="type">static</span> int32 MyDebugKey = <span class="number">0</span>;</span><br><span class="line">GEngine-&gt;<span class="built_in">AddOnScreenDebugMessage</span>(MyDebugKey, <span class="number">5.0f</span>, FColor::Green, </span><br><span class="line">    FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;Health: %.2f&quot;</span>), Health));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶è°ƒè¯•çƒä½“</span></span><br><span class="line"><span class="built_in">DrawDebugSphere</span>(<span class="built_in">GetWorld</span>(), Location, Radius, Segments, Color, bPersistentLines, LifeTime, DepthPriority, Thickness);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶è°ƒè¯•ç›’å­</span></span><br><span class="line"><span class="built_in">DrawDebugBox</span>(<span class="built_in">GetWorld</span>(), Center, Extent, Color, bPersistentLines, LifeTime, DepthPriority, Thickness);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶è°ƒè¯•çº¿æ¡</span></span><br><span class="line"><span class="built_in">DrawDebugLine</span>(<span class="built_in">GetWorld</span>(), Start, End, Color, bPersistentLines, LifeTime, DepthPriority, Thickness);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶è°ƒè¯•ç‚¹</span></span><br><span class="line"><span class="built_in">DrawDebugPoint</span>(<span class="built_in">GetWorld</span>(), Location, Size, Color, bPersistentLines, LifeTime, DepthPriority)ï¼›</span><br></pre></td></tr></table></figure>




<h2 id="Unreal-Engine-5-å¸¸ç”¨å®é€ŸæŸ¥è¡¨"><a href="#Unreal-Engine-5-å¸¸ç”¨å®é€ŸæŸ¥è¡¨" class="headerlink" title="Unreal Engine 5 å¸¸ç”¨å®é€ŸæŸ¥è¡¨"></a>Unreal Engine 5 å¸¸ç”¨å®é€ŸæŸ¥è¡¨</h2><h3 id="1-ç±»å£°æ˜å®"><a href="#1-ç±»å£°æ˜å®" class="headerlink" title="1. ç±»å£°æ˜å®"></a><strong>1. ç±»å£°æ˜å®</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>UCLASS()</code></td>
<td>å£°æ˜ä¸€ä¸ª UE åå°„ç±»</td>
<td><code>UCLASS(Blueprintable, meta=(DisplayName=&quot;My Actor&quot;))</code></td>
</tr>
<tr>
<td><code>UINTERFACE()</code></td>
<td>å£°æ˜ä¸€ä¸ª UE åå°„æ¥å£</td>
<td><code>UINTERFACE(MinimalAPI, Blueprintable)</code></td>
</tr>
<tr>
<td><code>UGENERATED_BODY()</code></td>
<td>è‡ªåŠ¨ç”Ÿæˆç±»åå°„ä»£ç ï¼ˆå¿…é¡»æ”¾åœ¨ç±»ä½“å†…ï¼‰</td>
<td><code>GENERATED_BODY()</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<hr>
<h3 id="2-å±æ€§å®-UPROPERTY"><a href="#2-å±æ€§å®-UPROPERTY" class="headerlink" title="2. å±æ€§å® (UPROPERTY)"></a><strong>2. å±æ€§å® (<code>UPROPERTY</code>)</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>BlueprintReadOnly</code></td>
<td>è“å›¾åªè¯»</td>
<td><code>UPROPERTY(BlueprintReadOnly)</code></td>
</tr>
<tr>
<td><code>BlueprintReadWrite</code></td>
<td>è“å›¾å¯è¯»å†™</td>
<td><code>UPROPERTY(BlueprintReadWrite)</code></td>
</tr>
<tr>
<td><code>EditAnywhere</code></td>
<td>åœ¨ç¼–è¾‘å™¨ä»»æ„ä½ç½®å¯ç¼–è¾‘</td>
<td><code>UPROPERTY(EditAnywhere)</code></td>
</tr>
<tr>
<td><code>EditDefaultsOnly</code></td>
<td>ä»…å¯åœ¨é»˜è®¤å€¼ï¼ˆCDOï¼‰ç¼–è¾‘</td>
<td><code>UPROPERTY(EditDefaultsOnly)</code></td>
</tr>
<tr>
<td><code>VisibleAnywhere</code></td>
<td>åœ¨ç¼–è¾‘å™¨å¯è§ä½†ä¸å¯ç¼–è¾‘</td>
<td><code>UPROPERTY(VisibleAnywhere)</code></td>
</tr>
<tr>
<td><code>Category=&quot;CategoryName&quot;</code></td>
<td>åœ¨ç¼–è¾‘å™¨åˆ†ç±»</td>
<td><code>UPROPERTY(Category=&quot;Movement&quot;)</code></td>
</tr>
<tr>
<td><code>meta=(DisplayName=&quot;Nice Name&quot;)</code></td>
<td>æ˜¾ç¤ºæ›´å‹å¥½çš„åç§°</td>
<td><code>UPROPERTY(meta=(DisplayName=&quot;Health&quot;))</code></td>
</tr>
<tr>
<td><code>Replicated</code></td>
<td>ç½‘ç»œåŒæ­¥ï¼ˆéœ€åœ¨Â <code>GetLifetimeReplicatedProps</code>Â å¤„ç†ï¼‰</td>
<td><code>UPROPERTY(Replicated)</code></td>
</tr>
<tr>
<td><code>Transient</code></td>
<td>ä¸ä¿å­˜åˆ°ç£ç›˜ï¼ˆä¸´æ—¶å˜é‡ï¼‰</td>
<td><code>UPROPERTY(Transient)</code></td>
</tr>
<tr>
<td><code>SaveGame</code></td>
<td>å¯åºåˆ—åŒ–åˆ°å­˜æ¡£</td>
<td><code>UPROPERTY(SaveGame)</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<hr>
<h3 id="3-å‡½æ•°å®-UFUNCTION"><a href="#3-å‡½æ•°å®-UFUNCTION" class="headerlink" title="3. å‡½æ•°å® (UFUNCTION)"></a><strong>3. å‡½æ•°å® (<code>UFUNCTION</code>)</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>BlueprintCallable</code></td>
<td>å¯åœ¨è“å›¾ä¸­è°ƒç”¨</td>
<td><code>UFUNCTION(BlueprintCallable)</code></td>
</tr>
<tr>
<td><code>BlueprintPure</code></td>
<td>çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰</td>
<td><code>UFUNCTION(BlueprintPure)</code></td>
</tr>
<tr>
<td><code>BlueprintImplementableEvent</code></td>
<td>è“å›¾å¯è¦†ç›–çš„è™šå‡½æ•°ï¼ˆæ—  C++ å®ç°ï¼‰</td>
<td><code>UFUNCTION(BlueprintImplementableEvent)</code></td>
</tr>
<tr>
<td><code>BlueprintNativeEvent</code></td>
<td>è“å›¾å¯è¦†ç›–çš„è™šå‡½æ•°ï¼ˆæœ‰é»˜è®¤ C++ å®ç°ï¼‰</td>
<td><code>UFUNCTION(BlueprintNativeEvent)</code></td>
</tr>
<tr>
<td><code>Server</code></td>
<td>ä»…åœ¨æœåŠ¡å™¨æ‰§è¡Œï¼ˆRPCï¼‰</td>
<td><code>UFUNCTION(Server, Reliable)</code></td>
</tr>
<tr>
<td><code>Client</code></td>
<td>ä»…åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼ˆRPCï¼‰</td>
<td><code>UFUNCTION(Client, Reliable)</code></td>
</tr>
<tr>
<td><code>NetMulticast</code></td>
<td>å¤šæ’­ï¼ˆæ‰€æœ‰å®¢æˆ·ç«¯æ‰§è¡Œï¼‰</td>
<td><code>UFUNCTION(NetMulticast, Reliable)</code></td>
</tr>
<tr>
<td><code>WithValidation</code></td>
<td>RPC å‚æ•°éªŒè¯</td>
<td><code>UFUNCTION(Server, WithValidation)</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="4-ç»“æ„ä½“å®-USTRUCT"><a href="#4-ç»“æ„ä½“å®-USTRUCT" class="headerlink" title="4. ç»“æ„ä½“å® (USTRUCT)"></a><strong>4. ç»“æ„ä½“å® (<code>USTRUCT</code>)</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>USTRUCT()</code></td>
<td>å£°æ˜åå°„ç»“æ„ä½“</td>
<td><code>USTRUCT(BlueprintType)</code></td>
</tr>
<tr>
<td><code>GENERATED_BODY()</code></td>
<td>ç”Ÿæˆç»“æ„ä½“åå°„ä»£ç </td>
<td><code>GENERATED_BODY()</code></td>
</tr>
<tr>
<td><code>BlueprintType</code></td>
<td>å¯åœ¨è“å›¾ä¸­ä½¿ç”¨</td>
<td><code>USTRUCT(BlueprintType)</code></td>
</tr>
<tr>
<td><code>meta=(BlueprintInternalUseOnly)</code></td>
<td>ä»…é™å†…éƒ¨ä½¿ç”¨</td>
<td><code>USTRUCT(meta=(BlueprintInternalUseOnly))</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="5-æšä¸¾å®-UENUM"><a href="#5-æšä¸¾å®-UENUM" class="headerlink" title="5. æšä¸¾å® (UENUM)"></a><strong>5. æšä¸¾å® (<code>UENUM</code>)</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>UENUM()</code></td>
<td>å£°æ˜åå°„æšä¸¾</td>
<td><code>UENUM(BlueprintType)</code></td>
</tr>
<tr>
<td><code>BlueprintType</code></td>
<td>å¯åœ¨è“å›¾ä¸­ä½¿ç”¨</td>
<td><code>UENUM(BlueprintType)</code></td>
</tr>
<tr>
<td><code>meta=(DisplayName=&quot;Nice Name&quot;)</code></td>
<td>æ˜¾ç¤ºå‹å¥½åç§°</td>
<td><code>UENUM(meta=(DisplayName=&quot;Weapon Type&quot;))</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="6-å…¶ä»–å¸¸ç”¨å®"><a href="#6-å…¶ä»–å¸¸ç”¨å®" class="headerlink" title="6. å…¶ä»–å¸¸ç”¨å®"></a><strong>6. å…¶ä»–å¸¸ç”¨å®</strong></h3><table>
<thead>
<tr>
<th>å®</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>DECLARE_DYNAMIC_MULTICAST_DELEGATE</code></td>
<td>å£°æ˜åŠ¨æ€å¤šæ’­å§”æ‰˜</td>
<td><code>DECLARE_DYNAMIC_MULTICAST_DELEGATE(FMyDelegate);</code></td>
</tr>
<tr>
<td><code>DECLARE_DELEGATE</code></td>
<td>å£°æ˜å•æ’­å§”æ‰˜</td>
<td><code>DECLARE_DELEGATE(FMySimpleDelegate);</code></td>
</tr>
<tr>
<td><code>UE_LOG</code></td>
<td>æ‰“å°æ—¥å¿—</td>
<td><code>UE_LOG(LogTemp, Warning, TEXT(&quot;Hello&quot;));</code></td>
</tr>
<tr>
<td><code>ensure()</code></td>
<td>è¿è¡Œæ—¶æ£€æŸ¥ï¼ˆä¸å´©æºƒï¼‰</td>
<td><code>ensure(MyPointer != nullptr);</code></td>
</tr>
<tr>
<td><code>check()</code></td>
<td>è¿è¡Œæ—¶æ–­è¨€ï¼ˆå´©æºƒï¼‰</td>
<td><code>check(MyPointer != nullptr);</code></td>
</tr>
<tr>
<td><code>GEngine-&gt;AddOnScreenDebugMessage</code></td>
<td>å±å¹•æ‰“å°è°ƒè¯•ä¿¡æ¯</td>
<td><code>GEngine-&gt;AddOnScreenDebugMessage(-1, 5.f, FColor::Red, TEXT(&quot;Hello&quot;));</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="UCapsuleComponent-èƒ¶å›Šä½“-å¸¸ç”¨-API-é€ŸæŸ¥è¡¨"><a href="#UCapsuleComponent-èƒ¶å›Šä½“-å¸¸ç”¨-API-é€ŸæŸ¥è¡¨" class="headerlink" title="UCapsuleComponent èƒ¶å›Šä½“ å¸¸ç”¨ API é€ŸæŸ¥è¡¨"></a>UCapsuleComponent èƒ¶å›Šä½“ å¸¸ç”¨ API é€ŸæŸ¥è¡¨</h2><h3 id="1-åŸºç¡€å±æ€§è®¾ç½®"><a href="#1-åŸºç¡€å±æ€§è®¾ç½®" class="headerlink" title="1. åŸºç¡€å±æ€§è®¾ç½®"></a><strong>1. åŸºç¡€å±æ€§è®¾ç½®</strong></h3><table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>SetCapsuleSize(float Radius, float HalfHeight, bool bUpdateOverlaps)</code></td>
<td>è®¾ç½®èƒ¶å›Šä½“çš„åŠå¾„å’ŒåŠé«˜</td>
<td><code>CapsuleComp-&gt;SetCapsuleSize(50.f, 100.f);</code></td>
</tr>
<tr>
<td><code>GetScaledCapsuleRadius()</code></td>
<td>è·å–å½“å‰ç¼©æ”¾åçš„åŠå¾„</td>
<td><code>float Radius = CapsuleComp-&gt;GetScaledCapsuleRadius();</code></td>
</tr>
<tr>
<td><code>GetScaledCapsuleHalfHeight()</code></td>
<td>è·å–å½“å‰ç¼©æ”¾åçš„åŠé«˜</td>
<td><code>float HalfHeight = CapsuleComp-&gt;GetScaledCapsuleHalfHeight();</code></td>
</tr>
<tr>
<td><code>GetCapsuleAxis()</code></td>
<td>è·å–èƒ¶å›Šä½“çš„æœå‘è½´ï¼ˆé»˜è®¤Â <code>Z</code>Â è½´ï¼‰</td>
<td><code>FVector Axis = CapsuleComp-&gt;GetCapsuleAxis();</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="2-ç¢°æ’ä¸ç‰©ç†"><a href="#2-ç¢°æ’ä¸ç‰©ç†" class="headerlink" title="2. ç¢°æ’ä¸ç‰©ç†"></a><strong>2. ç¢°æ’ä¸ç‰©ç†</strong></h3><table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>SetCollisionEnabled(ECollisionEnabled::Type NewType)</code></td>
<td>å¯ç”¨&#x2F;ç¦ç”¨ç¢°æ’</td>
<td><code>CapsuleComp-&gt;SetCollisionEnabled(ECollisionEnabled::QueryAndPhysics);</code></td>
</tr>
<tr>
<td><code>SetCollisionResponseToChannel(ECollisionChannel Channel, ECollisionResponse Response)</code></td>
<td>è®¾ç½®å¯¹ç‰¹å®šé€šé“çš„ç¢°æ’å“åº”</td>
<td><code>CapsuleComp-&gt;SetCollisionResponseToChannel(ECC_Pawn, ECR_Ignore);</code></td>
</tr>
<tr>
<td><code>SetGenerateOverlapEvents(bool bGenerate)</code></td>
<td>æ˜¯å¦ç”Ÿæˆé‡å äº‹ä»¶</td>
<td><code>CapsuleComp-&gt;SetGenerateOverlapEvents(true);</code></td>
</tr>
<tr>
<td><code>OnComponentBeginOverlap.AddDynamic()</code></td>
<td>ç»‘å®šé‡å å¼€å§‹äº‹ä»¶</td>
<td><code>CapsuleComp-&gt;OnComponentBeginOverlap.AddDynamic(this, &amp;AMyActor::OnCapsuleBeginOverlap);</code></td>
</tr>
<tr>
<td><code>OnComponentEndOverlap.AddDynamic()</code></td>
<td>ç»‘å®šé‡å ç»“æŸäº‹ä»¶</td>
<td><code>CapsuleComp-&gt;OnComponentEndOverlap.AddDynamic(this, &amp;AMyActor::OnCapsuleEndOverlap);</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="3-ä½ç½®ä¸å˜æ¢"><a href="#3-ä½ç½®ä¸å˜æ¢" class="headerlink" title="3. ä½ç½®ä¸å˜æ¢"></a><strong>3. ä½ç½®ä¸å˜æ¢</strong></h3><table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>GetComponentLocation()</code></td>
<td>è·å–èƒ¶å›Šä½“ä¸­å¿ƒä½ç½®</td>
<td><code>FVector Location = CapsuleComp-&gt;GetComponentLocation();</code></td>
</tr>
<tr>
<td><code>GetComponentRotation()</code></td>
<td>è·å–èƒ¶å›Šä½“æ—‹è½¬</td>
<td><code>FRotator Rotation = CapsuleComp-&gt;GetComponentRotation();</code></td>
</tr>
<tr>
<td><code>SetWorldLocation(FVector NewLocation)</code></td>
<td>è®¾ç½®ä¸–ç•Œåæ ‡ä½ç½®</td>
<td><code>CapsuleComp-&gt;SetWorldLocation(FVector(0, 0, 100));</code></td>
</tr>
<tr>
<td><code>AddLocalOffset(FVector DeltaLocation)</code></td>
<td>å±€éƒ¨åæ ‡åç§»</td>
<td><code>CapsuleComp-&gt;AddLocalOffset(FVector(10, 0, 0));</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="4-è°ƒè¯•ä¸å¯è§†åŒ–"><a href="#4-è°ƒè¯•ä¸å¯è§†åŒ–" class="headerlink" title="4. è°ƒè¯•ä¸å¯è§†åŒ–"></a><strong>4. è°ƒè¯•ä¸å¯è§†åŒ–</strong></h3><table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>SetHiddenInGame(bool bHidden)</code></td>
<td>éšè—&#x2F;æ˜¾ç¤ºèƒ¶å›Šä½“</td>
<td><code>CapsuleComp-&gt;SetHiddenInGame(false);</code></td>
</tr>
<tr>
<td><code>ShapeColor</code></td>
<td>è®¾ç½®è°ƒè¯•é¢œè‰²ï¼ˆç¼–è¾‘å™¨å¯è§ï¼‰</td>
<td><code>CapsuleComp-&gt;ShapeColor = FColor::Green;</code></td>
</tr>
<tr>
<td><code>bDrawOnlyIfSelected</code></td>
<td>ä»…åœ¨é€‰ä¸­æ—¶æ˜¾ç¤º</td>
<td><code>CapsuleComp-&gt;bDrawOnlyIfSelected = true;</code></td>
</tr>
<tr>
<td><code>MarkRenderStateDirty()</code></td>
<td>å¼ºåˆ¶åˆ·æ–°æ¸²æŸ“çŠ¶æ€</td>
<td><code>CapsuleComp-&gt;MarkRenderStateDirty();</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="5-å°„çº¿æ£€æµ‹ä¸å‡ ä½•æŸ¥è¯¢"><a href="#5-å°„çº¿æ£€æµ‹ä¸å‡ ä½•æŸ¥è¯¢" class="headerlink" title="5. å°„çº¿æ£€æµ‹ä¸å‡ ä½•æŸ¥è¯¢"></a><strong>5. å°„çº¿æ£€æµ‹ä¸å‡ ä½•æŸ¥è¯¢</strong></h3><table>
<thead>
<tr>
<th><strong>API</strong></th>
<th><strong>è¯´æ˜</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>IsOverlappingComponent(UPrimitiveComponent* OtherComp)</code></td>
<td>æ£€æŸ¥æ˜¯å¦ä¸å…¶ä»–ç»„ä»¶é‡å </td>
<td><code>bool bOverlapping = CapsuleComp-&gt;IsOverlappingComponent(OtherActor-&gt;GetMesh());</code></td>
</tr>
<tr>
<td><code>SweepComponent(FHitResult&amp; OutHit, FVector Start, FVector End, FRotator Rotation)</code></td>
<td>èƒ¶å›Šä½“æ‰«ææ£€æµ‹</td>
<td><code>CapsuleComp-&gt;SweepComponent(OutHit, Start, End, FQuat::Identity);</code></td>
</tr>
<tr>
<td><code>GetOverlappingActors(TArray&lt;AActor*&gt;&amp; OutActors)</code></td>
<td>è·å–æ‰€æœ‰é‡å çš„ Actor</td>
<td><code>CapsuleComp-&gt;GetOverlappingActors(OverlappingActors);</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="é›¶æ•£é‡è¦api"><a href="#é›¶æ•£é‡è¦api" class="headerlink" title="é›¶æ•£é‡è¦api"></a>é›¶æ•£é‡è¦api</h1><p>**AutoPossessPlayer &#x3D;EAutoReceiveInput::player0;     è®¾ç½®ç©å®¶æ§åˆ¶å™¨</p>
<h1 id="UE5-5-å¢å¼ºè¾“å…¥ç³»ç»Ÿä½¿ç”¨æŒ‡å—-C-å®ç°"><a href="#UE5-5-å¢å¼ºè¾“å…¥ç³»ç»Ÿä½¿ç”¨æŒ‡å—-C-å®ç°" class="headerlink" title="UE5.5 å¢å¼ºè¾“å…¥ç³»ç»Ÿä½¿ç”¨æŒ‡å— (C++ å®ç°)"></a>UE5.5 å¢å¼ºè¾“å…¥ç³»ç»Ÿä½¿ç”¨æŒ‡å— (C++ å®ç°)</h1><p>ä»¥ä¸‹æ˜¯åœ¨ Unreal Engine 5.5 ä¸­ä½¿ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿ(Enhanced Input System)çš„å®Œæ•´ C++ å®ç°æ–¹å¼<br>å…³é”®æ•°æ®ç»“æ„ï¼šè¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡   è¾“å…¥æ˜ å°„</p>
<p>![[Pasted image 20250414102551.png]]</p>
<h2 id="è¾“å…¥æ˜ å°„ä¸­çš„è§¦å‘å™¨å’Œä¿®æ”¹å™¨"><a href="#è¾“å…¥æ˜ å°„ä¸­çš„è§¦å‘å™¨å’Œä¿®æ”¹å™¨" class="headerlink" title="è¾“å…¥æ˜ å°„ä¸­çš„è§¦å‘å™¨å’Œä¿®æ”¹å™¨"></a>è¾“å…¥æ˜ å°„ä¸­çš„è§¦å‘å™¨å’Œä¿®æ”¹å™¨</h2><p>è™šå¹»ä¸­çš„è½´æ˜ å°„ä»¥Xè½´çš„å³æ–¹ä¸ºæ­£æ–¹å‘ï¼</p>
<p>ä¸€æ—¦å¼€å¯&#x3D;&#x3D;æ‹Œåˆè¾“å…¥è½´å€¼&#x3D;&#x3D;ï¼Œåˆ™æ„å‘³ç€å¯ä»¥äº¤æ¢åæ ‡è½´çš„ä½ç½®<br>YXZæ„å‘³ç€äº¤æ¢Xä¸Yè½´çš„ä½ç½®ï¼Œäº¤æ¢åç›¸å½“äºåœ¨ä½¿ç”¨Yè½´çš„æ­£æ–¹å‘  æ¯”å¦‚Wé”®å‰è¿›</p>
<p>![[Pasted image 20250414102006.png]]<br>å› ä¸ºé»˜è®¤æ˜¯Xçš„å³æ–¹æ˜¯æ­£æ–¹å‘ï¼Œæ‰€ä»¥åªéœ€è¦å¦å®šXè½´å°±æ˜¯åæ–¹å‘</p>
<h1 id="å¢å¼ºè¾“å…¥ç»„ä»¶"><a href="#å¢å¼ºè¾“å…¥ç»„ä»¶" class="headerlink" title="å¢å¼ºè¾“å…¥ç»„ä»¶"></a>å¢å¼ºè¾“å…¥ç»„ä»¶</h1><h3 id="â€‹â€‹-ä»€ä¹ˆæ˜¯å¢å¼ºè¾“å…¥ç»„ä»¶ï¼Ÿâ€‹â€‹"><a href="#â€‹â€‹-ä»€ä¹ˆæ˜¯å¢å¼ºè¾“å…¥ç»„ä»¶ï¼Ÿâ€‹â€‹" class="headerlink" title="â€‹â€‹ ä»€ä¹ˆæ˜¯å¢å¼ºè¾“å…¥ç»„ä»¶ï¼Ÿâ€‹â€‹"></a>â€‹<strong>â€‹ ä»€ä¹ˆæ˜¯å¢å¼ºè¾“å…¥ç»„ä»¶ï¼Ÿâ€‹</strong>â€‹</h3><p>å¢å¼ºè¾“å…¥ç»„ä»¶æ˜¯è™šå¹»å¼•æ“ä¸­ç”¨äºå¤„ç†ç©å®¶è¾“å…¥çš„ç»„ä»¶ï¼Œå±äº â€‹<strong>â€‹å¢å¼ºè¾“å…¥ç³»ç»Ÿâ€‹</strong>â€‹ çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå–ä»£äº†ä¼ ç»Ÿçš„è¾“å…¥ç³»ç»Ÿï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚è¾“å…¥åŠ¨ä½œï¼ˆInput Actionsï¼‰ã€è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput Mapping Contextsï¼‰ã€ä¿®é¥°å™¨ï¼ˆModifiersï¼‰ç­‰ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ›´çµæ´»åœ°å®šä¹‰å’Œç®¡ç†è¾“å…¥é€»è¾‘ã€‚</p>
<h2 id="å¢å¼ºè¾“å…¥ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µâ€‹â€‹"><a href="#å¢å¼ºè¾“å…¥ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µâ€‹â€‹" class="headerlink" title=". å¢å¼ºè¾“å…¥ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µâ€‹â€‹"></a><strong>. å¢å¼ºè¾“å…¥ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µâ€‹</strong>â€‹</h2><h3 id="â€‹â€‹è¾“å…¥åŠ¨ä½œï¼ˆInput-Actionsï¼‰â€‹â€‹"><a href="#â€‹â€‹è¾“å…¥åŠ¨ä½œï¼ˆInput-Actionsï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹è¾“å…¥åŠ¨ä½œï¼ˆInput Actionsï¼‰â€‹â€‹"></a>â€‹<strong>â€‹è¾“å…¥åŠ¨ä½œï¼ˆInput Actionsï¼‰â€‹</strong>â€‹</h3><ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šè¾“å…¥åŠ¨ä½œä»£è¡¨å…·ä½“çš„æ“ä½œï¼Œå¦‚â€œè·³è·ƒâ€ã€â€œæ”»å‡»â€ã€â€œç§»åŠ¨â€ç­‰ã€‚</li>
<li>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹ï¼šç”¨äºç»‘å®šå…·ä½“çš„æ¸¸æˆé€»è¾‘ï¼Œä¾¿äºåœ¨ä¸åŒåœºæ™¯ä¸­å¤ç”¨å’Œè°ƒæ•´ã€‚</li>
</ul>
<h3 id="â€‹-è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput-Mapping-Contextsï¼‰â€‹-â€‹"><a href="#â€‹-è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput-Mapping-Contextsï¼‰â€‹-â€‹" class="headerlink" title="â€‹ è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput Mapping Contextsï¼‰â€‹**â€‹"></a>â€‹ è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡ï¼ˆInput Mapping Contextsï¼‰â€‹**â€‹</h3><ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šè¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡å°†ç‰©ç†è¾“å…¥ï¼ˆå¦‚é”®ç›˜æŒ‰é”®ã€é¼ æ ‡æŒ‰é’®ã€æ‰‹æŸ„æŒ‰é”®ï¼‰æ˜ å°„åˆ°è¾“å…¥åŠ¨ä½œã€‚</li>
<li>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹ï¼šå…è®¸ä¸ºä¸åŒçš„ç©å®¶é…ç½®ã€è®¾å¤‡æˆ–åœºæ™¯è®¾ç½®ä¸åŒçš„è¾“å…¥æ˜ å°„ï¼Œå¢å¼ºé¡¹ç›®çš„é€‚åº”æ€§ã€‚</li>
</ul>
<h3 id="â€‹â€‹-ä¿®é¥°å™¨ï¼ˆModifiersï¼‰â€‹â€‹"><a href="#â€‹â€‹-ä¿®é¥°å™¨ï¼ˆModifiersï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹ ä¿®é¥°å™¨ï¼ˆModifiersï¼‰â€‹â€‹"></a>â€‹<strong>â€‹ ä¿®é¥°å™¨ï¼ˆModifiersï¼‰â€‹</strong>â€‹</h3><ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šä¿®é¥°å™¨ç”¨äºä¿®æ”¹è¾“å…¥è¡Œä¸ºï¼Œå¦‚æŒ‰ä½æ—¶é—´ã€åŒå‡»æ£€æµ‹ã€è¾“å…¥åè½¬ç­‰ã€‚</li>
<li>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹ï¼šå¢å¼ºè¾“å…¥çš„çµæ´»æ€§ï¼Œå®ç°å¤æ‚çš„è¾“å…¥é€»è¾‘ã€‚</li>
</ul>
<h3 id="â€‹â€‹-è¾“å…¥å­ç³»ç»Ÿï¼ˆInput-Subsystemï¼‰â€‹â€‹"><a href="#â€‹â€‹-è¾“å…¥å­ç³»ç»Ÿï¼ˆInput-Subsystemï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹ è¾“å…¥å­ç³»ç»Ÿï¼ˆInput Subsystemï¼‰â€‹â€‹"></a>â€‹<strong>â€‹ è¾“å…¥å­ç³»ç»Ÿï¼ˆInput Subsystemï¼‰â€‹</strong>â€‹</h3><ul>
<li>â€‹<strong>â€‹å®šä¹‰â€‹</strong>â€‹ï¼šç®¡ç†æ‰€æœ‰è¾“å…¥ç»„ä»¶å’Œæ˜ å°„ä¸Šä¸‹æ–‡ï¼Œè´Ÿè´£å¤„ç†è¾“å…¥äº‹ä»¶çš„åˆ†å‘å’Œå¤„ç†ã€‚</li>
<li>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹ï¼šç¡®ä¿è¾“å…¥ç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œå’Œç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<h3 id="â€‹â€‹-å¢å¼ºè¾“å…¥ç»„ä»¶çš„ä¼˜åŠ¿â€‹â€‹"><a href="#â€‹â€‹-å¢å¼ºè¾“å…¥ç»„ä»¶çš„ä¼˜åŠ¿â€‹â€‹" class="headerlink" title="â€‹â€‹ å¢å¼ºè¾“å…¥ç»„ä»¶çš„ä¼˜åŠ¿â€‹â€‹"></a>â€‹<strong>â€‹ å¢å¼ºè¾“å…¥ç»„ä»¶çš„ä¼˜åŠ¿â€‹</strong>â€‹</h3><ul>
<li>â€‹<strong>â€‹æ¨¡å—åŒ–è®¾è®¡â€‹</strong>â€‹ï¼šé€šè¿‡è¾“å…¥åŠ¨ä½œå’Œæ˜ å°„ä¸Šä¸‹æ–‡åˆ†ç¦»è¾“å…¥é€»è¾‘ä¸å…·ä½“å®ç°ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚</li>
<li>â€‹<strong>â€‹çµæ´»æ€§é«˜â€‹</strong>â€‹ï¼šæ”¯æŒå¤šç§è¾“å…¥è®¾å¤‡ï¼ˆé”®ç›˜ã€é¼ æ ‡ã€æ‰‹æŸ„ç­‰ï¼‰ï¼Œå¹¶å…è®¸åŠ¨æ€åˆ‡æ¢å’Œç»„åˆè¾“å…¥æ–¹å¼ã€‚</li>
<li>â€‹<strong>â€‹ä¸°å¯Œçš„åŠŸèƒ½â€‹</strong>â€‹ï¼šæ”¯æŒè¾“å…¥ä¿®é¥°å™¨ï¼ˆå¦‚ç»„åˆé”®ã€æŒ‰ä½æ—¶é—´ç­‰ï¼‰ã€è½´æ˜ å°„ï¼ˆAxis Mappingsï¼‰å’ŒåŠ¨ä½œæ˜ å°„ï¼ˆAction Mappingsï¼‰ï¼Œæ»¡è¶³å¤æ‚è¾“å…¥éœ€æ±‚ã€‚</li>
<li>â€‹<strong>â€‹æ˜“äºæ‰©å±•â€‹</strong>â€‹ï¼šä¾¿äºé›†æˆè‡ªå®šä¹‰é€»è¾‘ï¼Œé€‚åº”ä¸åŒé¡¹ç›®å’Œå¹³å°çš„éœ€æ±‚ã€‚</li>
</ul>
<h2 id="1-åŸºæœ¬è®¾ç½®"><a href="#1-åŸºæœ¬è®¾ç½®" class="headerlink" title="1. åŸºæœ¬è®¾ç½®"></a>1. åŸºæœ¬è®¾ç½®</h2><h3 id="1-1-å¯ç”¨å¢å¼ºè¾“å…¥æ¨¡å—"><a href="#1-1-å¯ç”¨å¢å¼ºè¾“å…¥æ¨¡å—" class="headerlink" title="1.1 å¯ç”¨å¢å¼ºè¾“å…¥æ¨¡å—"></a>1.1 å¯ç”¨å¢å¼ºè¾“å…¥æ¨¡å—</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆåœ¨é¡¹ç›®çš„Â `Build.cs`Â æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</span><br><span class="line">PublicDependencyModuleNames.<span class="built_in">AddRange</span>(<span class="keyword">new</span> string[] &#123; </span><br><span class="line">    <span class="string">&quot;Core&quot;</span>, </span><br><span class="line">    <span class="string">&quot;CoreUObject&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Engine&quot;</span>, </span><br><span class="line">    <span class="string">&quot;InputCore&quot;</span>, </span><br><span class="line">    <span class="string">&quot;EnhancedInput&quot;</span> </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="1-2-åˆ›å»ºè¾“å…¥åŠ¨ä½œ-Input-Actions"><a href="#1-2-åˆ›å»ºè¾“å…¥åŠ¨ä½œ-Input-Actions" class="headerlink" title="1.2 åˆ›å»ºè¾“å…¥åŠ¨ä½œ(Input Actions)"></a>1.2 åˆ›å»ºè¾“å…¥åŠ¨ä½œ(Input Actions)</h3><p>åœ¨å†…å®¹æµè§ˆå™¨ä¸­å³é”®åˆ›å»ºÂ <code>Input Actions</code>Â èµ„æºï¼š</p>
<ul>
<li><p><code>IA_Jump</code></p>
</li>
<li><p><code>IA_Move</code></p>
</li>
<li><p><code>IA_Look</code></p>
</li>
<li><p><code>IA_Fire</code></p>
</li>
</ul>
<h2 id="2-C-åˆ©ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿå®ç°è¾“å…¥æ˜ å°„"><a href="#2-C-åˆ©ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿå®ç°è¾“å…¥æ˜ å°„" class="headerlink" title="2. C++ åˆ©ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿå®ç°è¾“å…¥æ˜ å°„"></a>2. C++ åˆ©ç”¨å¢å¼ºè¾“å…¥ç³»ç»Ÿå®ç°è¾“å…¥æ˜ å°„</h2><h3 id="2-1-ç©å®¶æ§åˆ¶å™¨å¤´æ–‡ä»¶-MyPlayerController-h"><a href="#2-1-ç©å®¶æ§åˆ¶å™¨å¤´æ–‡ä»¶-MyPlayerController-h" class="headerlink" title="2.1 ç©å®¶æ§åˆ¶å™¨å¤´æ–‡ä»¶ (MyPlayerController.h)"></a>2.1 ç©å®¶æ§åˆ¶å™¨å¤´æ–‡ä»¶ (MyPlayerController.h)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/PlayerController.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;InputActionValue.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyPlayerController.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UInputMappingContext</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UInputAction</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MYPROJECT_API</span> AMyPlayerController : <span class="keyword">public</span> APlayerController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">SetupInputComponent</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å…¥æ˜ å°„ä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">    UInputMappingContext* DefaultMappingContext;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å…¥åŠ¨ä½œ</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">    UInputAction* JumpAction;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">    UInputAction* MoveAction;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">    UInputAction* LookAction;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadOnly, Category = <span class="string">&quot;Input&quot;</span>)</span><br><span class="line">    UInputAction* FireAction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// è¾“å…¥å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">OnJump</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">OnMove</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">OnLook</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">OnFire</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-ç©å®¶æ§åˆ¶å™¨å®ç°æ–‡ä»¶-MyPlayerController-cpp"><a href="#2-2-ç©å®¶æ§åˆ¶å™¨å®ç°æ–‡ä»¶-MyPlayerController-cpp" class="headerlink" title="2.2 ç©å®¶æ§åˆ¶å™¨å®ç°æ–‡ä»¶ (MyPlayerController.cpp)"></a>2.2 ç©å®¶æ§åˆ¶å™¨å®ç°æ–‡ä»¶ (MyPlayerController.cpp)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyPlayerController.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EnhancedInputComponent.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;EnhancedInputSubsystems.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æœ¬åœ°ç©å®¶å¢å¼ºè¾“å…¥å­ç³»ç»Ÿå¹¶æ·»åŠ æ˜ å°„ä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">if</span> (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::<span class="built_in">GetSubsystem</span>&lt;UEnhancedInputLocalPlayerSubsystem&gt;(<span class="built_in">GetLocalPlayer</span>()))</span><br><span class="line">    &#123;</span><br><span class="line">        Subsystem-&gt;<span class="built_in">AddMappingContext</span>(DefaultMappingContext, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::SetupInputComponent</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">SetupInputComponent</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å¢å¼ºè¾“å…¥ç»„ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (UEnhancedInputComponent* EnhancedInputComponent = <span class="built_in">CastChecked</span>&lt;UEnhancedInputComponent&gt;(InputComponent))</span><br><span class="line">    &#123;</span><br><span class="line">        EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(JumpAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;AMyPlayerController::OnJump);</span><br><span class="line">        EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(MoveAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;AMyPlayerController::OnMove);</span><br><span class="line">        EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(LookAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;AMyPlayerController::OnLook);</span><br><span class="line">        EnhancedInputComponent-&gt;<span class="built_in">BindAction</span>(FireAction, ETriggerEvent::Triggered, <span class="keyword">this</span>, &amp;AMyPlayerController::OnFire);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::OnJump</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ACharacter* Character = <span class="built_in">GetCharacter</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        Character-&gt;<span class="built_in">Jump</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::OnMove</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> FVector2D MovementVector = Value.<span class="built_in">Get</span>&lt;FVector2D&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ACharacter* Character = <span class="built_in">GetCharacter</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">const</span> FRotator Rotation = <span class="built_in">GetControlRotation</span>();</span><br><span class="line">        <span class="function"><span class="type">const</span> FRotator <span class="title">YawRotation</span><span class="params">(<span class="number">0</span>, Rotation.Yaw, <span class="number">0</span>)</span></span>;</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> FVector ForwardDirection = <span class="built_in">FRotationMatrix</span>(YawRotation).<span class="built_in">GetUnitAxis</span>(EAxis::X);</span><br><span class="line">        <span class="type">const</span> FVector RightDirection = <span class="built_in">FRotationMatrix</span>(YawRotation).<span class="built_in">GetUnitAxis</span>(EAxis::Y);</span><br><span class="line">        </span><br><span class="line">        Character-&gt;<span class="built_in">AddMovementInput</span>(ForwardDirection, MovementVector.Y);</span><br><span class="line">        Character-&gt;<span class="built_in">AddMovementInput</span>(RightDirection, MovementVector.X);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::OnLook</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> FVector2D LookAxisVector = Value.<span class="built_in">Get</span>&lt;FVector2D&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">IsLookInputIgnored</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">AddYawInput</span>(LookAxisVector.X);</span><br><span class="line">    <span class="built_in">AddPitchInput</span>(LookAxisVector.Y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyPlayerController::OnFire</span><span class="params">(<span class="type">const</span> FInputActionValue&amp; Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å®ç°å°„å‡»é€»è¾‘</span></span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Fire!&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¦‚ä½•è·å–æ§åˆ¶å™¨çš„æ—‹è½¬è§’åº¦å¹¶è½¬æ¢æˆå‘é‡-å¸¸ç”¨"><a href="#å¦‚ä½•è·å–æ§åˆ¶å™¨çš„æ—‹è½¬è§’åº¦å¹¶è½¬æ¢æˆå‘é‡-å¸¸ç”¨" class="headerlink" title="å¦‚ä½•è·å–æ§åˆ¶å™¨çš„æ—‹è½¬è§’åº¦å¹¶è½¬æ¢æˆå‘é‡-å¸¸ç”¨"></a>å¦‚ä½•è·å–æ§åˆ¶å™¨çš„æ—‹è½¬è§’åº¦å¹¶è½¬æ¢æˆå‘é‡-å¸¸ç”¨</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">ABird::Move</span><span class="params">(<span class="type">float</span> Value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;MoveForward&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (Value != <span class="number">0.0f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="comment">//æ ¹æ®æ§åˆ¶å™¨æ—‹è½¬è·å–ç§»åŠ¨æ–¹å‘</span></span><br><span class="line">        FRotator Rotation = <span class="built_in">GetControlRotation</span>();</span><br><span class="line">        <span class="function">FRotator <span class="title">YawRotation</span><span class="params">(<span class="number">0</span>, Rotation.Yaw, <span class="number">0</span>)</span></span>;<span class="comment">//è·å–æ—‹è½¬çš„Yawè§’åº¦</span></span><br><span class="line">        FVector Direction = <span class="built_in">FRotationMatrix</span>(YawRotation).<span class="built_in">GetUnitAxis</span>(EAxis::X);<span class="comment">//é€šè¿‡æ—‹è½¬çŸ©é˜µè·å–æ–¹å‘å‘é‡</span></span><br><span class="line">        <span class="built_in">AddMovementInput</span>(Direction, Value);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;ã€</span><br></pre></td></tr></table></figure>


<h1 id="è™šå¹»æ·»åŠ æ¨¡å—çš„åŠæ³•-å¸¸ç”¨"><a href="#è™šå¹»æ·»åŠ æ¨¡å—çš„åŠæ³•-å¸¸ç”¨" class="headerlink" title="è™šå¹»æ·»åŠ æ¨¡å—çš„åŠæ³•-å¸¸ç”¨"></a>è™šå¹»æ·»åŠ æ¨¡å—çš„åŠæ³•-å¸¸ç”¨</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PublicDependencyModuleNames.<span class="built_in">AddRange</span>(</span><br><span class="line">    <span class="keyword">new</span> string[] &#123;</span><br><span class="line">        <span class="string">&quot;Core&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CoreUObject&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Engine&quot;</span>,</span><br><span class="line">        <span class="string">&quot;GroomComponent&quot;</span>  <span class="comment">// æ·»åŠ æ¯›å‘ç»„ä»¶æ¨¡å—</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="è™šå¹»æšä¸¾"><a href="#è™šå¹»æšä¸¾" class="headerlink" title="è™šå¹»æšä¸¾"></a>è™šå¹»æšä¸¾</h1><p>![[Pasted image 20250412151930.png]]<br>åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼Œç®€ç§°UEï¼‰ä¸­ï¼Œâ€‹<strong>â€‹æšä¸¾ï¼ˆEnumï¼‰â€‹</strong>â€‹æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå®šä¹‰ä¸€ç»„å‘½åçš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé¿å…ä½¿ç”¨é­”æ³•æ•°å­—ï¼ˆmagic numbersï¼‰ï¼Œå¹¶ç®€åŒ–é€»è¾‘åˆ¤æ–­ã€‚ä»¥ä¸‹æ˜¯å…³äºè™šå¹»å¼•æ“ä¸­æšä¸¾çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬å…¶å®šä¹‰ã€ä½¿ç”¨æ–¹æ³•ã€ç±»å‹ä»¥åŠåœ¨è“å›¾å’ŒC++ä¸­çš„å…·ä½“åº”ç”¨ã€‚</p>
<hr>
<h2 id="â€‹â€‹1-æšä¸¾çš„åŸºæœ¬æ¦‚å¿µâ€‹â€‹"><a href="#â€‹â€‹1-æšä¸¾çš„åŸºæœ¬æ¦‚å¿µâ€‹â€‹" class="headerlink" title="â€‹â€‹1. æšä¸¾çš„åŸºæœ¬æ¦‚å¿µâ€‹â€‹"></a>â€‹<strong>â€‹1. æšä¸¾çš„åŸºæœ¬æ¦‚å¿µâ€‹</strong>â€‹</h2><p>â€‹<strong>â€‹æšä¸¾â€‹</strong>â€‹ï¼ˆEnumerationï¼‰æ˜¯ä¸€ç§ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå®ƒåŒ…å«äº†ä¸€ç»„å‘½åçš„æ•´æ•°å¸¸é‡ã€‚é€šè¿‡æšä¸¾ï¼Œå¯ä»¥ä¸ºè¿™äº›å¸¸é‡èµ‹äºˆæœ‰æ„ä¹‰çš„åå­—ï¼Œä½¿ä»£ç æ›´åŠ ç›´è§‚å’Œæ˜“äºç†è§£ã€‚<br>â€‹<strong>â€‹ç¤ºä¾‹ï¼šâ€‹</strong>â€‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum class</span> <span class="title class_">EWeekDays</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">    Monday,</span><br><span class="line">    Tuesday,</span><br><span class="line">    Wednesday,</span><br><span class="line">    Thursday,</span><br><span class="line">    Friday,</span><br><span class="line">    Saturday,</span><br><span class="line">    Sunday</span><br><span class="line">`</span><br><span class="line">åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ`EWeekDays` æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼ŒåŒ…å«äº†ä¸€å‘¨çš„ä¸ƒå¤©ã€‚æ¯ä¸ªæšä¸¾å€¼ï¼ˆå¦‚ `Monday`ã€`Tuesday` ç­‰ï¼‰éƒ½å¯¹åº”ä¸€ä¸ªæ•´æ•°å€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ä»<span class="number">0</span>å¼€å§‹é€’å¢ã€‚</span><br><span class="line">---</span><br><span class="line">è™šå¹»å¼•æ“æ”¯æŒä¸¤ç§ä¸»è¦çš„æšä¸¾ç±»å‹ï¼š</span><br><span class="line"></span><br><span class="line">åœ¨C++ä¸­å®šä¹‰æšä¸¾æ—¶ï¼Œæ¨èä½¿ç”¨ `<span class="keyword">enum</span> <span class="title class_">class</span>`ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œä½œç”¨åŸŸæ§åˆ¶ã€‚</span><br><span class="line">â€‹**â€‹å®šä¹‰æšä¸¾ï¼šâ€‹**â€‹</span><br><span class="line">```<span class="function">cpp</span></span><br><span class="line"><span class="function"><span class="title">UENUM</span><span class="params">(BlueprintType)</span></span></span><br><span class="line"><span class="function"><span class="keyword">enum</span> <span class="keyword">class</span> ECharacterClass : uint8</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="function">GUARDIAN <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Guardian&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    WARRIOR  <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Warrior&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    MAGE     <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Mage&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    ROGUE    <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Rogue&quot;</span>)</span></span></span><br><span class="line"><span class="function">&#125;</span>;</span><br></pre></td></tr></table></figure>

<p>â€‹<strong>â€‹è¯´æ˜ï¼šâ€‹</strong>â€‹</p>
<ul>
<li><code>UENUM(BlueprintType)</code>Â å®ç”¨äºå°†æšä¸¾æš´éœ²ç»™è“å›¾ç³»ç»Ÿï¼Œä½¿å…¶åœ¨è“å›¾ä¸­å¯ç”¨ã€‚</li>
<li><code>UMETA(DisplayName = &quot;Guardian&quot;)</code>Â æä¾›äº†æšä¸¾ç¼–è¾‘å™¨ä¸­çš„æ˜¾ç¤ºåç§°ï¼Œå¢å¼ºå¯è¯»æ€§ã€‚</li>
<li>ä½¿ç”¨Â <code>enum class</code>Â è€Œä¸æ˜¯ä¼ ç»Ÿçš„Â <code>enum</code>ï¼Œä»¥é¿å…å‘½åå†²çªå’Œç±»å‹éšå¼è½¬æ¢çš„é—®é¢˜ã€‚</li>
</ul>
<h3 id="â€‹â€‹2-2-è“å›¾æšä¸¾ï¼ˆBlueprint-Enumï¼‰â€‹â€‹"><a href="#â€‹â€‹2-2-è“å›¾æšä¸¾ï¼ˆBlueprint-Enumï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹2.2 è“å›¾æšä¸¾ï¼ˆBlueprint Enumï¼‰â€‹â€‹"></a>â€‹<strong>â€‹2.2 è“å›¾æšä¸¾ï¼ˆBlueprint Enumï¼‰â€‹</strong>â€‹</h3><p>è“å›¾æšä¸¾æ˜¯ä¸“é—¨åœ¨è“å›¾ä¸­åˆ›å»ºå’Œä½¿ç”¨çš„æšä¸¾ç±»å‹ï¼Œé€‚ç”¨äºä¸éœ€è¦å¤æ‚C++é€»è¾‘çš„åœºæ™¯ã€‚<br>â€‹<strong>â€‹åˆ›å»ºè“å›¾æšä¸¾çš„æ­¥éª¤ï¼šâ€‹</strong>â€‹</p>
<ol>
<li>åœ¨å†…å®¹æµè§ˆå™¨ä¸­ï¼Œå³é”®ç‚¹å‡»ç©ºç™½åŒºåŸŸï¼Œé€‰æ‹©Â <code>Blueprint Class</code>ã€‚</li>
<li>åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œé€‰æ‹©Â <code>Enumeration</code>Â ä½œä¸ºçˆ¶ç±»ã€‚</li>
<li>å‘½åå¹¶åˆ›å»ºè“å›¾æšä¸¾ã€‚</li>
<li>åŒå‡»æ‰“å¼€è“å›¾æšä¸¾ï¼Œæ·»åŠ å’Œå‘½åå„ä¸ªæšä¸¾å€¼ã€‚</li>
</ol>
<h2 id="â€‹â€‹ä¼˜ç‚¹ï¼šâ€‹â€‹-æ˜“äºåœ¨è“å›¾ä¸­åˆ›å»ºå’Œä½¿ç”¨ï¼Œæ— éœ€ç¼–å†™C-ä»£ç ã€‚-é€‚ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œé€»è¾‘ç®€å•çš„é¡¹ç›®ã€‚â€‹â€‹ç¼ºç‚¹ï¼šâ€‹â€‹-åŠŸèƒ½ä¸Šä¸å¦‚C-æšä¸¾çµæ´»ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤æ‚é€»è¾‘æˆ–ä¸å…¶ä»–C-ç³»ç»Ÿé›†æˆæ—¶ã€‚"><a href="#â€‹â€‹ä¼˜ç‚¹ï¼šâ€‹â€‹-æ˜“äºåœ¨è“å›¾ä¸­åˆ›å»ºå’Œä½¿ç”¨ï¼Œæ— éœ€ç¼–å†™C-ä»£ç ã€‚-é€‚ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œé€»è¾‘ç®€å•çš„é¡¹ç›®ã€‚â€‹â€‹ç¼ºç‚¹ï¼šâ€‹â€‹-åŠŸèƒ½ä¸Šä¸å¦‚C-æšä¸¾çµæ´»ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤æ‚é€»è¾‘æˆ–ä¸å…¶ä»–C-ç³»ç»Ÿé›†æˆæ—¶ã€‚" class="headerlink" title="â€‹â€‹ä¼˜ç‚¹ï¼šâ€‹â€‹- æ˜“äºåœ¨è“å›¾ä¸­åˆ›å»ºå’Œä½¿ç”¨ï¼Œæ— éœ€ç¼–å†™C++ä»£ç ã€‚- é€‚ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œé€»è¾‘ç®€å•çš„é¡¹ç›®ã€‚â€‹â€‹ç¼ºç‚¹ï¼šâ€‹â€‹- åŠŸèƒ½ä¸Šä¸å¦‚C++æšä¸¾çµæ´»ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤æ‚é€»è¾‘æˆ–ä¸å…¶ä»–C++ç³»ç»Ÿé›†æˆæ—¶ã€‚"></a>â€‹<strong>â€‹ä¼˜ç‚¹ï¼šâ€‹</strong>â€‹<br>- æ˜“äºåœ¨è“å›¾ä¸­åˆ›å»ºå’Œä½¿ç”¨ï¼Œæ— éœ€ç¼–å†™C++ä»£ç ã€‚<br>- é€‚ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œé€»è¾‘ç®€å•çš„é¡¹ç›®ã€‚<br>â€‹<strong>â€‹ç¼ºç‚¹ï¼šâ€‹</strong>â€‹<br>- åŠŸèƒ½ä¸Šä¸å¦‚C++æšä¸¾çµæ´»ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤æ‚é€»è¾‘æˆ–ä¸å…¶ä»–C++ç³»ç»Ÿé›†æˆæ—¶ã€‚</h2><h2 id="â€‹â€‹3-æšä¸¾çš„ä½¿ç”¨æ–¹æ³•â€‹â€‹"><a href="#â€‹â€‹3-æšä¸¾çš„ä½¿ç”¨æ–¹æ³•â€‹â€‹" class="headerlink" title="â€‹â€‹3. æšä¸¾çš„ä½¿ç”¨æ–¹æ³•â€‹â€‹"></a>â€‹<strong>â€‹3. æšä¸¾çš„ä½¿ç”¨æ–¹æ³•â€‹</strong>â€‹</h2><h3 id="â€‹â€‹3-1-åœ¨C-ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"><a href="#â€‹â€‹3-1-åœ¨C-ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹3.1 åœ¨C++ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹3.1 åœ¨C++ä¸­ä½¿ç”¨æšä¸¾â€‹</strong>â€‹</h3><h4 id="â€‹â€‹å®šä¹‰æšä¸¾å˜é‡â€‹â€‹"><a href="#â€‹â€‹å®šä¹‰æšä¸¾å˜é‡â€‹â€‹" class="headerlink" title="â€‹â€‹å®šä¹‰æšä¸¾å˜é‡â€‹â€‹"></a>â€‹<strong>â€‹å®šä¹‰æšä¸¾å˜é‡â€‹</strong>â€‹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E CharacterClass = ECharacterClass::Warrior;</span><br></pre></td></tr></table></figure>
<h4 id="â€‹â€‹åœ¨å‡½æ•°ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"><a href="#â€‹â€‹åœ¨å‡½æ•°ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹åœ¨å‡½æ•°ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹åœ¨å‡½æ•°ä¸­ä½¿ç”¨æšä¸¾â€‹</strong>â€‹</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::SetCharacterClass</span><span class="params">(ECharacterClass NewClass)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CharacterClass = NewClass;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (CharacterClass)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> ECharacterClass::Guardian:</span><br><span class="line">            <span class="comment">// å®ˆæŠ¤è€…é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterClass::Warrior:</span><br><span class="line">            <span class="comment">// æˆ˜å£«é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterClass::Mage:</span><br><span class="line">            <span class="comment">// æ³•å¸ˆé€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterClass::Rogue:</span><br><span class="line">            <span class="comment">// æ½œè¡Œä¾ é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="â€‹â€‹æšä¸¾ä¸è“å›¾äº¤äº’â€‹â€‹"><a href="#â€‹â€‹æšä¸¾ä¸è“å›¾äº¤äº’â€‹â€‹" class="headerlink" title="â€‹â€‹æšä¸¾ä¸è“å›¾äº¤äº’â€‹â€‹"></a>â€‹<strong>â€‹æšä¸¾ä¸è“å›¾äº¤äº’â€‹</strong>â€‹</h4><p>é€šè¿‡Â <code>UENUM(BlueprintType)</code>Â å®ï¼Œå¯ä»¥åœ¨è“å›¾ä¸­è®¿é—®å’Œä¿®æ”¹C++ä¸­å®šä¹‰çš„æšä¸¾å˜é‡ã€‚</p>
<p>â€‹<strong>â€‹ç¤ºä¾‹ï¼šåœ¨è“å›¾ä¸­è®¾ç½®è§’è‰²çš„èŒä¸šâ€‹</strong>â€‹</p>
<ol>
<li><p>åœ¨è§’è‰²ç±»ä¸­å®šä¹‰ä¸€ä¸ªå…¬å¼€çš„æšä¸¾å˜é‡ï¼š</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;Character&quot;</span>)</span><br><span class="line">ECharacterClass CharacterClass;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨è“å›¾ä¸­ï¼Œå¯ä»¥é€šè¿‡ç»†èŠ‚é¢æ¿ç›´æ¥é€‰æ‹©æˆ–é€šè¿‡èŠ‚ç‚¹ä¿®æ”¹Â <code>CharacterClass</code>Â çš„å€¼ã€‚</p>
</li>
</ol>
<h3 id="â€‹â€‹3-2-åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"><a href="#â€‹â€‹3-2-åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹3.2 åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹3.2 åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹</strong>â€‹</h3><h4 id="â€‹â€‹åˆ›å»ºå’Œä½¿ç”¨è“å›¾æšä¸¾â€‹â€‹"><a href="#â€‹â€‹åˆ›å»ºå’Œä½¿ç”¨è“å›¾æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹åˆ›å»ºå’Œä½¿ç”¨è“å›¾æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹åˆ›å»ºå’Œä½¿ç”¨è“å›¾æšä¸¾â€‹</strong>â€‹</h4><ol>
<li>â€‹<strong>â€‹åˆ›å»ºè“å›¾æšä¸¾â€‹</strong>â€‹ï¼š<ul>
<li>æŒ‰ç…§å‰è¿°æ­¥éª¤åœ¨å†…å®¹æµè§ˆå™¨ä¸­åˆ›å»ºä¸€ä¸ªè“å›¾æšä¸¾ï¼Œä¾‹å¦‚Â <code>EBP_WeaponType</code>ï¼ŒåŒ…å«Â <code>Pistol</code>ã€<code>Rifle</code>ã€<code>Shotgun</code>Â ç­‰æšä¸¾å€¼ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾å˜é‡â€‹</strong>â€‹ï¼š<ul>
<li>åœ¨è“å›¾ä¸­æ·»åŠ ä¸€ä¸ªæšä¸¾ç±»å‹çš„å˜é‡ï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„Â <code>EBP_WeaponType</code>ã€‚</li>
<li>ä½¿ç”¨ â€‹<strong>â€‹Switch on Enumâ€‹</strong>â€‹ èŠ‚ç‚¹æ ¹æ®æšä¸¾å€¼æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚<br>â€‹<strong>â€‹ç¤ºä¾‹ï¼šæ ¹æ®æ­¦å™¨ç±»å‹æ’­æ”¾ä¸åŒçš„å£°éŸ³â€‹</strong>â€‹</li>
</ul>
</li>
<li>æ·»åŠ ä¸€ä¸ªÂ <code>_WeaponType</code>Â ç±»å‹çš„å˜é‡Â <code>CurrentWeapon</code>ã€‚</li>
<li>ä½¿ç”¨ â€‹<strong>â€‹Switch on Enumâ€‹</strong>â€‹ èŠ‚ç‚¹ï¼Œè¾“å…¥Â <code>CurrentWeapon</code>ã€‚</li>
<li>ä¸ºæ¯ä¸ªæšä¸¾å€¼ï¼ˆå¦‚Â <code>Pistol</code>ã€<code>Rifle</code>ã€<code>Shotgun</code>ï¼‰æ·»åŠ å¯¹åº”çš„åˆ†æ”¯ï¼Œå¹¶è¿æ¥æ’­æ”¾ç›¸åº”å£°éŸ³çš„èŠ‚ç‚¹ã€‚</li>
</ol>
<hr>
<h2 id="â€‹â€‹4-æšä¸¾çš„é«˜çº§ç”¨æ³•â€‹â€‹"><a href="#â€‹â€‹4-æšä¸¾çš„é«˜çº§ç”¨æ³•â€‹â€‹" class="headerlink" title="â€‹â€‹4. æšä¸¾çš„é«˜çº§ç”¨æ³•â€‹â€‹"></a>â€‹<strong>â€‹4. æšä¸¾çš„é«˜çº§ç”¨æ³•â€‹</strong>â€‹</h2><h3 id="â€‹â€‹4-1-æšä¸¾ä¸ä½æ©ç ï¼ˆBitmaskï¼‰â€‹â€‹"><a href="#â€‹â€‹4-1-æšä¸¾ä¸ä½æ©ç ï¼ˆBitmaskï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹4.1 æšä¸¾ä¸ä½æ©ç ï¼ˆBitmaskï¼‰â€‹â€‹"></a>â€‹<strong>â€‹4.1 æšä¸¾ä¸ä½æ©ç ï¼ˆBitmaskï¼‰â€‹</strong>â€‹</h3><p>æœ‰æ—¶éœ€è¦å°†å¤šä¸ªæšä¸¾å€¼ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ä½æ©ç ã€‚è™šå¹»å¼•æ“æ”¯æŒé€šè¿‡è®¾ç½®Â <code>Meta</code>Â å‚æ•°æ¥å¯ç”¨ä½æ©ç åŠŸèƒ½ã€‚<br>â€‹<strong>â€‹å®šä¹‰ä½æ©ç æšä¸¾ï¼šâ€‹</strong>â€‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UENUM</span>(BlueprintType)</span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">EPermissions</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">    None        = <span class="number">0</span> <span class="built_in">UMETA</span>(DisplayName = <span class="string">&quot;None&quot;</span>),</span><br><span class="line">    Read        = <span class="number">1</span> &lt;&lt; <span class="number">0</span> <span class="built_in">UMETA</span>(DisplayName = <span class="string">&quot;Read&quot;</span>),</span><br><span class="line">    Write       = <span class="number">1</span> &lt;&lt; <span class="number">1</span> <span class="built_in">UMETA</span>(DisplayName = <span class="string">&quot;Write&quot;</span>),</span><br><span class="line">    Execute     = <span class="number">1</span> &lt;&lt; <span class="number">2</span> <span class="built_in">UMETA</span>(DisplayName = <span class="string">&quot;Execute&quot;</span>),</span><br><span class="line">    All         = Read | Write | Execute <span class="built_in">UMETA</span>(DisplayName = <span class="string">&quot;All&quot;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>â€‹<strong>â€‹ä½¿ç”¨ä½æ©ç æšä¸¾ï¼šâ€‹</strong>â€‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">EPermissions UserPermissions = EPermissions::Read | EPermissions::Write;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (UserPermissions &amp; EPermissions::Read)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç”¨æˆ·æœ‰è¯»å–æƒé™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((UserPermissions &amp; EPermissions::All) == EPermissions::All)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹<strong>â€‹è¯´æ˜ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>ä½¿ç”¨ä½ç§»è¿ç®—ç¬¦Â <code>&lt;&lt;</code>Â å®šä¹‰æ¯ä¸ªæƒé™çš„ç‹¬ç«‹ä½ã€‚</li>
<li>ä½¿ç”¨æŒ‰ä½ä¸Â <code>&amp;</code>Â å’ŒæŒ‰ä½æˆ–Â <code>|</code>Â è¿ç®—ç¬¦è¿›è¡Œæƒé™çš„ç»„åˆå’Œæ£€æŸ¥ã€‚</li>
</ul>
<h3 id="â€‹â€‹4-2-æšä¸¾å‚æ•°â€‹â€‹"><a href="#â€‹â€‹4-2-æšä¸¾å‚æ•°â€‹â€‹" class="headerlink" title="â€‹â€‹4.2 æšä¸¾å‚æ•°â€‹â€‹"></a>â€‹<strong>â€‹4.2 æšä¸¾å‚æ•°â€‹</strong>â€‹</h3><p>æšä¸¾å¸¸ç”¨äºå‡½æ•°å‚æ•°ï¼Œä»¥å¢å¼ºå‡½æ•°çš„çµæ´»æ€§å’Œå¯è¯»æ€§ã€‚<br>â€‹<strong>â€‹ç¤ºä¾‹ï¼šâ€‹</strong>â€‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Combat&quot;</span>)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PerformAttack</span><span class="params">(EAttackType AttackType)</span></span>;</span><br></pre></td></tr></table></figure>

<p>â€‹<strong>â€‹è°ƒç”¨æ–¹å¼ï¼šâ€‹</strong>â€‹<br>åœ¨è“å›¾ä¸­è°ƒç”¨Â <code>PerformAttack</code>Â å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ‹‰èœå•é€‰æ‹©å…·ä½“çš„æ”»å‡»ç±»å‹ï¼ˆå¦‚Â <code>Melee</code>ã€<code>Ranged</code>ã€<code>Magic</code>ï¼‰ï¼Œæ— éœ€è®°ä½å…·ä½“çš„æ•°å€¼ã€‚</p>
<h3 id="â€‹â€‹4-3-æšä¸¾ä¸æ•°æ®è¡¨ï¼ˆData-Tablesï¼‰â€‹â€‹"><a href="#â€‹â€‹4-3-æšä¸¾ä¸æ•°æ®è¡¨ï¼ˆData-Tablesï¼‰â€‹â€‹" class="headerlink" title="â€‹â€‹4.3 æšä¸¾ä¸æ•°æ®è¡¨ï¼ˆData Tablesï¼‰â€‹â€‹"></a>â€‹<strong>â€‹4.3 æšä¸¾ä¸æ•°æ®è¡¨ï¼ˆData Tablesï¼‰â€‹</strong>â€‹</h3><p>æšä¸¾å¯ä»¥ä¸æ•°æ®è¡¨ç»“åˆä½¿ç”¨ï¼Œæ•°æ®é©±åŠ¨çš„è®¾è®¡ä¸­ç®¡ç†å¤§é‡ç›¸å…³æ•°æ®ã€‚</p>
<p>â€‹<strong>â€‹æ­¥éª¤ï¼šâ€‹</strong>â€‹</p>
<ol>
<li>å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œè¡¨ç¤ºä¸åŒçš„æ•°æ®ç±»åˆ«ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«è¯¥æšä¸¾ä½œä¸ºæˆå‘˜å˜é‡ã€‚</li>
<li>åœ¨ç¼–è¾‘å™¨ä¸­åˆ›å»ºå¹¶å¡«å……æ•°æ®è¡¨ï¼Œä½¿ç”¨è¯¥ç»“æ„ä½“ä½œä¸ºè¡Œç±»å‹ã€‚</li>
<li>åœ¨ä»£ç æˆ–è“å›¾ä¸­è¯»å–æ•°æ®è¡¨ï¼Œå¹¶æ ¹æ®æšä¸¾å€¼å¤„ç†ç›¸åº”çš„æ•°æ®ã€‚</li>
</ol>
<p>â€‹<strong>â€‹ç¤ºä¾‹ï¼šâ€‹</strong>â€‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">USTRUCT</span>(BlueprintType)</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FWeaponData</span> : <span class="keyword">public</span> FTableRowBase</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class="line">    EWeaponType WeaponType;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class="line">    <span class="type">float</span> Damage;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite)</span><br><span class="line">    <span class="type">float</span> Range;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="â€‹â€‹5-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆâ€‹â€‹"><a href="#â€‹â€‹5-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆâ€‹â€‹" class="headerlink" title="â€‹â€‹5. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆâ€‹â€‹"></a>â€‹<strong>â€‹5. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆâ€‹</strong>â€‹</h2><h3 id="â€‹â€‹5-1-æšä¸¾å€¼åœ¨è“å›¾ä¸­ä¸æ˜¾ç¤ºâ€‹â€‹"><a href="#â€‹â€‹5-1-æšä¸¾å€¼åœ¨è“å›¾ä¸­ä¸æ˜¾ç¤ºâ€‹â€‹" class="headerlink" title="â€‹â€‹5.1 æšä¸¾å€¼åœ¨è“å›¾ä¸­ä¸æ˜¾ç¤ºâ€‹â€‹"></a>â€‹<strong>â€‹5.1 æšä¸¾å€¼åœ¨è“å›¾ä¸­ä¸æ˜¾ç¤ºâ€‹</strong>â€‹</h3><p>â€‹<strong>â€‹åŸå› ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>æšä¸¾æœªæ­£ç¡®æš´éœ²ç»™è“å›¾ï¼Œæˆ–è€…ç¼ºå°‘å¿…è¦çš„å…ƒæ•°æ®ã€‚</li>
</ul>
<p>â€‹<strong>â€‹è§£å†³æ–¹æ³•ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>ç¡®ä¿åœ¨C++ä¸­ä½¿ç”¨Â <code>UENUM(BlueprintType)</code>Â å®å®šä¹‰æšä¸¾ã€‚</li>
<li>æ£€æŸ¥æšä¸¾å€¼æ˜¯å¦æ­£ç¡®æ·»åŠ äº†Â <code>UMName)</code>ï¼Œä»¥å¢å¼ºåœ¨è“å›¾ä¸­çš„å¯è¯»æ€§ã€‚</li>
</ul>
<h3 id="â€‹â€‹5-2-æšä¸¾å€¼åœ¨ä¸åŒå¹³å°ä¸Šçš„å…¼å®¹æ€§â€‹â€‹"><a href="#â€‹â€‹5-2-æšä¸¾å€¼åœ¨ä¸åŒå¹³å°ä¸Šçš„å…¼å®¹æ€§â€‹â€‹" class="headerlink" title="â€‹â€‹5.2 æšä¸¾å€¼åœ¨ä¸åŒå¹³å°ä¸Šçš„å…¼å®¹æ€§â€‹â€‹"></a>â€‹<strong>â€‹5.2 æšä¸¾å€¼åœ¨ä¸åŒå¹³å°ä¸Šçš„å…¼å®¹æ€§â€‹</strong>â€‹</h3><p>â€‹<strong>â€‹åŸå› ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>ä¸åŒå¹³å°å¯¹æšä¸¾å¤§å°çš„é»˜è®¤å¤„ç†å¯èƒ½ä¸åŒï¼Œå¯¼è‡´è·¨å¹³å°æ•°æ®ä¼ è¾“æ—¶å‡ºç°é—®é¢˜ã€‚</li>
</ul>
<p>â€‹<strong>â€‹è§£å†³æ–¹æ³•ï¼šâ€‹</strong>â€‹</p>
<ul>
<li><p>æ˜ç¡®å®šä¹‰æšä¸¾çš„åŸºç¡€ç±»å‹ï¼Œå¦‚Â <code>uint8</code>ï¼Œä»¥ç¡®ä¿åœ¨æ‰€æœ‰å¹³å°ä¸Šçš„ä¸€è‡´æ€§ã€‚</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UENUM</span>(BlueprintType)</span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">EExampleEnum</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">    Value1,</span><br><span class="line">    Value2,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="â€‹â€‹5-3-æšä¸¾ä¸åºåˆ—åŒ–é—®é¢˜â€‹â€‹"><a href="#â€‹â€‹5-3-æšä¸¾ä¸åºåˆ—åŒ–é—®é¢˜â€‹â€‹" class="headerlink" title="â€‹â€‹5.3 æšä¸¾ä¸åºåˆ—åŒ–é—®é¢˜â€‹â€‹"></a>â€‹<strong>â€‹5.3 æšä¸¾ä¸åºåˆ—åŒ–é—®é¢˜â€‹</strong>â€‹</h3><p>â€‹<strong>â€‹åŸå› ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>åœ¨ä¿å­˜å’ŒåŠ è½½è¿‡ç¨‹ä¸­ï¼Œæšä¸¾å€¼å¯èƒ½å› ä¸ºç‰ˆæœ¬å˜æ›´æˆ–æœªæ­£ç¡®å¤„ç†è€Œå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–é”™è¯¯ã€‚<br>â€‹<strong>â€‹è§£å†³æ–¹æ³•ï¼šâ€‹</strong>â€‹</li>
<li>ç¡®ä¿åœ¨åºåˆ—åŒ–ç›¸å…³çš„æ•°æ®ç»“æ„æ—¶ï¼Œæšä¸¾å€¼è¢«æ­£ç¡®å¤„ç†ã€‚</li>
<li>ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶ï¼Œä»¥åº”å¯¹æšä¸¾å€¼çš„å˜æ›´ã€‚</li>
</ul>
<hr>
<h2 id="â€‹â€‹6-æœ€ä½³å®è·µâ€‹â€‹"><a href="#â€‹â€‹6-æœ€ä½³å®è·µâ€‹â€‹" class="headerlink" title="â€‹â€‹6. æœ€ä½³å®è·µâ€‹â€‹"></a>â€‹<strong>â€‹6. æœ€ä½³å®è·µâ€‹</strong>â€‹</h2><ol>
<li>â€‹<strong>â€‹ä½¿ç”¨Â <code>enum class</code>Â è€Œéä¼ ç»ŸÂ <code>enum</code>â€‹</strong>â€‹ï¼š<ul>
<li>æä¾›æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œä½œç”¨åŸŸæ§åˆ¶ï¼Œé¿å…å‘½åå†²çªå’Œéšå¼è½¬æ¢ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹ä¸ºæšä¸¾å€¼æ·»åŠ æœ‰æ„ä¹‰çš„åç§°â€‹</strong>â€‹ï¼š<ul>
<li>ä½¿ç”¨æè¿°æ€§å¼ºçš„åç§°ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æš´éœ²å¿…è¦çš„æšä¸¾ç»™è“å›¾â€‹</strong>â€‹ï¼š<ul>
<li>é€šè¿‡Â <code>UENUM(BlueprintType)</code>Â å°†éœ€è¦åœ¨è“å›¾ä¸­ä½¿ç”¨çš„æšä¸¾æš´éœ²å‡ºæ¥ï¼Œå¹¶åˆç†ä½¿ç”¨Â <code>UMETA</code>Â å…ƒæ•°æ®å¢å¼ºå…¶å¯ç”¨æ€§ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹è€ƒè™‘æšä¸¾çš„å¯æ‰©å±•æ€§â€‹</strong>â€‹ï¼š<ul>
<li>åœ¨è®¾è®¡æšä¸¾æ—¶ï¼Œé¢„ç•™ä¸€å®šçš„ç©ºé—´ä»¥å¤‡å°†æ¥å¯èƒ½çš„æ‰©å±•ï¼Œé¿å…é¢‘ç¹ä¿®æ”¹å·²æœ‰çš„æšä¸¾å€¼ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æ–‡æ¡£å’Œæ³¨é‡Šâ€‹</strong>â€‹ï¼š<ul>
<li>ä¸ºæšä¸¾åŠå…¶å€¼æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œå¸®åŠ©å›¢é˜Ÿæˆå‘˜ç†è§£å…¶ç”¨é€”å’Œå«ä¹‰ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹é¿å…ä½¿ç”¨é­”æ³•æ•°å­—â€‹</strong>â€‹ï¼š<ul>
<li>å§‹ç»ˆä½¿ç”¨æšä¸¾æ›¿ä»£ç¡¬ç¼–ç çš„æ•°å­—ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="â€‹â€‹7-ç¤ºä¾‹é¡¹ç›®â€‹â€‹"><a href="#â€‹â€‹7-ç¤ºä¾‹é¡¹ç›®â€‹â€‹" class="headerlink" title="â€‹â€‹7. ç¤ºä¾‹é¡¹ç›®â€‹â€‹"></a>â€‹<strong>â€‹7. ç¤ºä¾‹é¡¹ç›®â€‹</strong>â€‹</h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨è™šå¹»æšä¸¾æ¥ç®¡ç†è§’è‰²çš„çŠ¶æ€ã€‚</p>
<h3 id="â€‹â€‹7-1-å®šä¹‰æšä¸¾â€‹â€‹"><a href="#â€‹â€‹7-1-å®šä¹‰æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹7.1 å®šä¹‰æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹7.1 å®šä¹‰æšä¸¾â€‹</strong>â€‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CharacterStateEnum.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CharacterStateEnum.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UENUM</span>(BlueprintType)</span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">ECharacterState</span> : uint8</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">Idle        <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Idle&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    Walking     <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Walking&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    Running     <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Running&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    Jumping     <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Jumping&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    Attacking   <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Attacking&quot;</span>)</span>,</span></span><br><span class="line"><span class="function">    Dead        <span class="title">UMETA</span><span class="params">(DisplayName = <span class="string">&quot;Dead&quot;</span>)</span></span></span><br><span class="line"><span class="function">&#125;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="â€‹â€‹7-2-åœ¨è§’è‰²ç±»ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"><a href="#â€‹â€‹7-2-åœ¨è§’è‰²ç±»ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹7.2 åœ¨è§’è‰²ç±»ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹7.2 åœ¨è§’è‰²ç±»ä¸­ä½¿ç”¨æšä¸¾â€‹</strong>â€‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CharacterStateEnum.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MYGAME_API</span> AMyCharacter : <span class="keyword">public</span> ACharacter</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">AMyCharacter</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§’è‰²å½“å‰çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;State&quot;</span>)</span><br><span class="line">    ECharacterState CurrentState;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ‡æ¢çŠ¶æ€å‡½æ•°</span></span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;State&quot;</span>)</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetState</span><span class="params">(ECharacterState NewState)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çŠ¶æ€å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">HandleState</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">AMyCharacter::<span class="built_in">AMyCharacter</span>()</span><br><span class="line">&#123;</span><br><span class="line">    PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line">    CurrentState = ECharacterState::Idle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">Tick</span>(DeltaTime);</span><br><span class="line">    <span class="built_in">HandleState</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::SetState</span><span class="params">(ECharacterState NewState)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CurrentState = NewState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::HandleState</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (CurrentState)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Idle:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œé—²ç½®é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Walking:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œè¡Œèµ°é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Running:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œå¥”è·‘é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Jumping:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œè·³è·ƒé€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Attacking:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œæ”»å‡»é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ECharacterState::Dead:</span><br><span class="line">            <span class="comment">// æ‰§è¡Œæ­»äº¡é€»è¾‘</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="â€‹â€‹7-3-åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"><a href="#â€‹â€‹7-3-åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹" class="headerlink" title="â€‹â€‹7.3 åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹â€‹"></a>â€‹<strong>â€‹7.3 åœ¨è“å›¾ä¸­ä½¿ç”¨æšä¸¾â€‹</strong>â€‹</h3><ol>
<li><p>â€‹<strong>â€‹åˆ›å»ºè§’è‰²è“å›¾â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åŸºäºÂ <code>AMyCharacter</code>Â åˆ›å»ºä¸€ä¸ªè“å›¾ç±»Â <code>BP_MyCharacter</code>ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹è®¾ç½®çŠ¶æ€å˜é‡â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨è“å›¾çš„ç»†èŠ‚é¢æ¿ä¸­ï¼Œå¯ä»¥çœ‹åˆ°Â <code>CurrentState</code>Â å˜é‡ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©ä¸åŒçš„çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹è°ƒç”¨çŠ¶æ€åˆ‡æ¢å‡½æ•°â€‹</strong>â€‹ï¼š</p>
<ul>
<li>ä½¿ç”¨äº‹ä»¶å›¾è¡¨ä¸­çš„èŠ‚ç‚¹è°ƒç”¨Â <code>SetState</code>Â å‡½æ•°ï¼ŒåŠ¨æ€æ”¹å˜è§’è‰²çš„çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹æ‰©å±•çŠ¶æ€é€»è¾‘â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨è“å›¾ä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•Â <code>HandleState</code>Â çš„é€»è¾‘ï¼Œä½¿ç”¨ â€‹<strong>â€‹Switch on Enumâ€‹</strong>â€‹ èŠ‚ç‚¹æ ¹æ®Â <code>CurrentState</code>Â æ‰§è¡Œä¸åŒçš„è¡Œä¸ºã€‚</li>
</ul>
</li>
</ol>
<h1 id="ç¡¬å¼•ç”¨å’Œè½¯å¼•ç”¨-æ€§èƒ½ç›¸å…³"><a href="#ç¡¬å¼•ç”¨å’Œè½¯å¼•ç”¨-æ€§èƒ½ç›¸å…³" class="headerlink" title="ç¡¬å¼•ç”¨å’Œè½¯å¼•ç”¨- æ€§èƒ½ç›¸å…³"></a>ç¡¬å¼•ç”¨å’Œè½¯å¼•ç”¨- æ€§èƒ½ç›¸å…³</h1><p>åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­ï¼Œ<strong>è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</strong>å’Œ<strong>ç¡¬å¼•ç”¨ï¼ˆHard Referenceï¼‰</strong>æ˜¯èµ„æºåŠ è½½å’Œç®¡ç†çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç›´æ¥å½±å“å†…å­˜ä½¿ç”¨ã€åŠ è½½æ€§èƒ½å’Œé¡¹ç›®ç»´æŠ¤ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„è¯¦ç»†å¯¹æ¯”å’Œç”¨æ³•ï¼š</p>
<hr>
<h3 id="1-ç¡¬å¼•ç”¨ï¼ˆHard-Referenceï¼‰"><a href="#1-ç¡¬å¼•ç”¨ï¼ˆHard-Referenceï¼‰" class="headerlink" title="1. ç¡¬å¼•ç”¨ï¼ˆHard Referenceï¼‰"></a><strong>1. ç¡¬å¼•ç”¨ï¼ˆHard Referenceï¼‰</strong></h3><p><strong>å®šä¹‰</strong>ï¼š<br>ç¡¬å¼•ç”¨è¡¨ç¤ºèµ„æºåœ¨è¿è¡Œæ—¶<strong>å¼ºåˆ¶åŠ è½½</strong>åˆ°å†…å­˜ä¸­ã€‚åªè¦å¼•ç”¨è€…å­˜åœ¨ï¼Œè¢«å¼•ç”¨çš„èµ„æºä¼šä¸€ç›´é©»ç•™å†…å­˜ã€‚<br><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><p><strong>è‡ªåŠ¨åŠ è½½</strong>ï¼šèµ„æºéšå¼•ç”¨å®ƒçš„å¯¹è±¡ï¼ˆå¦‚è“å›¾ã€å…³å¡ï¼‰ä¸€èµ·åŠ è½½ã€‚</p>
</li>
<li><p><strong>å†…å­˜å ç”¨é«˜</strong>ï¼šå¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—ï¼Œå°¤å…¶æ˜¯å¼•ç”¨å¤§å‹èµ„æºï¼ˆå¦‚çº¹ç†ã€æ¨¡å‹ï¼‰ã€‚</p>
</li>
<li><p><strong>å¼ºä¾èµ–æ€§</strong>ï¼šè‹¥è¢«å¼•ç”¨çš„èµ„æºä¸¢å¤±ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼ˆå¦‚çº¢è‰²é”™è¯¯æç¤ºï¼‰ã€‚<br><strong>å¸¸è§åœºæ™¯</strong>ï¼š</p>
</li>
<li><p>ç›´æ¥æ‹–æ”¾èµ„æºåˆ°è“å›¾æˆ–å…³å¡ä¸­ï¼ˆä¾‹å¦‚ï¼šåœ¨è“å›¾ä¸­ç›´æ¥æŒ‡å®šä¸€ä¸ªé™æ€ç½‘æ ¼æˆ–æè´¨ï¼‰ã€‚</p>
</li>
<li><p>ä½¿ç”¨Â <code>UPROPERTY</code>Â å£°æ˜æ—¶æœªæŒ‡å®šç‰¹æ®Šä¿®é¥°ç¬¦ï¼š</p>
<p>  UPROPERTY()<br>  UTexture2D* HardTextureRef; &#x2F;&#x2F; ç¡¬å¼•ç”¨</p>
</li>
</ul>
<p>&#x3D;&#x3D;ç¡¬å¼•ç”¨&#x3D;&#x3D;    è¿™ä¹Ÿæ˜¯ä¸€ä¸ªç¡¬å¼•ç”¨<br>![[Pasted image 20250412160904.png]]<br>&#x3D;&#x3D;åˆ›å»ºè½¯å¼•ç”¨&#x3D;&#x3D;<br>è½¯å¼•ç”¨çš„å¥½å¤„æ˜¯èµ„äº§ä»…åœ¨éœ€è¦æ—¶åŠ è½½ï¼Œè¿™å¯ä»¥èŠ‚çœå†…å­˜ã€‚æˆ‘ä»¬å¯¹æš‚æ—¶ä¸éœ€è¦çš„ä¸å…³é”®èµ„äº§ç”¨è½¯å¼•ç”¨<br>ä½†æ˜¯ä¸é€‚åˆ![[Pasted image 20250412161333.png]]</p>
<p>![[Pasted image 20250412160946.png]]</p>
<h1 id="è™šå¹»æ™ºèƒ½æŒ‡é’ˆ"><a href="#è™šå¹»æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="è™šå¹»æ™ºèƒ½æŒ‡é’ˆ"></a>è™šå¹»æ™ºèƒ½æŒ‡é’ˆ</h1><h2 id="TObjectPtr"><a href="#TObjectPtr" class="headerlink" title="TObjectPtr"></a>TObjectPtr</h2><p>æ”¯æŒè®¿é—®è·Ÿè¸ªå’Œå»¶è¿ŸåŠ è½½<br>è®¿é—®è·Ÿè¸ªï¼šçŸ¥é“å¯¹è±¡ä½•æ—¶è¢«åŠ è½½æˆ–è€…è®¿é—®<br>å»¶è¿ŸåŠ è½½ï¼šåªåœ¨éœ€è¦æ—¶åŠ è½½èµ„æº<br>ç¼ºç‚¹ï¼šä¸»è¦é€‚ç”¨äºæˆå‘˜å˜é‡ï¼Œä»…ä»…åœ¨ç¼–è¾‘å™¨ä¸­æœ‰æ•ˆï¼Œåœ¨å‘å¸ƒç‰ˆæœ¬ä¸­ä¼šè¢«è½¬æ¢æˆåŸå§‹æŒ‡é’ˆï¼Œæ‰€ä»¥ä¸ä¼šè®©æ¸¸æˆå˜å¾—æ›´å¿«ï¼Œä»…ä»…æä¾›ä¸€ç§ç¼–è¾‘ä½“éªŒ</p>
<h1 id="åŠ¨ç”»è“å›¾"><a href="#åŠ¨ç”»è“å›¾" class="headerlink" title="åŠ¨ç”»è“å›¾"></a>åŠ¨ç”»è“å›¾</h1><h2 id="è¦è·å–çˆ¶ç±»çš„æ•°æ®è¦ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ï¼Œå°†å­ç±»å¯¹è±¡è½¬æ¢ä¸ºçˆ¶ç±»å¯¹è±¡-è¿™æ ·å°±èƒ½åœ¨åŠ¨ç”»è“å›¾ä¸­è·å–åˆ°çˆ¶ç±»è§’è‰²ç­‰è“å›¾çš„æ•°æ®ï¼Œæ¯”å¦‚è§’è‰²ç§»åŠ¨ç»„ä»¶ï¼Œç»„ä»¶ä¸­çš„é€Ÿåº¦ç­‰æ•°æ®ã€‚"><a href="#è¦è·å–çˆ¶ç±»çš„æ•°æ®è¦ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ï¼Œå°†å­ç±»å¯¹è±¡è½¬æ¢ä¸ºçˆ¶ç±»å¯¹è±¡-è¿™æ ·å°±èƒ½åœ¨åŠ¨ç”»è“å›¾ä¸­è·å–åˆ°çˆ¶ç±»è§’è‰²ç­‰è“å›¾çš„æ•°æ®ï¼Œæ¯”å¦‚è§’è‰²ç§»åŠ¨ç»„ä»¶ï¼Œç»„ä»¶ä¸­çš„é€Ÿåº¦ç­‰æ•°æ®ã€‚" class="headerlink" title="è¦è·å–çˆ¶ç±»çš„æ•°æ®è¦ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ï¼Œå°†å­ç±»å¯¹è±¡è½¬æ¢ä¸ºçˆ¶ç±»å¯¹è±¡   è¿™æ ·å°±èƒ½åœ¨åŠ¨ç”»è“å›¾ä¸­è·å–åˆ°çˆ¶ç±»è§’è‰²ç­‰è“å›¾çš„æ•°æ®ï¼Œæ¯”å¦‚è§’è‰²ç§»åŠ¨ç»„ä»¶ï¼Œç»„ä»¶ä¸­çš„é€Ÿåº¦ç­‰æ•°æ®ã€‚"></a>è¦è·å–çˆ¶ç±»çš„æ•°æ®è¦ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ï¼Œå°†å­ç±»å¯¹è±¡è½¬æ¢ä¸ºçˆ¶ç±»å¯¹è±¡   è¿™æ ·å°±èƒ½åœ¨åŠ¨ç”»è“å›¾ä¸­è·å–åˆ°çˆ¶ç±»è§’è‰²ç­‰è“å›¾çš„æ•°æ®ï¼Œæ¯”å¦‚è§’è‰²ç§»åŠ¨ç»„ä»¶ï¼Œç»„ä»¶ä¸­çš„é€Ÿåº¦ç­‰æ•°æ®ã€‚</h2><p>tips:&#x3D;&#x3D;ä½¿ç”¨C++æŒ‡å®šåŠ¨ç”»è“å›¾çˆ¶ç±»&#x3D;&#x3D;æ—¶ä¸€å®šè¦å…³é—­ç¼–è¾‘å™¨ï¼&#x3D;&#x3D;<strong>Animinstance</strong>&#x3D;&#x3D;æ˜¯æ‰€æœ‰åŠ¨ç”»è“å›¾çš„åŸºç¡€è“å›¾ç±»ï¼å¯ä»¥é‡å†™å®ƒä»¥å®ç°åŠ¨ç”»è“å›¾çš„åŠŸèƒ½ï¼<br>![[Pasted image 20250331162306.png]]<br>ä¸Šå›¾æ‰€ç¤ºè¡¨ç¤ºåŠ¨ç”»å¼€å§‹æ—¶è·å–è§’è‰²ç»„ä»¶ï¼Œ&#x3D;&#x3D;<code>TryGetPawnOwnerï¼ˆï¼‰</code>&#x3D;&#x3D;Â ç”¨äºå°è¯•è·å–å½“å‰åŠ¨ç”»è“å›¾å®ä¾‹æ‰€å…³è”çš„Pawnï¼ˆè§’è‰²ï¼‰å¯¹è±¡ã€‚å› ä¸ºcharacteræ˜¯Pawnçš„å­ç±»ï¼Œæ‰€ä»¥ä¹Ÿèƒ½è·å–ï¼Œä½†æ˜¯éœ€è¦Cast&lt;&gt;()è¿›è¡Œç±»å‹è½¬æ¢</p>
<h3 id="ä½¿ç”¨å¤šä¸ªåŠ¨ç”»è“å›¾æ§åˆ¶åŠ¨ç”»"><a href="#ä½¿ç”¨å¤šä¸ªåŠ¨ç”»è“å›¾æ§åˆ¶åŠ¨ç”»" class="headerlink" title="ä½¿ç”¨å¤šä¸ªåŠ¨ç”»è“å›¾æ§åˆ¶åŠ¨ç”»"></a>ä½¿ç”¨å¤šä¸ªåŠ¨ç”»è“å›¾æ§åˆ¶åŠ¨ç”»</h3><p>åˆ›å»ºä¸€ä¸ªæ–°è“å›¾ï¼Œåœ¨å¦ä¸€ä¸ªç±»ä¸­ä½¿ç”¨é“¾æ¥å›¾è¡¨å°†è“å›¾é“¾æ¥ã€‚intputposeèŠ‚ç‚¹è®¾ç½®åœ¨éœ€è¦å§¿åŠ¿çš„åŠ¨ç”»è“å›¾é‡Œå¯ä»¥é“¾æ¥å¦ä¸€ä¸ªè“å›¾çš„å§¿åŠ¿</p>
<h1 id="åŠ¨ç”»è’™å¤ªå¥‡-ä¸€ç§åŠ¨ç”»åˆ†ç»„å®¹å™¨"><a href="#åŠ¨ç”»è’™å¤ªå¥‡-ä¸€ç§åŠ¨ç”»åˆ†ç»„å®¹å™¨" class="headerlink" title="åŠ¨ç”»è’™å¤ªå¥‡-ä¸€ç§åŠ¨ç”»åˆ†ç»„å®¹å™¨"></a>åŠ¨ç”»è’™å¤ªå¥‡-ä¸€ç§åŠ¨ç”»åˆ†ç»„å®¹å™¨</h1><p>ä½¿ç”¨æ ‡ç­¾æŒ‡å®šåŠ¨ç”»æ’­æ”¾çš„é¡ºåºï¼Œåˆ›å»ºæ’æ§½å°†è’™å¤ªå¥‡åŠ¨ç”»å…³è”åˆ°æ’æ§½<br>![[Pasted image 20250402141713.png]]<br>ç½‘æ ¼ä½“å¯ä»¥è·å–åˆ°åŠ¨ç”»ç¤ºä¾‹ï¼Œå¹¶ä½¿ç”¨åŠ¨ç”»è’™å¤ªå¥‡ã€‚</p>
<blockquote>
<p>****** &#x3D;&#x3D;<strong>è¦æƒ³ä½¿ç”¨è’™å¤ªå¥‡ï¼Œå¿…é¡»åœ¨åŠ¨ç”»è“å›¾ä¸­å¯ç”¨æ’æ§½ï¼</strong>&#x3D;&#x3D;</p>
</blockquote>
<h2 id="UE5-C-åŠ¨ç”»è“å›¾å…³é”®APIï¼šé‡å†™åŠ¨ç”»å¼€å§‹ä¸æ¯å¸§æ›´æ–°"><a href="#UE5-C-åŠ¨ç”»è“å›¾å…³é”®APIï¼šé‡å†™åŠ¨ç”»å¼€å§‹ä¸æ¯å¸§æ›´æ–°" class="headerlink" title="UE5 C++åŠ¨ç”»è“å›¾å…³é”®APIï¼šé‡å†™åŠ¨ç”»å¼€å§‹ä¸æ¯å¸§æ›´æ–°"></a>UE5 C++åŠ¨ç”»è“å›¾å…³é”®APIï¼šé‡å†™åŠ¨ç”»å¼€å§‹ä¸æ¯å¸§æ›´æ–°</h2><p>ä»¥ä¸‹æ˜¯Unreal Engine 5ä¸­åŠ¨ç”»ç³»ç»Ÿä¸¤ä¸ªé‡è¦APIçš„C++å®ç°æ–¹å¼ï¼Œåˆ†åˆ«ç”¨äºåŠ¨ç”»å¼€å§‹æ‰§è¡Œå’Œæ¯å¸§æ‰§è¡Œé€»è¾‘ï¼Œå’ŒåŠ¨ç”»è“å›¾ä¸€è‡´,éœ€è¦é‡å†™Animainstace</p>
<p>![[Pasted image 20250402142248.png]]åœ¨è§’è‰²çš„.hæ–‡ä»¶ä¸­ç”³æ˜ä¸€ä¸ªæ”»å‡»è’™å¤ªå¥‡å˜é‡ï¼Œé€šè¿‡ç½‘æ ¼ä½“è®¿é—®åŠ¨ç”»å®ä¾‹ï¼Œç„¶åä½¿ç”¨å…¶ä¸­çš„è’™å¤ªå¥‡æ’­æ”¾å‡½æ•°<br>![[Pasted image 20250402142750.png]]</p>
<p>å…³é”®api:   Montage_JumpToSection()    Montage_Play()</p>
<h2 id="åŠ¨ç”»é€šçŸ¥äº‹ä»¶"><a href="#åŠ¨ç”»é€šçŸ¥äº‹ä»¶" class="headerlink" title="åŠ¨ç”»é€šçŸ¥äº‹ä»¶"></a>åŠ¨ç”»é€šçŸ¥äº‹ä»¶</h2><p>å³é”®åœ¨è’™å¤ªå¥‡ä¸­æ·»åŠ é€šçŸ¥ï¼Œé€šçŸ¥æ˜¯ä¸€ç§äº‹ä»¶ï¼ŒåŠ¨ç”»æ’­æ”¾å®Œæ—¶å¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ’­æ”¾éŸ³æ•ˆç­‰ã€‚</p>
<h2 id="Kismetæ•°å­¦åº“"><a href="#Kismetæ•°å­¦åº“" class="headerlink" title="Kismetæ•°å­¦åº“"></a>Kismetæ•°å­¦åº“</h2><h3 id="å…·æœ‰å‘é‡è¿ç®—ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œè¯¦æƒ…æŸ¥è¯¢UEå¸®åŠ©æ‰‹å†Œ"><a href="#å…·æœ‰å‘é‡è¿ç®—ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œè¯¦æƒ…æŸ¥è¯¢UEå¸®åŠ©æ‰‹å†Œ" class="headerlink" title="å…·æœ‰å‘é‡è¿ç®—ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œè¯¦æƒ…æŸ¥è¯¢UEå¸®åŠ©æ‰‹å†Œ"></a>å…·æœ‰å‘é‡è¿ç®—ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œè¯¦æƒ…æŸ¥è¯¢UEå¸®åŠ©æ‰‹å†Œ</h3><p>![[Pasted image 20250331162234.png]]</p>
<h1 id="åå‘åŠ¨åŠ›å­¦-IK-inverse-kinematics"><a href="#åå‘åŠ¨åŠ›å­¦-IK-inverse-kinematics" class="headerlink" title="åå‘åŠ¨åŠ›å­¦-IK    inverse kinematics"></a>åå‘åŠ¨åŠ›å­¦-IK    inverse kinematics</h1><h2 id="çƒä½“è¿½è¸ª-ä¸€ç§å®šä½è·ç¦»åŠæ³•"><a href="#çƒä½“è¿½è¸ª-ä¸€ç§å®šä½è·ç¦»åŠæ³•" class="headerlink" title="çƒä½“è¿½è¸ª-ä¸€ç§å®šä½è·ç¦»åŠæ³•"></a>çƒä½“è¿½è¸ª-ä¸€ç§å®šä½è·ç¦»åŠæ³•</h2><h3 id="æ§åˆ¶éª¨æ¶-animationåŠ¨ç”»"><a href="#æ§åˆ¶éª¨æ¶-animationåŠ¨ç”»" class="headerlink" title="æ§åˆ¶éª¨æ¶-animationåŠ¨ç”»"></a>æ§åˆ¶éª¨æ¶-animationåŠ¨ç”»</h3><p>å¯ä»¥æ ¹æ®æœ«ç«¯æ‰§è¡Œå™¨ç§»åŠ¨éª¨éª¼ä½ç½®ï¼ŒæŒ‡å®šæœ«ç«¯éª¨éª¼ï¼ŒIKéª¨éª¼ï¼Œæˆ–è€…æ·»åŠ è™šæ‹Ÿéª¨éª¼ï¼Œ<br>ä¸€ï¼šå¯¼å…¥éª¨æ¶<br>äºŒï¼šåˆ›å»ºè¶³éƒ¨è¿½è¸ªå‡½æ•°<br>ä¸‰ï¼šæ·»åŠ æ–°å‚æ•°ï¼šrig element key<br>å››ï¼šæ·»åŠ get transformå‡½æ•°<br>![[Pasted image 20250331180247.png]]<br>![[Pasted image 20250331180347.png]]<br>![[Pasted image 20250331180436.png]]</p>
<h2 id="æ·»åŠ çƒè¿½è¸ªé€šé“-å…·æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªå‘é‡ï¼Œä¼šè¿”å›ä¸€ä¸ªå‘½ä¸­ä½ç½®"><a href="#æ·»åŠ çƒè¿½è¸ªé€šé“-å…·æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªå‘é‡ï¼Œä¼šè¿”å›ä¸€ä¸ªå‘½ä¸­ä½ç½®" class="headerlink" title="æ·»åŠ çƒè¿½è¸ªé€šé“-å…·æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªå‘é‡ï¼Œä¼šè¿”å›ä¸€ä¸ªå‘½ä¸­ä½ç½®"></a>æ·»åŠ çƒè¿½è¸ªé€šé“-å…·æœ‰èµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªå‘é‡ï¼Œä¼šè¿”å›ä¸€ä¸ªå‘½ä¸­ä½ç½®</h2><p>ç»å¸¸ä½¿ç”¨æ’å€¼æ¥ä½¿å˜é‡å¹³æ»‘è¿‡æ¸¡</p>
<h2 id="å…¨èº«IK-UE5æ–°å¢-éš¾ç‚¹"><a href="#å…¨èº«IK-UE5æ–°å¢-éš¾ç‚¹" class="headerlink" title="å…¨èº«IK-UE5æ–°å¢(éš¾ç‚¹)"></a>å…¨èº«IK-UE5æ–°å¢(éš¾ç‚¹)</h2><p>å¯¹èº«ä½“çš„ä»»æ„ä¸€ä¸²éª¨éª¼æŒ‡å®šæœ«ç«¯æ‰§è¡Œå™¨</p>
<h1 id="ç¢°æ’"><a href="#ç¢°æ’" class="headerlink" title="ç¢°æ’"></a>ç¢°æ’</h1><p>æ‰€æœ‰ç½‘æ ¼ä½“éƒ½å…·æœ‰ç¢°æ’å±æ€§<br>1.æ— ç¢°æ’<br>2.ä»…ä»…æŸ¥è¯¢-æ— ç‰©ç†æ¨¡æ‹Ÿï¼ˆç”¨äºå°„çº¿æ£€æµ‹ä¹‹ç±»â€¦ï¼‰<br>3.ç‰©ç†æ¨¡æ‹Ÿ<br>4.å¼€å¯ç¢°æ’-æ”¯æŒç‰©ç†æ¨¡æ‹Ÿå’Œå°„çº¿æ£€æµ‹ï¼Œæ€§èƒ½æˆæœ¬æœ€é«˜</p>
<p>ç®€å•ç¢°æ’ä¸å¤æ‚ç¢°æ’</p>
<p>æ”¯æŒé‡åŠ›ä¸æ¨åŠ›â€¦.éœ€è¦æ‰‹åŠ¨å¯ç”¨</p>
<h1 id="é‡å äº‹ä»¶"><a href="#é‡å äº‹ä»¶" class="headerlink" title="é‡å äº‹ä»¶"></a>é‡å äº‹ä»¶</h1><p>ä½¿ç”¨å‰å¿…é¡»å°†è§’è‰²å’Œè§’è‰²èº«ä¸Šçš„ç»„ä»¶é‡å äº‹ä»¶è®¾ä¸ºtrue</p>
<p>çƒä½“ç»„ä»¶ </p>
<p>å½“ä¸¤ä¸ªç‰©ä½“é‡å æ—¶å°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œå¯ä»¥</p>
<p>ç»„ä»¶å¼€å§‹é‡å ï¼ˆç”¨å¾—æœ€å¤šï¼‰</p>
<p>è™šå¹»5ä¸­çš„å§”æ‰˜</p>
<p>è§‚å¯Ÿè€…æ¨¡å¼-</p>
<p>å§”æ‰˜æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç»„ä»¶å¯¹è±¡æ——ä¸‹æœ‰è®¸å¤šçš„å§”æ‰˜ï¼Œæ¯”å¦‚ç»„ä»¶é‡å äº‹ä»¶ï¼Œç»„ä»¶å¼€å§‹é‡å ï¼Œç»„ä»¶ç»“æŸé‡å ï¼Œå¯ä»¥å‚¨å­˜è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œå¯ä»¥ä¸ºæŸä¸€ä¸ªç‰¹å®šå¯¹è±¡åˆ›é€ å§”æ‰˜ã€‚å¹¶å¹¿æ’­è¿™ä¸ªå§”æ‰˜ã€‚<br>![[Pasted image 20250401165837.png]]<br>ç»„ä»¶ç»§æ‰¿å…³ç³»â†‘</p>
<p>C++å®ç°ï¼š<br>éœ€è¦åˆ›å»ºä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å¯ä»¥æä¾›è®¸å¤šå…³äºå›è°ƒå‡½æ•°çš„ä¿¡æ¯ï¼Œç»‘å®šåˆ°åŠ¨æ€å¤šæ’­å§”æ‰˜ï¼Œè¦ç»‘å®šå¿…é¡»å¯¹åå°„ç³»ç»Ÿå¯è§ï¼Œéœ€è¦åŠ ä¸ŠUFUNCTION()ï¼Œå› ä¸ºè¿™ç§ç±»å‹çš„å§”æ‰˜å¯ä»¥è¢«è“å›¾è®¿é—®</p>
<p>è®¿é—®&#x3D;&#x3D;ç»„ä»¶å¯¹è±¡&#x3D;&#x3D;ä¸‹é¢çš„oncomponentBeginOverlapå‡½æ•°ä¸‹çš„AddDynamic(ç”¨æˆ·å¯¹è±¡ï¼Œå›è°ƒå‡½æ•°çš„åœ°å€)</p>
<p>ç„¶åå›è°ƒå‡½æ•°å°±ä¼šåœ¨ç»„ä»¶é‡å çš„æ—¶å€™è¢«è§¦å‘ã€‚<br>Tips:åœ¨è™šå¹»5ä¸­è¦é‡å†™ç»§æ‰¿çš„è™šå‡½æ•°ï¼Œéœ€è¦ç§»é™¤UFUCTIONç­‰å®ï¼Œå› ä¸ºä¼šéšå¼ç»§æ‰¿ä¸€ä¸ªå®ã€‚superå¸¸ç”¨äºä¿ç•™åŸå‡½æ•°çš„åŠŸèƒ½</p>
<h1 id="éª¨éª¼æ’æ§½"><a href="#éª¨éª¼æ’æ§½" class="headerlink" title="éª¨éª¼æ’æ§½"></a>éª¨éª¼æ’æ§½</h1><h1 id="åŠ¨ç”»é‡å®šå‘-åå‘ç›®æ ‡å®šä½"><a href="#åŠ¨ç”»é‡å®šå‘-åå‘ç›®æ ‡å®šä½" class="headerlink" title="åŠ¨ç”»é‡å®šå‘-åå‘ç›®æ ‡å®šä½"></a>åŠ¨ç”»é‡å®šå‘-åå‘ç›®æ ‡å®šä½</h1><p>1.æ ¹æ®å¯¼å…¥çš„éª¨éª¼åˆ›å»ºIKéª¨æ¶ï¼Œè®¾ç½®åç›¸ç›®æ ‡æ ¹èŠ‚ç‚¹ï¼ˆæ˜¯æ‰€æœ‰éª¨éª¼ä¸­è”ç³»å…¶å®ƒéª¨éª¼çš„æ ¸å¿ƒèŠ‚ç‚¹ï¼‰ï¼Œ<br>æ ¹æ®è®¾ç½®çš„æ ¹èŠ‚ç‚¹æ–°å»ºé“¾æ¡ï¼ŒæŒ‡å®šèµ·å§‹éª¨éª¼ã€‚ä»é€‰å®šéª¨éª¼åˆ›å»ºæ–°çš„é‡æ–°å®šä½é“¾ã€‚<br>2.æ ¹æ®éœ€è¦æ›¿æ¢çš„éª¨éª¼åˆ›å»ºIKéª¨æ¶<br>3.åˆ›å»ºIKåå‘ç›®æ ‡</p>
<p>tips:å¼ºåˆ¶å†…è”ï¼ŒFORCEINLINE</p>
<h1 id="è™šå¹»å¼•æ“æ‹¾å–ç³»ç»Ÿå®ç°æ–¹æ¡ˆæ€»ç»“"><a href="#è™šå¹»å¼•æ“æ‹¾å–ç³»ç»Ÿå®ç°æ–¹æ¡ˆæ€»ç»“" class="headerlink" title="è™šå¹»å¼•æ“æ‹¾å–ç³»ç»Ÿå®ç°æ–¹æ¡ˆæ€»ç»“"></a>è™šå¹»å¼•æ“æ‹¾å–ç³»ç»Ÿå®ç°æ–¹æ¡ˆæ€»ç»“</h1><h2 id="åŸºäºé‡å äº‹ä»¶çš„æ‹¾å–ç³»ç»Ÿå®ç°"><a href="#åŸºäºé‡å äº‹ä»¶çš„æ‹¾å–ç³»ç»Ÿå®ç°" class="headerlink" title="åŸºäºé‡å äº‹ä»¶çš„æ‹¾å–ç³»ç»Ÿå®ç°"></a>åŸºäºé‡å äº‹ä»¶çš„æ‹¾å–ç³»ç»Ÿå®ç°</h2><h3 id="æ ¸å¿ƒå®ç°æ­¥éª¤"><a href="#æ ¸å¿ƒå®ç°æ­¥éª¤" class="headerlink" title="æ ¸å¿ƒå®ç°æ­¥éª¤"></a>æ ¸å¿ƒå®ç°æ­¥éª¤</h3><ol>
<li><p><strong>ç‰©å“åŸºç±»(AItem)åˆ›å»º</strong></p>
<ul>
<li>ç»§æ‰¿è‡ª<code>AActor</code></li>
<li>åŒ…å«<code>USphereComponent</code>ç”¨äºç¢°æ’æ£€æµ‹</li>
<li>å®ç°<code>PickUp</code>è™šå‡½æ•°ä¾›å­ç±»é‡å†™</li>
</ul>
</li>
<li><p><strong>å…³é”®ä»£ç å®ç°</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Item.hå…³é”®éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">UPROPERTY</span>(VisibleAnywhere) </span><br><span class="line">USphereComponent* CollisionSphere;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>()</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">OnBeginOverlap</span><span class="params">(...)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Item.cppå…³é”®éƒ¨åˆ†</span></span><br><span class="line">CollisionSphere-&gt;OnComponentBeginOverlap.<span class="built_in">AddDynamic</span>(<span class="keyword">this</span>, &amp;AItem::OnBeginOverlap);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AItem::OnBeginOverlap</span><span class="params">(...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(APawn* Picker = <span class="built_in">Cast</span>&lt;APawn&gt;(OtherActor))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">PickUp</span>(Picker);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;```</span><br><span class="line"># è™šå¹»å¼•æ“æšä¸¾</span><br><span class="line">åœ¨æ™®é€šæšä¸¾ä¸­åŠ Eï¼Œæšä¸¾å˜é‡å‰åŠ ECS_   ï¼Œæšä¸¾åé¢é™å®šæšä¸¾å˜é‡çš„æ•°æ®ç»“æ„å¤§å°ä»¥é¿å…é¢å¤–å¼€é”€</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250402083301.</span>png]]</span><br><span class="line">åœ¨è“å›¾ä¸­æŒ‡å®šæ˜¾ç¤ºå±æ€§</span><br><span class="line">![[Pasted image <span class="number">20250402083446.</span>png]]</span><br><span class="line"></span><br><span class="line"># åœ¨åŠ¨ç”»å®ä¾‹ä¸­æ›´æ–°è§’è‰²æŒæœ‰æ­¦å™¨çš„çŠ¶æ€</span><br><span class="line">![[Pasted image <span class="number">20250402084241.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250402084722.</span>png]]åˆ©ç”¨æšä¸¾é€‰æ‹©åŠ¨ç”»çŠ¶æ€</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># éŸ³æ•ˆ</span><br><span class="line"></span><br><span class="line">sound_cueåŠŸèƒ½å¯ä»¥ä¿®æ”¹éŸ³æ•ˆï¼Œè€Œä¸æ”¹åŠ¨åŸæœ¬çš„éŸ³é¢‘èµ„æº</span><br><span class="line"></span><br><span class="line">è™šå¹»<span class="number">5</span>ä¸­mate-soundsä¹Ÿå¯ä»¥ï¼Œä¼˜äºsound_cueã€‚SFXæ ¼å¼ï¼Œå¯ä»¥åˆ¶ä½œéšæœºéŸ³æ•ˆç­‰ç¨‹åºåŒ–éŸ³æ•ˆ</span><br><span class="line">![[Pasted image <span class="number">20250402160539.</span>png]]![[Pasted image <span class="number">20250402161158.</span>png]]æ··æ´—åŠŸèƒ½</span><br><span class="line"></span><br><span class="line"># UE5çš„æ¥å£ç±»-å®é™…ä¸Šæ˜¯ä¸€ä¸ªè™šåŸºç±»</span><br><span class="line">* å°†è‡ªå®šä¹‰çš„å‡½æ•°æš´éœ²ç»™ä½œç”¨ç±»ï¼Œè€Œä¸ç”¨è€ƒè™‘ç±»å‹ï¼Œä½¿ç”¨æ—¶ä½œç”¨ç±»ç»§æ‰¿æ¥å£ç±»é‡å†™è™šå‡½æ•°å³å¯ï¼Œæ¥å£å¯ä»¥å®ç°å„ä¸ªç±»è¿›è¡Œé€šä¿¡ï¼Œä¸‹é¢æ˜¯ä¸ªä¾‹å­ï¼Œ</span><br><span class="line">![[Pasted image <span class="number">20250404092303.</span>png]]</span><br><span class="line">å¦‚æœæ£€æµ‹ç¢°æ’è¿”å›çš„ç±»è¢«æˆåŠŸè½¬æ¢ä¸ºæ¥å£ç±»ï¼Œåˆ™æ‰§è¡Œæ¥å£å‡½æ•°ï¼Œå› ä¸ºæ¥å£ç±»æœ¬èº«å°±æ˜¯ä¼ é€’å¯¹è±¡çš„çˆ¶ç±»ï¼Œæ‰€ä»¥èƒ½è½¬æ¢æˆåŠŸã€‚ç„¶åè°ƒç”¨å…¶ä¸­çš„å‡½æ•°å°†æ•°æ®ä¼ è¾“ç»™å¦ä¸€ä¸ªç±»ï¼Œå®ç°é€šä¿¡ã€‚</span><br><span class="line">![[Pasted image <span class="number">20250404092750.</span>png]]</span><br><span class="line"></span><br><span class="line"># å‘é‡ç‚¹ç§¯-æ±‚ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’-è¿”å›çš„æ˜¯æ ‡é‡æ— æ–¹å‘</span><br><span class="line">![[Pasted image <span class="number">20250404094522.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## å‘é‡å½’ä¸€åŒ–</span><br><span class="line">![[Pasted image <span class="number">20250404094726.</span>png]]</span><br><span class="line"></span><br><span class="line">æ‰“å‡»ç‚¹ä½ç½®-ç‰©ä½“ä½ç½®=æŒ‡å‘æ‰“å‡»ç‚¹ä½ç½®çš„å‘é‡ï¼Œä¸‹é¢ä½¿ç”¨UE5çš„ç‚¹ç§¯å¼æ±‚è§£è§’åº¦ï¼Œæ­¤æ—¶DotProductä¸ºCosÎ¸</span><br><span class="line">![[Pasted image <span class="number">20250404095327.</span>png]]</span><br><span class="line">ç„¶åè®¡ç®—åä½™å¼¦å³å¯æ±‚å‡ºè§’åº¦Î¸![[Pasted image <span class="number">20250404110709.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404113610.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## å‘é‡å‰ç§¯</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404114917.</span>png]]</span><br><span class="line">![[Pasted image <span class="number">20250404115350.</span>png]]</span><br><span class="line"></span><br><span class="line">è™šå¹»é‡‡ç”¨å·¦æ‰‹åæ ‡ç³»</span><br><span class="line"></span><br><span class="line"># Cascadeç‰¹æ•ˆä¸Niagara</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cascadeç‰¹æ•ˆç³»ç»Ÿ</span><br><span class="line">![[Pasted image <span class="number">20250404144744.</span>png]]![[Pasted image <span class="number">20250404145002.</span>png]]</span><br><span class="line">Niagaraï¼š</span><br><span class="line">è‡³å°‘éœ€è¦ä¸€ä¸ªå‘å°„å™¨ï¼Œå¯ä»¥ç›´æ¥æŒ‚è½½åœ¨ç‰©ä½“ä¸Š</span><br><span class="line"><span class="number">1.</span>å‘å°„å™¨</span><br><span class="line"><span class="number">2.</span>ç²¾çµå›¾ï¼šä¼šè‡ªåŠ¨é¢å‘ç©å®¶</span><br><span class="line"><span class="number">3.</span></span><br><span class="line"></span><br><span class="line">åœ¨è§’è‰²èº«ä¸Šç”Ÿæˆç‰¹æ•ˆï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C++æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å¯ç ´åç½‘æ ¼ä½“</span><br><span class="line">åœºç³»ç»Ÿï¼šæ˜¯ä¸€ä¸ªACtorç±»</span><br><span class="line">![[Pasted image <span class="number">20250404151132.</span>png]]![[Pasted image <span class="number">20250404151214.</span>png]]</span><br><span class="line">å¾„å‘è¡°å‡ï¼Œ</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404151704.</span>png]]</span><br><span class="line">çº¿æ€§åŠ›èƒ½æ‰“é£ç‰©ä½“![[Pasted image <span class="number">20250404151742.</span>png]]</span><br><span class="line">éœ€è¦ä¸€ä¸ªå‘é‡æ¥è·å–</span><br><span class="line"></span><br><span class="line">C++å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç«‹åœºï¼Œå¹¶æš´éœ²ç»™è“å›¾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åˆ›å»ºä¸€ä¸ªå¯ç ´åç‰©ä½“ï¼Œå¹¶å°†å…¶æŒ‚è½½åœ¨ACTORä¸Š</span><br><span class="line">![[Pasted image <span class="number">20250404153252.</span>png]]</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404153622.</span>png]]![[Pasted image <span class="number">20250404153729.</span>png]]</span><br><span class="line">å¿…é¡»åŒ…å«æ­¤æ¨¡å—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è“å›¾åŸç”Ÿäº‹ä»¶</span><br><span class="line">![[Pasted image <span class="number">20250404154338.</span>png]]</span><br><span class="line"></span><br><span class="line">ä¸€æ—¦ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è“å›¾å’ŒC++ä¸­åŒæ—¶ä½¿ç”¨æ¥å£ç±»çš„æ¥å£å‡½æ•°ï¼Œä½†æ˜¯ä½ çš„è™šå‡½æ•°ä¼šåŠ ä¸Šç‰¹æ®Šåç¼€ï¼Œè¿™æ ·å°±èƒ½å°†æ¥å£æš´éœ²ç»™ç­–åˆ’æˆ–è€…ç¾æœ¯ä½¿ç”¨![[Pasted image <span class="number">20250404154538.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¸‹é¢ä¸€è¡Œæ˜¯åŠ ä¸Šåç¼€åçš„æ–°æ–¹æ³•![[Pasted image <span class="number">20250404154728.</span>png]]</span><br><span class="line"></span><br><span class="line">ä»æŒ‡å®šä½ç½®ç”Ÿæˆç‰©ä½“</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404160134.</span>png]]</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404160412.</span>png]]ä¸€æ—¦å‘ç”Ÿäº‹ä»¶é‡å ï¼Œåˆ™æ¶ˆé™¤ç‰©å“</span><br><span class="line"></span><br><span class="line">C++å®ç°ç”Ÿæˆç‰©å“ï¼š</span><br><span class="line">![[Pasted image <span class="number">20250404160912.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…ˆå£°æ˜ä¸€ä¸ªUClassç±»æš´éœ²ç»™ç¼–è¾‘å™¨ï¼Œç„¶åå»ç¼–è¾‘å™¨æŒ‡å®šè“å›¾ç±»ï¼Œåˆ™å¯ä»¥ç”¨C++ç”Ÿæˆä¸€ä¸ªè“å›¾ç±»ï¼ˆéå¸¸é‡è¦ï¼ï¼‰</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404161558.</span>png]]</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250404161755.</span>png]]</span><br><span class="line">é™å®šä¿®é¥°å™¨ï¼Œå–ä»£UClass,å¯ä»¥é™å®šç»§æ‰¿è“å›¾ç±»ã€‚æœ€å¥½ä½¿ç”¨å®ƒã€‚</span><br><span class="line"></span><br><span class="line">tips:è“å›¾ä¹Ÿå¯ä»¥ç»§æ‰¿</span><br><span class="line"></span><br><span class="line"># è‡ªå®šä¹‰ç»„ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ä¼¤å®³</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¯ä»¥åœ¨ä»»ä½•è§’è‰²ç±»ä¸­é‡å†™ä¼¤å®³å‡½æ•°ï¼Œè¿™æ˜¯è™šå¹»è‡ªå¸¦çš„ä¼¤å®³å‡½æ•°</span><br><span class="line">![[Pasted image <span class="number">20250405132812.</span>png]]</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250405133835.</span>png]]</span><br><span class="line">å°†å¥åº·å€¼é™åˆ¶åˆ°<span class="number">0</span>å’Œæœ€å¤§ç”Ÿå‘½ä¹‹é—´</span><br><span class="line">![[Pasted image <span class="number">20250405134525.</span>png]]![[Pasted image <span class="number">20250405134850.</span>png]]</span><br><span class="line">![[Pasted image <span class="number">20250405140837.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è¿½è¸ªè§’è‰²</span><br><span class="line">åˆ©ç”¨takedamageå‡½æ•°å¯ä»¥è·å–æ”»å‡»å¯¹è±¡ï¼Œå°†æ”»å‡»å¯¹è±¡å­˜å…¥æŒ‡é’ˆï¼Œè¿™æ ·å°±ä½ èƒ½è®¿é—®æ”»å‡»å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="line">![[Pasted image <span class="number">20250406102654.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406102830.</span>png]]</span><br><span class="line">ä¾‹å¦‚åˆ¤æ–­æ”»å‡»è§’è‰²ä¸è¢«æ”»å‡»è§’è‰²çš„è·ç¦»</span><br><span class="line">![[Pasted image <span class="number">20250406102949.</span>png]]</span><br><span class="line">è®¾ç½®é»˜è®¤åŠå¾„</span><br><span class="line">![[Pasted image <span class="number">20250406103010.</span>png]]</span><br><span class="line">å¦‚æœè·ç¦»å¤§äºæ”»å‡»åŠå¾„ï¼Œå°†æ”»å‡»å¯¹è±¡ç½®ç©º</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># AI-å¯¼èˆªç½‘æ ¼</span><br><span class="line"></span><br><span class="line">## é¦–å…ˆéœ€è¦åˆ›å»ºå¯¼èˆªç½‘æ ¼ä½“ç½‘æ ¼![[Pasted image <span class="number">20250406113807.</span>png]]</span><br><span class="line">show navigationæ§åˆ¶å°å¼€å¯æ˜¾ç¤ºå¯¼èˆªå‘½ä»¤</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># æ··åˆç©ºé—´</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406121727.</span>png]]</span><br><span class="line">è¿™ä¸ªæ˜¯åŠ¨ç”»è“å›¾ä¸­çš„çŠ¶æ€</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ··åˆç©ºé—´å¯ä»¥ç»„åˆå¤šç§åŠ¨ç”»ï¼Œå¹¶æ ¹æ®å˜é‡å¤§å°æ‰§è¡Œç›¸åº”è¿‡æ¸¡åŠ¨ç”»ã€‚</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406122450.</span>png]]</span><br><span class="line">è®¾ç½®è¿™ä¸ªä¹‹åå¯ä»¥å°†ç§»åŠ¨äº¤ç»™AIæ‰˜ç®¡ï¼Œ</span><br><span class="line">![[Pasted image <span class="number">20250406122537.</span>png]]</span><br><span class="line">å¿…é¡»åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## å¯¼èˆªç›®æ ‡</span><br><span class="line">![[Pasted image <span class="number">20250406123934.</span>png]]</span><br><span class="line"></span><br><span class="line">å¯ä»¥åˆ©ç”¨ä¸€ä¸ªè§’è‰²æŒ‡é’ˆæ•°ç»„å°†å¯¼èˆªç‚¹å­˜åœ¨é‡Œé¢ï¼Œéœ€è¦å¼€å¯AIæ¨¡å—ï¼Œå¹¶åŒ…å«ç›¸å…³å¤´æ–‡ä»¶</span><br><span class="line">![[Pasted image <span class="number">20250406124514.</span>png]]![[Pasted image <span class="number">20250406124901.</span>png]]</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406124934.</span>png]]</span><br><span class="line">åˆ›å»ºä¸€ä¸ªAIæ§åˆ¶å™¨ï¼Œå¹¶å°†ç›®æ ‡è®¾ä¸ºå¯¼èˆªç‚¹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406125423.</span>png]]</span><br><span class="line"># UE5 AIç§»åŠ¨è¯·æ±‚ä»£ç æ€»ç»“</span><br><span class="line"></span><br><span class="line">## ä»£ç åŠŸèƒ½</span><br><span class="line">å®ç°AIå¯¼èˆªç§»åŠ¨å¹¶åœ¨è·¯å¾„ç‚¹ä¸Šç»˜åˆ¶è°ƒè¯•çƒä½“</span><br><span class="line">å‰é¢å°†å¯¼èˆªç‚¹æš´éœ²ç»™äº†è“å›¾ï¼Œæ‰€ä»¥èƒ½ç›´æ¥ç”¨è“å›¾æ·»åŠ å¯¼èˆªç‚¹</span><br><span class="line">## ä»£ç è§£æ</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line">FAIMoveRequest MoveRequest;</span><br><span class="line">MoveRequest.<span class="built_in">SetGoalActor</span>(PatrolTarget);</span><br><span class="line">MoveRequest.<span class="built_in">SetAcceptanceRadius</span>(<span class="number">15.f</span>);</span><br><span class="line">FNavPathSharedPtr NavPath;</span><br><span class="line">EnemyController-&gt;<span class="built_in">MoveTo</span>(MoveRequest, &amp;NavPath);</span><br><span class="line">TArray&lt;FNavPathPoint&gt;&amp; PathPoints = NavPath-&gt;<span class="built_in">GetPathPoints</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; Point : PathPoints)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> FVector&amp; Location = Point.Location;</span><br><span class="line">    <span class="built_in">DrawDebugSphere</span>(<span class="built_in">GetWorld</span>(), Location, <span class="number">12.f</span>, <span class="number">12</span>, FColor::Green, <span class="literal">false</span>, <span class="number">10.f</span>);</span><br><span class="line">&#125;```</span><br><span class="line">### <span class="number">1.</span> åˆ›å»ºç§»åŠ¨è¯·æ±‚</span><br><span class="line"></span><br><span class="line">- `FAIMoveRequest`Â - AIç§»åŠ¨è¯·æ±‚ç±»</span><br><span class="line">### <span class="number">2.</span> è®¾ç½®ç§»åŠ¨ç›®æ ‡</span><br><span class="line">- `<span class="built_in">SetGoalActor</span>(PatrolTarget)`Â - è®¾ç½®ç›®æ ‡Actor</span><br><span class="line">- `PatrolTarget`Â - è¦ç§»åŠ¨åˆ°çš„ç›®æ ‡(AActoræŒ‡é’ˆ)</span><br><span class="line">### <span class="number">3.</span> è®¾ç½®æ¥å—åŠå¾„</span><br><span class="line">- `<span class="built_in">SetAcceptanceRadius</span>(<span class="number">15.f</span>)`Â - åˆ°è¾¾åˆ¤å®šåŠå¾„(<span class="number">15</span>å˜ç±³)</span><br><span class="line">### <span class="number">4.</span>æ‰§è¡Œç§»åŠ¨å‘½ä»¤</span><br><span class="line"></span><br><span class="line">- `FNavPathSharedPtr`Â - å¯¼èˆªè·¯å¾„å…±äº«æŒ‡é’ˆ</span><br><span class="line">- `EnemyController-&gt;<span class="built_in">MoveTo</span>()`Â - æ‰§è¡Œç§»åŠ¨</span><br><span class="line">    - å‚æ•°<span class="number">1</span>: é…ç½®å¥½çš„ç§»åŠ¨è¯·æ±‚  </span><br><span class="line">    - å‚æ•°<span class="number">2</span>: è¾“å‡ºå¯¼èˆªè·¯å¾„ä¿¡æ¯    </span><br><span class="line">### <span class="number">5.</span> è·å–è·¯å¾„ç‚¹</span><br><span class="line">- `<span class="built_in">GetPathPoints</span>()`Â - è·å–è·¯å¾„ç‚¹æ•°ç»„</span><br><span class="line">- `TArray&lt;FNavPathPoint&gt;`Â - è·¯å¾„ç‚¹åŠ¨æ€æ•°ç»„</span><br><span class="line">### <span class="number">6.</span> ç»˜åˆ¶è°ƒè¯•çƒä½“</span><br><span class="line"></span><br><span class="line">- `<span class="built_in">DrawDebugSphere</span>()`å‚æ•°:</span><br><span class="line">    <span class="number">1.</span> ä¸–ç•Œä¸Šä¸‹æ–‡</span><br><span class="line">    <span class="number">2.</span> çƒä½“ä½ç½®(FVector)</span><br><span class="line">    <span class="number">3.</span> åŠå¾„(<span class="number">12</span>å˜ç±³)</span><br><span class="line">    <span class="number">4.</span> ç»†åˆ†æ®µæ•°(<span class="number">12</span>)</span><br><span class="line">    <span class="number">5.</span> é¢œè‰²(FColor::Green)</span><br><span class="line">    <span class="number">6.</span> æ˜¯å¦æŒä¹…åŒ–(<span class="literal">false</span>)</span><br><span class="line">    <span class="number">7.</span> æ˜¾ç¤ºæ—¶é—´(<span class="number">10</span>ç§’</span><br><span class="line"></span><br><span class="line">è¿™æ®µä»£ç ç”¨äºåœ¨Unreal Engine <span class="number">5</span>ä¸­å¯è§†åŒ–æ˜¾ç¤ºAIçš„å¯¼èˆªè·¯å¾„ç‚¹ï¼Œé€šè¿‡åœ¨æ¯ä¸€ä¸ªè·¯å¾„ç‚¹ä½ç½®ç»˜åˆ¶ç»¿è‰²çƒä½“æ¥è¾…åŠ©è°ƒè¯•ã€‚</span><br><span class="line">```cpp</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; Point : PathPoints)  <span class="comment">// éå†å¯¼èˆªè·¯å¾„ä¸­çš„æ‰€æœ‰ç‚¹</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> FVector&amp; Location = Point.Location;  <span class="comment">// è·å–å½“å‰è·¯å¾„ç‚¹çš„3Dä½ç½®åæ ‡</span></span><br><span class="line">    <span class="built_in">DrawDebugSphere</span>(           <span class="comment">// ç»˜åˆ¶è°ƒè¯•çƒä½“å‡½æ•°</span></span><br><span class="line">        <span class="built_in">GetWorld</span>(),            <span class="comment">// å‚æ•°1ï¼šè·å–å½“å‰æ¸¸æˆä¸–ç•Œä¸Šä¸‹æ–‡</span></span><br><span class="line">        Location,              <span class="comment">// å‚æ•°2ï¼šçƒä½“ä¸­å¿ƒä½ç½®(ä½¿ç”¨è·¯å¾„ç‚¹åæ ‡)</span></span><br><span class="line">        <span class="number">12.f</span>,                  <span class="comment">// å‚æ•°3ï¼šçƒä½“åŠå¾„(12å˜ç±³)</span></span><br><span class="line">        <span class="number">12</span>,                    <span class="comment">// å‚æ•°4ï¼šçƒä½“ç»†åˆ†ç²¾åº¦(12ä¸ªåˆ†æ®µ)</span></span><br><span class="line">        FColor::Green,         <span class="comment">// å‚æ•°5ï¼šçƒä½“é¢œè‰²(ç»¿è‰²)</span></span><br><span class="line">        <span class="literal">false</span>,                 <span class="comment">// å‚æ•°6ï¼šæ˜¯å¦æŒä¹…åŒ–(false=ä»…å½“å‰å¸§æ˜¾ç¤º)</span></span><br><span class="line">        <span class="number">10.f</span>                  <span class="comment">// å‚æ•°7ï¼šæ˜¾ç¤ºæŒç»­æ—¶é—´(10ç§’)</span></span><br><span class="line">    );</span><br><span class="line">&#125;```</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406173827.</span>png]]</span><br><span class="line">å¦‚æœè·ç¦»å°äºç­‰äºåŠå¾„è¿”å›<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250406175408.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å·¡é€»ç‚¹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å®šæ—¶å™¨</span><br><span class="line">![[Pasted image <span class="number">20250407212016.</span>png]]</span><br><span class="line"></span><br><span class="line">éœ€è¦å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°å°±æ˜¯éœ€è¦æ‰§è¡Œçš„å‡½æ•°</span><br><span class="line">å®šä¹‰ä¸€ä¸ªè®¡æ—¶å™¨ï¼š ==FTimerHandle TimerHandle;==</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç±»å‹è½¬æ¢</span><br><span class="line">![[Pasted image <span class="number">20250408184925.</span>png]]</span><br><span class="line"></span><br><span class="line"># HUD</span><br><span class="line">![[Pasted image <span class="number">20250408190840.</span>png]]</span><br><span class="line"></span><br><span class="line">ç”¨CPPç®¡ç†UI</span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250408192040.</span>png]]</span><br><span class="line"></span><br><span class="line">é€šè¿‡ç©å®¶æ§åˆ¶å™¨è®¿é—®HUDç„¶åè®¿é—®UIé‡Œçš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line"># æ ‡ç­¾</span><br><span class="line">![[Pasted image <span class="number">20250408193302.</span>png]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># æŠ›å°„ç‰©ç»„ä»¶</span><br><span class="line">![[Pasted image <span class="number">20250410203011.</span>png]]![[Pasted image <span class="number">20250410213746.</span>png]]</span><br><span class="line">![[Pasted image <span class="number">20250410214212.</span>png]]</span><br><span class="line">è·å–æ‰‹éƒ¨æ’æ§½ä½ç½®å¹¶ç”Ÿæˆç‰©ä½“</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å¸¸ç”¨è“å›¾æŠ€å·§</span><br><span class="line">![[Pasted image <span class="number">20250411111248.</span>png]]æŒ‚è½½ä¸€ä¸ªç‰©ä½“ç»™å¾„å‘åŠ›ï¼Œä¸€æ—¦è¢«å‡ ç§åˆ™åº”ç”¨è¿™ä¸ªåŠ›</span><br><span class="line">![[Pasted image <span class="number">20250411140025.</span>png]]</span><br><span class="line">è¿™ä¸ªå‡½æ•°ä¼šå°†ä½ ä¼ è¿›å»çš„å‘é‡èµ‹å€¼æ§åˆ¶å™¨è§†å£çš„ä½ç½®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![[Pasted image <span class="number">20250411140620.</span>png]]</span><br><span class="line">è¿™æ®µC++ ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºÂ `PrimaryInteract`Â çš„å‡½æ•°ï¼Œå±äºÂ `UInteractionComponent`-Actorç»„ä»¶ç±»ã€‚å…¶ä¸»è¦åŠŸèƒ½æ˜¯å®ç°ä¸€ä¸ªåŸºæœ¬çš„äº¤äº’é€»è¾‘ï¼šä»æ‹¥æœ‰è¯¥ç»„ä»¶çš„Actorçš„è§†è§’å‘å°„ä¸€æ¡å°„çº¿ï¼Œæ£€æµ‹æ˜¯å¦ä¸åŠ¨æ€ä¸–ç•Œç±»å‹çš„ç‰©ä½“å‘ç”Ÿç¢°æ’ï¼Œå¦‚æœç¢°æ’åˆ°äº†å®ç°äº†Â `ISGameplayInterface`Â æ¥å£çš„Actorï¼Œåˆ™è°ƒç”¨è¯¥Actorçš„Â `Execute_Interact`Â å‡½æ•°æ¥æ‰§è¡Œäº¤äº’æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">### ä»£ç é€è¡Œè§£æ</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> â€‹**â€‹å‡½æ•°å£°æ˜â€‹**â€‹ï¼š</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line"><span class="type">void</span> UInteractionComponent::<span class="built_in">PrimaryInteract</span>()</span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¿™æ˜¯Â <code>UInteractionComponent</code>Â ç±»ä¸­çš„Â <code>PrimaryInteract</code>Â å‡½æ•°å£°æ˜ï¼Œè¿”å›ç±»å‹ä¸ºÂ <code>void</code>ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ã€‚</p>
<ol start="2">
<li>â€‹<strong>â€‹è®¾ç½®ç¢°æ’æŸ¥è¯¢å‚æ•°â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FCollisionObjectQueryParams ObjectQueryParams;</span><br><span class="line">ObjectQueryParams.<span class="built_in">AddObjectTypesToQuery</span>(ECC_WorldDynamic);</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ªÂ <code>FCollisionObjectQueryParams</code>Â ç±»å‹çš„å¯¹è±¡Â <code>ObjectQueryParams</code>ï¼Œç”¨äºè®¾ç½®å°„çº¿æ£€æµ‹æ—¶è¦æŸ¥è¯¢çš„å¯¹è±¡ç±»å‹ï¼Œè¿™é‡Œæ·»åŠ äº†Â <code>ECC_WorldDynamic</code>Â ç±»å‹ï¼Œå³åŠ¨æ€ä¸–ç•Œç±»å‹çš„ç‰©ä½“ã€‚</p>
<ol start="3">
<li>â€‹<strong>â€‹è·å–æ‹¥æœ‰è€…Actorçš„ç›¸å…³ä¿¡æ¯â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AActor* MyOwner = <span class="built_in">GetOwner</span>();</span><br><span class="line">FVector EyeLocation;</span><br><span class="line">FRotator EyeRotation;</span><br><span class="line">MyOwner-&gt;<span class="built_in">GetActorEyesViewPoint</span>(EyeLocation, EyeRotation);</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡Â <code>GetOwner()</code>Â è·å–æ‹¥æœ‰è¯¥ç»„ä»¶çš„Actorï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨Â <code>MyOwner</code>Â ä¸­ã€‚ç„¶åè°ƒç”¨Â <code>GetActorEyesViewPoint</code>Â å‡½æ•°è·å–è¯¥Actorçš„è§†è§’ä½ç½®Â <code>EyeLocation</code>Â å’Œè§†è§’æ—‹è½¬Â <code>EyeRotation</code>ã€‚</p>
<ol start="4">
<li>â€‹<strong>â€‹è®¡ç®—å°„çº¿ç»ˆç‚¹â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FVector End = EyeLocation + (EyeRotation.<span class="built_in">Vector</span>()) * <span class="number">1000</span>;</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®è§†è§’ä½ç½®Â <code>EyeLocation</code>Â å’Œè§†è§’æ–¹å‘ï¼ˆé€šè¿‡Â <code>EyeRotation.Vector()</code>Â è·å–æ–¹å‘å‘é‡ï¼‰ï¼Œè®¡ç®—å‡ºå°„çº¿å»¶ä¼¸1000å•ä½é•¿åº¦åçš„ç»ˆç‚¹Â <code>End</code>ã€‚</p>
<ol start="5">
<li>â€‹<strong>â€‹è¿›è¡Œå°„çº¿æ£€æµ‹â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FHitResult Hit;</span><br><span class="line"><span class="built_in">GetWorld</span>()-&gt;<span class="built_in">LineTraceSingleByObjectType</span>(Hit, EyeLocation, End, ObjectQueryParams);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Â <code>GetWorld()-&gt;LineTraceSingleByObjectType</code>Â å‡½æ•°è¿›è¡Œä¸€æ¬¡åŸºäºå¯¹è±¡ç±»å‹çš„å°„çº¿æ£€æµ‹ï¼Œå°†æ£€æµ‹ç»“æœå­˜å‚¨åœ¨Â <code>Hit</code>Â ä¸­ã€‚<code>Hit</code>Â æ˜¯ä¸€ä¸ªÂ <code>FHitResult</code>Â ç±»å‹çš„å˜é‡ï¼Œç”¨äºå­˜å‚¨å°„çº¿ä¸ç‰©ä½“ç¢°æ’çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<ol start="6">
<li>â€‹<strong>â€‹è·å–ç¢°æ’åˆ°çš„Actorå¹¶æ‰§è¡Œäº¤äº’â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">AActor* HitActor = Hit.<span class="built_in">GetActor</span>();</span><br><span class="line"><span class="keyword">if</span> (HitActor)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (HitActor-&gt;<span class="built_in">Implements</span>&lt;ISGameplayInterface&gt;())</span><br><span class="line">    &#123;</span><br><span class="line">        APawn* MyPawn = <span class="built_in">Cast</span>&lt;APawn&gt;(MyOwner);</span><br><span class="line">        ISGameplayInterface::<span class="built_in">Execute_Interact</span>(HitActor, MyPawn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆé€šè¿‡Â <code>Hit.GetActor()</code>Â è·å–ç¢°æ’åˆ°çš„Actorï¼Œå¹¶å­˜å‚¨åœ¨Â <code>HitActor</code>Â ä¸­ã€‚å¦‚æœÂ <code>HitActor</code>Â ä¸ä¸ºç©ºï¼Œåˆ™æ£€æŸ¥è¯¥Actoræ˜¯å¦å®ç°äº†Â <code>ISGameplayInterface</code>Â æ¥å£ã€‚å¦‚æœå®ç°äº†ï¼Œå°†æ‹¥æœ‰è¯¥ç»„ä»¶çš„Actorè½¬æ¢ä¸ºÂ <code>APawn</code>Â ç±»å‹ï¼ˆå­˜å‚¨åœ¨Â <code>MyPawn</code>Â ä¸­ï¼‰ï¼Œç„¶åè°ƒç”¨Â <code>ISGameplayInterface::Execute_Interact</code>Â å‡½æ•°ï¼Œä¼ å…¥ç¢°æ’åˆ°çš„Actorå’Œæ‹¥æœ‰è€…çš„Pawnï¼Œä»¥æ‰§è¡Œäº¤äº’æ“ä½œã€‚</p>
<h3 id="å¯èƒ½çš„æ”¹è¿›æ–¹å‘æˆ–æ³¨æ„äº‹é¡¹"><a href="#å¯èƒ½çš„æ”¹è¿›æ–¹å‘æˆ–æ³¨æ„äº‹é¡¹" class="headerlink" title="å¯èƒ½çš„æ”¹è¿›æ–¹å‘æˆ–æ³¨æ„äº‹é¡¹"></a>å¯èƒ½çš„æ”¹è¿›æ–¹å‘æˆ–æ³¨æ„äº‹é¡¹</h3><ol>
<li>â€‹<strong>â€‹é”™è¯¯å¤„ç†â€‹</strong>â€‹ï¼šç›®å‰ä»£ç æ²¡æœ‰å¯¹Â <code>Cast&lt;APawn&gt;(MyOwner)</code>Â å¯èƒ½å¤±è´¥çš„æƒ…å†µè¿›è¡Œå¤„ç†ã€‚å¦‚æœÂ <code>MyOwner</code>Â ä¸æ˜¯Â <code>APawn</code>Â ç±»å‹ï¼Œ<code>Cast</code>Â å°†è¿”å›Â <code>nullptr</code>ï¼Œåç»­è°ƒç”¨Â <code>Execute_Interact</code>Â å¯èƒ½ä¼šå¯¼è‡´å´©æºƒï¼Œåº”è¯¥æ·»åŠ ç›¸åº”çš„é”™è¯¯å¤„ç†é€»è¾‘ã€‚</li>
<li>â€‹<strong>â€‹å°„çº¿é•¿åº¦â€‹</strong>â€‹ï¼šå°„çº¿é•¿åº¦å›ºå®šä¸º1000å•ä½ï¼Œè¿™å¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶è®¾ç½®ä¸ºå¯é…ç½®çš„å‚æ•°ï¼Œä»¥ä¾¿æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚</li>
<li>â€‹<strong>â€‹æ¥å£æ£€æŸ¥â€‹</strong>â€‹ï¼šåœ¨è°ƒç”¨Â <code>Implements&lt;ISGameplayInterface&gt;()</code>Â ä¹‹å‰ï¼Œå¯ä»¥è€ƒè™‘å…ˆæ£€æŸ¥Â <code>HitActor</code>Â æ˜¯å¦ä¸ºÂ <code>nullptr</code>ï¼Œä»¥é¿å…æ½œåœ¨çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
</ol>
<p>![[Pasted image 20250411141402.png]]<br>ä¸»è¦åŠŸèƒ½æ˜¯è¿›è¡Œå°„çº¿æ£€æµ‹ï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>SweepMultiByObjectType</code>ï¼Œæ£€æµ‹ç‰¹å®šç±»å‹å¯¹è±¡ï¼‰ï¼Œå¹¶åœ¨æ£€æµ‹åˆ°ç¢°æ’æ—¶æ‰§è¡Œä¸€äº›äº¤äº’é€»è¾‘ï¼ŒåŒæ—¶ç»˜åˆ¶è°ƒè¯•ä¿¡æ¯æ¥å¯è§†åŒ–æ£€æµ‹ç»“æœã€‚</p>
<h3 id="ä»£ç è¯¦ç»†è§£é‡Š"><a href="#ä»£ç è¯¦ç»†è§£é‡Š" class="headerlink" title="ä»£ç è¯¦ç»†è§£é‡Š"></a>ä»£ç è¯¦ç»†è§£é‡Š</h3><ol>
<li>â€‹<strong>â€‹å˜é‡å£°æ˜ä¸åˆå§‹åŒ–â€‹</strong>â€‹ï¼š<ul>
<li><code>TArray&lt;FHitResult&gt; Hits;</code>ï¼šå£°æ˜ä¸€ä¸ªæ•°ç»„<code>Hits</code>ï¼Œç”¨äºå­˜å‚¨å°„çº¿æ£€æµ‹åˆ°çš„ç¢°æ’ç»“æœã€‚</li>
<li><code>float Radius = 30.f;</code>ï¼šå®šä¹‰ä¸€ä¸ªæµ®ç‚¹æ•°å˜é‡<code>Radius</code>ï¼Œè¡¨ç¤ºæ£€æµ‹å½¢çŠ¶ï¼ˆè¿™é‡Œæ˜¯çƒä½“ï¼‰çš„åŠå¾„ä¸º30ä¸ªå•ä½ã€‚</li>
<li><code>FCollisionShape Shape;</code>ï¼šå£°æ˜ä¸€ä¸ªç¢°æ’å½¢çŠ¶å¯¹è±¡<code>Shape</code>ã€‚</li>
<li><code>Shape.SetSphere(Radius);</code>ï¼šå°†<code>Shape</code>è®¾ç½®ä¸ºä¸€ä¸ªåŠå¾„ä¸º<code>Radius</code>çš„çƒä½“å½¢çŠ¶ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹å°„çº¿æ£€æµ‹â€‹</strong>â€‹ï¼š<ul>
<li><code>bool bBlockingHit = GetWorld()-&gt;SweepMultiByObjectType(Hits, EyeLocation, End, FQuat::Identity, ObjectQueryParams, Shape);</code></li>
<li>ä½¿ç”¨<code>SweepMultiByObjectType</code>å‡½æ•°åœ¨æ¸¸æˆä¸–ç•Œä¸­è¿›è¡Œå°„çº¿æ£€æµ‹ã€‚å®ƒä»<code>EyeLocation</code>ä½ç½®å¼€å§‹ï¼Œåˆ°<code>End</code>ä½ç½®ç»“æŸï¼Œä½¿ç”¨å•ä½å››å…ƒæ•°ï¼ˆè¡¨ç¤ºæ²¡æœ‰æ—‹è½¬ï¼‰<code>FQuat::Identity</code>ï¼Œæ ¹æ®<code>ObjectQueryParams</code>æŒ‡å®šçš„å¯¹è±¡ç±»å‹æŸ¥è¯¢å‚æ•°ï¼Œä»¥åŠå‰é¢å®šä¹‰çš„çƒä½“å½¢çŠ¶<code>Shape</code>ï¼Œå°†æ£€æµ‹åˆ°çš„ç¢°æ’ç»“æœå­˜å‚¨åœ¨<code>Hits</code>æ•°ç»„ä¸­ï¼Œå¹¶è¿”å›æ˜¯å¦å‘ç”Ÿäº†é˜»æŒ¡ç¢°æ’ï¼ˆå³æ˜¯å¦æœ‰ç‰©ä½“å®Œå…¨æŒ¡ä½äº†å°„çº¿ï¼‰ï¼Œç»“æœå­˜å‚¨åœ¨<code>bBlockingHit</code>ä¸­ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹è®¾ç½®çº¿æ¡é¢œè‰²â€‹</strong>â€‹ï¼š<ul>
<li><code>FColor LineColor = bBlockingHit? FColor::Green : FColor::Red;</code>ï¼šæ ¹æ®æ˜¯å¦æœ‰é˜»æŒ¡ç¢°æ’ï¼ˆ<code>bBlockingHit</code>ï¼‰æ¥è®¾ç½®çº¿æ¡é¢œè‰²ï¼Œå¦‚æœæœ‰é˜»æŒ¡ç¢°æ’åˆ™ä¸ºç»¿è‰²ï¼Œå¦åˆ™ä¸ºçº¢è‰²ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹éå†ç¢°æ’ç»“æœå¹¶æ‰§è¡Œäº¤äº’é€»è¾‘â€‹</strong>â€‹ï¼š<ul>
<li><code>for (FHitResult Hit : Hits)</code>ï¼šéå†<code>Hits</code>æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªç¢°æ’ç»“æœã€‚</li>
<li><code>AActor* HitActor = Hit.GetActor();</code>ï¼šè·å–ç¢°æ’åˆ°çš„Actorå¯¹è±¡ã€‚</li>
<li><code>if (HitActor)</code>ï¼šæ£€æŸ¥ç¢°æ’åˆ°çš„Actoræ˜¯å¦å­˜åœ¨ã€‚</li>
<li><code>if (HitActor-&gt;Implements&lt;USGameplayInterface&gt;())</code>ï¼šæ£€æŸ¥ç¢°æ’åˆ°çš„Actoræ˜¯å¦å®ç°äº†<code>USGameplayInterface</code>æ¥å£ã€‚</li>
<li>å¦‚æœä¸Šè¿°æ¡ä»¶éƒ½æ»¡è¶³ï¼š<ul>
<li><code>APawn* MyPawn = Cast&lt;APawn&gt;(MyOwner);</code>ï¼šå°è¯•å°†<code>MyOwner</code>è½¬æ¢ä¸º<code>APawn</code>ç±»å‹ï¼ˆå‡è®¾<code>MyOwner</code>æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æŒ‡é’ˆï¼Œè¿™é‡Œå¯èƒ½æ˜¯å½“å‰Actorçš„æ‹¥æœ‰è€…ä¹‹ç±»çš„å¯¹è±¡ï¼‰ã€‚</li>
<li><code>ISGameplayInterface::Execute_Interact(HitActor, MyPawn);</code>ï¼šè°ƒç”¨å®ç°äº†<code>USGameplayInterface</code>æ¥å£çš„Actorçš„<code>Interact</code>å‡½æ•°ï¼Œä¼ å…¥ç¢°æ’åˆ°çš„Actorå’Œå½“å‰Pawnå¯¹è±¡ï¼Œæ‰§è¡Œäº¤äº’é€»è¾‘ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>â€‹<strong>â€‹ç»˜åˆ¶è°ƒè¯•ä¿¡æ¯â€‹</strong>â€‹ï¼š<ul>
<li><code>DrawDebugSphere(GetWorld(), Hit.ImpactPoint, Radius, 32, LineColor, false, 2.0f);</code>ï¼šåœ¨ç¢°æ’ç‚¹ï¼ˆ<code>Hit.ImpactPoint</code>ï¼‰å¤„ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º<code>Radius</code>çš„çƒä½“ä½œä¸ºè°ƒè¯•å¯è§†åŒ–ï¼Œä½¿ç”¨<code>LineColor</code>é¢œè‰²ï¼Œä¸æŒä¹…åŒ–ï¼ˆ<code>false</code>ï¼‰ï¼Œçº¿æ¡å®½åº¦ä¸º2.0ä¸ªå•ä½ã€‚</li>
<li><code>DrawDebugLine(GetWorld(), EyeLocation, End, LineColor, false, 2.0f, 0, 2.0f);</code>ï¼šç»˜åˆ¶ä¸€æ¡ä»<code>EyeLocation</code>åˆ°<code>End</code>çš„çº¿æ¡ä½œä¸ºè°ƒè¯•å¯è§†åŒ–ï¼Œä½¿ç”¨<code>LineColor</code>é¢œè‰²ï¼Œä¸æŒä¹…åŒ–ï¼Œçº¿æ¡å®½åº¦ä¸º2.0ä¸ªå•ä½ï¼Œçº¿æ¡çš„ç”Ÿå‘½å‘¨æœŸä¸º2.0ç§’ï¼ˆæœ€åä¸€ä¸ªå‚æ•°<code>2.0f</code>è¡¨ç¤ºç”Ÿå‘½å‘¨æœŸï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p><code>SweepMultiByObjectType</code>Â æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå¤šå¯¹è±¡ç±»å‹å°„çº¿æ£€æµ‹çš„å‡½æ•°ï¼Œä»¥ä¸‹æ˜¯å¯¹å®ƒçš„è¯¦ç»†è§£é‡Šï¼š</p>
<h3 id="SweepMultiByObjectTypeå¤šå¯¹è±¡æ£€æµ‹å‡½æ•°åŸå‹"><a href="#SweepMultiByObjectTypeå¤šå¯¹è±¡æ£€æµ‹å‡½æ•°åŸå‹" class="headerlink" title="SweepMultiByObjectTypeå¤šå¯¹è±¡æ£€æµ‹å‡½æ•°åŸå‹"></a>SweepMultiByObjectTypeå¤šå¯¹è±¡æ£€æµ‹å‡½æ•°åŸå‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SweepMultiByObjectType</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    TArray&lt;FHitResult&gt;&amp; OutHits,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FVector&amp; Start,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FVector&amp; End,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FQuat&amp; Rot,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FCollisionQueryParams&amp; Params,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FCollisionObjectQueryParams&amp; ObjectParams,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> FCollisionShape&amp; Shape</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><ol>
<li>â€‹<strong>â€‹<code>OutHits</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>TArray&lt;FHitResult&gt;&amp;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ£€æµ‹åˆ°çš„ç¢°æ’ç»“æœã€‚æ¯ä¸ªÂ <code>FHitResult</code>Â ç»“æ„ä½“åŒ…å«äº†å…³äºç¢°æ’çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚ç¢°æ’ç‚¹çš„ä½ç½®ï¼ˆ<code>ImpactPoint</code>ï¼‰ã€æ³•çº¿ï¼ˆ<code>ImpactNormal</code>ï¼‰ã€ç¢°æ’çš„ Actorï¼ˆ<code>GetActor()</code>ï¼‰ç­‰ã€‚å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°†æ‰€æœ‰æ£€æµ‹åˆ°çš„ç¢°æ’ç»“æœå¡«å……åˆ°è¿™ä¸ªæ•°ç»„ä¸­ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>Start</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FVector&amp;</code>ï¼Œè¡¨ç¤ºå°„çº¿çš„èµ·å§‹ä½ç½®ï¼Œå³å°„çº¿ä»å“ªé‡Œå¼€å§‹å‘å°„ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>End</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FVector&amp;</code>ï¼Œè¡¨ç¤ºå°„çº¿çš„ç»“æŸä½ç½®ï¼Œå°„çº¿ä»èµ·å§‹ç‚¹æ²¿ç€ç›´çº¿æ–¹å‘å»¶ä¼¸åˆ°è¿™ä¸ªä½ç½®ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>Rot</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FQuat&amp;</code>ï¼Œå››å…ƒæ•°ï¼Œç”¨äºè¡¨ç¤ºå°„çº¿çš„æ—‹è½¬æ–¹å‘ã€‚å¦‚æœå°„çº¿æ˜¯æ²¿ç€ä¸–ç•Œåæ ‡ç³»çš„æŸä¸ªè½´å‘ï¼ˆæ¯”å¦‚Xè½´ã€Yè½´ã€Zè½´ï¼‰æˆ–è€…æ²¡æœ‰æ—‹è½¬ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨Â <code>FQuat::Identity</code>Â æ¥è¡¨ç¤ºæ²¡æœ‰æ—‹è½¬ï¼ˆå•ä½å››å…ƒæ•°ï¼‰ã€‚å››å…ƒæ•°æ˜¯ä¸€ç§åœ¨ä¸‰ç»´ç©ºé—´ä¸­è¡¨ç¤ºæ—‹è½¬çš„æ•°å­¦ç»“æ„ï¼Œå®ƒèƒ½å¤Ÿé¿å…ä¸‡å‘èŠ‚é”ç­‰é—®é¢˜ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>Params</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FCollisionQueryParams&amp;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºé…ç½®å°„çº¿æ£€æµ‹çš„ä¸€äº›å‚æ•°ã€‚å®ƒå¯ä»¥è®¾ç½®è¯¸å¦‚æ˜¯å¦å¿½ç•¥ç‰¹å®šçš„ Actorã€æ˜¯å¦è¿›è¡Œå¤æ‚çš„ç¢°æ’æµ‹è¯•ï¼ˆå¦‚è€ƒè™‘ç‰©ç†æè´¨ç­‰ï¼‰ã€æ£€æµ‹çš„å±‚æ¬¡ç»“æ„ç­‰ç›¸å…³é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®Â <code>Params.AddIgnoredActor(SomeActor)</code>Â æ¥è®©æ£€æµ‹å¿½ç•¥æŸä¸ªç‰¹å®šçš„ Actorã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>ObjectParams</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FCollisionObjectQueryParams&amp;</code>ï¼Œè¿™ä¸ªç»“æ„ä½“ç”¨äºæŒ‡å®šè¦æ£€æµ‹çš„å¯¹è±¡ç±»å‹ã€‚å¯ä»¥è®¾ç½®æ£€æµ‹å“ªäº›ç±»åˆ«çš„å¯¹è±¡ï¼Œæ¯”å¦‚åªæ£€æµ‹é™æ€ç½‘æ ¼ä½“ï¼ˆStatic Meshesï¼‰ã€è§’è‰²ï¼ˆCharactersï¼‰ã€å¯ç§»åŠ¨çš„å¹³å°ï¼ˆMovable Platformsï¼‰ç­‰ã€‚å¸¸è§çš„ç”¨æ³•æœ‰Â <code>FCollisionObjectQueryParams::AllObjects</code>Â è¡¨ç¤ºæ£€æµ‹æ‰€æœ‰ç±»å‹çš„å¯¹è±¡ï¼Œæˆ–è€…é€šè¿‡æ„é€ å‡½æ•°æŒ‡å®šç‰¹å®šçš„å¯¹è±¡ç±»å‹é›†åˆï¼Œå¦‚Â <code>FCollisionObjectQueryParams(ECollisionChannel::ECC_WorldStatic | ECollisionChannel::ECC_WorldDynamic)</code>Â è¡¨ç¤ºæ£€æµ‹é™æ€å’ŒåŠ¨æ€çš„ä¸–ç•Œå¯¹è±¡ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>Shape</code>â€‹</strong>â€‹ï¼š<ul>
<li>ç±»å‹ï¼š<code>const FCollisionShape&amp;</code>ï¼Œè¡¨ç¤ºç”¨äºæ£€æµ‹çš„å½¢çŠ¶ã€‚å¯ä»¥æ˜¯çƒä½“ï¼ˆé€šè¿‡Â <code>SetSphere</code>Â æ–¹æ³•è®¾ç½®åŠå¾„ï¼‰ã€èƒ¶å›Šä½“ï¼ˆ<code>SetCapsule</code>Â æ–¹æ³•è®¾ç½®åŠå¾„å’Œé«˜åº¦ç­‰å‚æ•°ï¼‰ã€ç›’å­ï¼ˆ<code>SetBox</code>Â æ–¹æ³•è®¾ç½®å°ºå¯¸ï¼‰ç­‰å¤šç§å½¢çŠ¶ã€‚åœ¨ç»™å®šçš„ä»£ç ä¸­ï¼Œå°±æ˜¯ä½¿ç”¨çƒä½“å½¢çŠ¶è¿›è¡Œæ£€æµ‹ã€‚</li>
</ul>
</li>
</ol>
<h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><ul>
<li>ç±»å‹ï¼š<code>bool</code>ï¼Œå¦‚æœå°„çº¿åœ¨æ£€æµ‹è¿‡ç¨‹ä¸­é‡åˆ°äº†é˜»æŒ¡ï¼ˆå³æœ‰å¯¹è±¡å®Œå…¨æŒ¡ä½äº†å°„çº¿ï¼‰ï¼Œåˆ™è¿”å›Â <code>true</code>ï¼›å¦‚æœæ²¡æœ‰é‡åˆ°é˜»æŒ¡ï¼ˆå°„çº¿ä¸€ç›´ç•…é€šæ— é˜»åœ°åˆ°è¾¾äº†ç»ˆç‚¹ï¼‰ï¼Œåˆ™è¿”å›Â <code>false</code>ã€‚</li>
</ul>
<p>![[Pasted image 20250411142213.png]]</p>
<h2 id="è™šå¹»å®šæ—¶å™¨"><a href="#è™šå¹»å®šæ—¶å™¨" class="headerlink" title="è™šå¹»å®šæ—¶å™¨"></a>è™šå¹»å®šæ—¶å™¨</h2><p>![[Pasted image 20250411142913.png]]<br>è¿™æ®µä»£ç æ˜¯ä½¿ç”¨C++åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­è¿›è¡Œå®šæ—¶å™¨çš„è®¾ç½®æ“ä½œã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ul>
<li><code>GetWorldTimerManager()</code>Â ç”¨äºè·å–å½“å‰ä¸–ç•Œä¸Šä¸‹æ–‡å¯¹è±¡å…³è”çš„å®šæ—¶å™¨ç®¡ç†å™¨ï¼ˆ<code>FTimerManager</code>ï¼‰ï¼Œå®ƒæ˜¯è™šå¹»å¼•æ“ä¸­ç”¨äºç®¡ç†å®šæ—¶ä»»åŠ¡çš„ä¸€ä¸ªé‡è¦ç»„ä»¶ï¼Œå¯ä»¥ç”¨æ¥å¯åŠ¨ã€åœæ­¢ã€é‡ç½®å®šæ—¶å™¨ç­‰æ“ä½œã€‚</li>
<li><code>SetTimer()</code>Â æ˜¯Â <code>FTimerManager</code>Â çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äºè®¾ç½®ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚è¿™é‡Œè®¾ç½®çš„å®šæ—¶å™¨ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ï¼š<ul>
<li><code>TimerHandle_PrimaryAttack</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå®šæ—¶å™¨å¥æŸ„ï¼ˆ<code>FTimerHandle</code>Â ç±»å‹ï¼‰ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†è¿™ä¸ªå®šæ—¶å™¨ï¼Œåç»­å¯ä»¥é€šè¿‡è¿™ä¸ªå¥æŸ„æ¥å¯¹å®šæ—¶å™¨è¿›è¡Œæ“ä½œï¼ˆæ¯”å¦‚åœæ­¢å®ƒç­‰ï¼‰ã€‚</li>
<li><code>this</code>ï¼šè¡¨ç¤ºå®šæ—¶å™¨å›è°ƒå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå³å½“å‰å¯¹è±¡æœ¬èº«ï¼Œå½“å®šæ—¶å™¨åˆ°æœŸè§¦å‘å›è°ƒæ—¶ï¼Œä¼šåœ¨è¿™ä¸ªå¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</li>
<li><code>ASCharacter::PrimaryAttack_TimeElapsed</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆï¼ŒæŒ‡å®šå®šæ—¶å™¨åˆ°æœŸæ—¶è¦è°ƒç”¨çš„å‡½æ•°ï¼Œä»å‘½åæ¥çœ‹ï¼Œå®ƒåº”è¯¥æ˜¯Â <code>ASCharacter</code>Â ç±»ä¸­çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼ŒåŠŸèƒ½å¯èƒ½æ˜¯å¤„ç†è§’è‰²ä¸»æ”»å‡»çš„æ—¶é—´æµé€ç›¸å…³é€»è¾‘ã€‚</li>
<li><code>0.2f</code>ï¼šè¡¨ç¤ºå®šæ—¶å™¨çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œå³ä»è°ƒç”¨Â <code>SetTimer</code>Â å‡½æ•°å¼€å§‹ï¼Œç»è¿‡ 0.2 ç§’åï¼Œ<code>ASCharacter::PrimaryAttack_TimeElapsed</code>Â è¿™ä¸ªå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å±æ€§ç»„ä»¶å¸¸ç”¨æ–¹æ³•"><a href="#å±æ€§ç»„ä»¶å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å±æ€§ç»„ä»¶å¸¸ç”¨æ–¹æ³•"></a>å±æ€§ç»„ä»¶å¸¸ç”¨æ–¹æ³•</h3><p>![[Pasted image 20250411152529.png]]</p>
<ol>
<li>é¦–å…ˆæ£€æŸ¥Â <code>OtherActor</code>Â æ˜¯å¦å­˜åœ¨ï¼ˆå³ä¸ä¸ºÂ <code>nullptr</code>ï¼‰ã€‚</li>
<li>å¦‚æœÂ <code>OtherActor</code>Â å­˜åœ¨ï¼Œå°è¯•ä»Â <code>OtherActor</code>Â ä¸Šé€šè¿‡Â <code>GetComponentByClass</code>Â æ–¹æ³•è·å–ä¸€ä¸ªç±»å‹ä¸ºÂ <code>USAttributeComponent</code>Â çš„ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨Â <code>Cast</code>Â å‡½æ•°å°†å…¶è½¬æ¢ä¸ºÂ <code>USAttributeComponent*</code>Â ç±»å‹çš„æŒ‡é’ˆÂ <code>AttributeComp</code>ã€‚</li>
<li>æ¥ç€æ£€æŸ¥Â <code>AttributeComp</code>Â æ˜¯å¦æˆåŠŸè·å–åˆ°ï¼ˆå³ä¸ä¸ºÂ <code>nullptr</code>ï¼‰ã€‚</li>
<li>å¦‚æœÂ <code>AttributeComp</code>Â å­˜åœ¨ï¼Œè°ƒç”¨å…¶Â <code>ApplyHealthChange</code>Â æ–¹æ³•ï¼Œä¼ å…¥å‚æ•°Â <code>-20.0f</code>ï¼Œè¿™å¾ˆå¯èƒ½æ˜¯ç”¨äºå‡å°‘æŸä¸ªè§’è‰²æˆ–å¯¹è±¡çš„å¥åº·å€¼ï¼ˆä¾‹å¦‚åœ¨æ¸¸æˆä¸­è®©ç›®æ ‡æ‰è¡€20ç‚¹</li>
</ol>
<p>![[Pasted image 20250411173007.png]]</p>
<p>è¿™æ®µC++ ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºÂ <code>ApplyHealthChange</code>Â çš„å‡½æ•°ï¼Œå±äºÂ <code>USAAttributeComponent</code>Â ç±»ã€‚è¯¥å‡½æ•°çš„ä¸»è¦åŠŸèƒ½æ˜¯å¤„ç†è§’è‰²ï¼ˆç”±Â <code>AActor</code>Â æŒ‡é’ˆÂ <code>InstigatorActor</code>Â è¡¨ç¤ºï¼‰çš„å¥åº·å€¼å˜åŒ–ã€‚</p>
<h3 id="ä»£ç è¯¦ç»†è§£é‡Š-1"><a href="#ä»£ç è¯¦ç»†è§£é‡Š-1" class="headerlink" title="ä»£ç è¯¦ç»†è§£é‡Š"></a>ä»£ç è¯¦ç»†è§£é‡Š</h3><ol>
<li>â€‹<strong>â€‹ä¼¤å®³å¯è¡Œæ€§æ£€æŸ¥â€‹</strong>â€‹ï¼š<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">GetOwner</span>()-&gt;<span class="built_in">CanBeDamaged</span>())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¿™éƒ¨åˆ†ä»£ç æ£€æŸ¥æ‹¥æœ‰è¯¥å±æ€§ç»„ä»¶çš„å¯¹è±¡ï¼ˆé€šè¿‡Â <code>GetOwner()</code>Â è·å–ï¼‰æ˜¯å¦å¯ä»¥è¢«ä¼¤å®³ã€‚å¦‚æœä¸èƒ½è¢«ä¼¤å®³ï¼Œå‡½æ•°ç›´æ¥è¿”å›Â <code>false</code>ï¼Œè¡¨ç¤ºå¥åº·å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚<br>2. â€‹<strong>â€‹è®°å½•æ—§å¥åº·å€¼å¹¶æ›´æ–°å¥åº·å€¼â€‹</strong>â€‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> OldHealth = Health;</span><br><span class="line">Health = FMath::<span class="built_in">Clamp</span>(Health + Delta, <span class="number">0.0f</span>, HealthMax);</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆè®°å½•å½“å‰çš„å¥åº·å€¼åˆ°Â <code>OldHealth</code>Â å˜é‡ä¸­ã€‚ç„¶åï¼Œé€šè¿‡Â <code>FMath::Clamp</code>Â å‡½æ•°å°†å½“å‰å¥åº·å€¼åŠ ä¸ŠÂ <code>Delta</code>ï¼ˆä¼ å…¥çš„å¥åº·å˜åŒ–å€¼ï¼‰ï¼Œå¹¶é™åˆ¶åœ¨Â <code>0.0f</code>Â åˆ°Â <code>HealthMax</code>ï¼ˆæœ€å¤§å¥åº·å€¼ï¼‰ä¹‹é—´ï¼Œæ›´æ–°å½“å‰çš„å¥åº·å€¼ã€‚</p>
<ol start="3">
<li>â€‹<strong>â€‹è®¡ç®—å®é™…å¥åº·å˜åŒ–å€¼å¹¶å¹¿æ’­äº‹ä»¶â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> ActualDelta = Health - OldHealth;</span><br><span class="line">OnHealthChanged.<span class="built_in">Broadcast</span>(InstigatorActor, <span class="keyword">this</span>, Health, ActualDelta);</span><br></pre></td></tr></table></figure>

<p>è®¡ç®—å®é™…çš„å¥åº·å˜åŒ–å€¼Â <code>ActualDelta</code>ï¼Œå¹¶é€šè¿‡Â <code>OnHealthChanged</code>Â äº‹ä»¶å¹¿æ’­è¿™ä¸ªå˜åŒ–ï¼Œå°†Â <code>InstigatorActor</code>ã€å½“å‰çš„Â <code>USAAttributeComponent</code>Â å¯¹è±¡ã€å½“å‰å¥åº·å€¼ä»¥åŠå®é™…å˜åŒ–å€¼ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</p>
<ol start="4">
<li>â€‹<strong>â€‹å¤„ç†è§’è‰²æ­»äº¡æƒ…å†µâ€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (ActualDelta &lt; <span class="number">0.0f</span> &amp;&amp; Health == <span class="number">0.0f</span>)</span><br><span class="line">&#123;</span><br><span class="line">    ASGameModeBase* GM = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">GetAuthGameMode</span>&lt;ASGameModeBase&gt;();</span><br><span class="line">    <span class="keyword">if</span> (GM)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå¯ä»¥æ·»åŠ è§’è‰²æ­»äº¡åçš„å¤„ç†é€»è¾‘ï¼Œç›®å‰ä¸ºç©º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å®é™…å¥åº·å˜åŒ–å€¼ä¸ºè´Ÿï¼ˆå³å¥åº·å€¼å‡å°‘ï¼‰ä¸”å½“å‰å¥åº·å€¼å˜ä¸ºÂ <code>0</code>Â æ—¶ï¼Œè·å–å½“å‰ä¸–ç•Œçš„æˆæƒæ¸¸æˆæ¨¡å¼å¯¹è±¡Â <code>GM</code>ï¼ˆç±»å‹ä¸ºÂ <code>ASGameModeBase</code>ï¼‰ã€‚å¦‚æœè·å–æˆåŠŸï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ¡ä»¶å—ä¸­æ·»åŠ è§’è‰²æ­»äº¡åçš„å¤„ç†é€»è¾‘ï¼Œç›®å‰è¿™éƒ¨åˆ†ä»£ç å—ä¸ºç©ºã€‚</p>
<ol start="5">
<li>â€‹<strong>â€‹è¿”å›ç»“æœâ€‹</strong>â€‹ï¼š</li>
</ol>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ActualDelta != <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>å‡½æ•°æœ€åè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå®é™…å¥åº·å€¼æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼ˆå³Â <code>ActualDelta</code>Â æ˜¯å¦ä¸ç­‰äºÂ <code>0</code>ï¼‰ã€‚</p>
<h2 id="è™šå¹»è°ƒè¯•æ–¹æ³•"><a href="#è™šå¹»è°ƒè¯•æ–¹æ³•" class="headerlink" title="è™šå¹»è°ƒè¯•æ–¹æ³•"></a>è™šå¹»è°ƒè¯•æ–¹æ³•</h2><p>åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­ï¼Œ<code>ensure</code>Â æ˜¯ä¸€ä¸ªç”¨äºè°ƒè¯•å’Œé”™è¯¯å¤„ç†çš„å®ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©å¼€å‘è€…æ•æ‰å’ŒéªŒè¯ä»£ç ä¸­çš„å‡è®¾æ¡ä»¶æ˜¯å¦æˆç«‹ã€‚ä¸Â <code>check</code>Â å®ä¸åŒï¼Œ<code>ensure</code>Â åœ¨æ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸ä¼šç«‹å³ä¸­æ–­ç¨‹åºæ‰§è¡Œï¼Œè€Œæ˜¯è®°å½•é”™è¯¯å¹¶ç»§ç»­è¿è¡Œï¼Œä»è€Œå…è®¸å¼€å‘è€…åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹è¯†åˆ«å’Œä¿®å¤æ½œåœ¨çš„é—®é¢˜ã€‚</p>
<h3 id="ensure-çš„ä½œç”¨"><a href="#ensure-çš„ä½œç”¨" class="headerlink" title="ensureÂ çš„ä½œç”¨"></a><code>ensure</code>Â çš„ä½œç”¨</h3><ol>
<li><p>â€‹<strong>â€‹æ¡ä»¶éªŒè¯â€‹</strong>â€‹ï¼š</p>
<ul>
<li><code>ensure</code>Â ç”¨äºéªŒè¯æŸä¸ªæ¡ä»¶æ˜¯å¦ä¸ºçœŸã€‚å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œ<code>ensure</code>Â ä¼šè®°å½•ä¸€æ¡é”™è¯¯æ—¥å¿—ï¼Œå¹¶å¯èƒ½è§¦å‘ä¸€äº›è°ƒè¯•è¡Œä¸ºï¼ˆå¦‚æ–­ç‚¹ï¼‰ï¼Œä½†ä¸ä¼šåƒÂ <code>check</code>Â é‚£æ ·å¼ºåˆ¶ç»ˆæ­¢ç¨‹åºã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹è°ƒè¯•è¾…åŠ©â€‹</strong>â€‹ï¼š</p>
<ul>
<li>åœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µï¼Œ<code>ensure</code>Â å¯ä»¥å¸®åŠ©å¼€å‘è€…æ•æ‰ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜ï¼Œå¦‚æœªé¢„æœŸçš„çŠ¶æ€ã€æ— æ•ˆçš„æŒ‡é’ˆå¼•ç”¨ç­‰ï¼Œè€Œä¸ä¼šç«‹å³ä¸­æ–­æ¸¸æˆæˆ–åº”ç”¨ç¨‹åºçš„æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹æ€§èƒ½è€ƒè™‘â€‹</strong>â€‹ï¼š</p>
<ul>
<li>ç”±äºÂ <code>ensure</code>Â åœ¨æ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸ä¼šç«‹å³ç»ˆæ­¢ç¨‹åºï¼Œå› æ­¤åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­ï¼Œ<code>ensure</code>Â çš„å¼€é”€é€šå¸¸æ¯”Â <code>check</code>Â å°ã€‚ä¸è¿‡ï¼Œè™šå¹»å¼•æ“é€šå¸¸ä¼šåœ¨å‘å¸ƒç‰ˆæœ¬ä¸­ç§»é™¤æˆ–ä¼˜åŒ–æ‰Â <code>ensure</code>Â ç›¸å…³çš„ä»£ç ï¼Œä»¥å‡å°‘æ€§èƒ½å½±å“ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ensure-ä¸-check-çš„åŒºåˆ«"><a href="#ensure-ä¸-check-çš„åŒºåˆ«" class="headerlink" title="ensureÂ ä¸Â checkÂ çš„åŒºåˆ«"></a><code>ensure</code>Â ä¸Â <code>check</code>Â çš„åŒºåˆ«</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>check</code></th>
<th><code>ensure</code></th>
</tr>
</thead>
<tbody><tr>
<td>â€‹<strong>â€‹è¡Œä¸ºâ€‹</strong>â€‹</td>
<td>å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œç«‹å³ç»ˆæ­¢ç¨‹åºå¹¶æŠ›å‡ºé”™è¯¯ã€‚</td>
<td>å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œè®°å½•é”™è¯¯æ—¥å¿—ï¼Œä½†ç»§ç»­æ‰§è¡Œç¨‹åºã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹</td>
<td>ç”¨äºç¡®ä¿ç¨‹åºåœ¨å…³é”®ç‚¹ä¸Šçš„ä¸å˜é‡ï¼Œç¡®ä¿ä»£ç é€»è¾‘çš„æ­£ç¡®æ€§ã€‚</td>
<td>ç”¨äºæ•æ‰æ½œåœ¨çš„é—®é¢˜ï¼Œä½†ä¸å¸Œæœ›ç«‹å³ä¸­æ–­ç¨‹åºæ‰§è¡Œã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹é€‚ç”¨åœºæ™¯â€‹</strong>â€‹</td>
<td>å…³é”®é€»è¾‘éªŒè¯ï¼Œå¦‚å‡½æ•°å‰ç½®æ¡ä»¶ã€åç½®æ¡ä»¶ç­‰ã€‚</td>
<td>éå…³é”®é€»è¾‘éªŒè¯ï¼Œå¦‚çŠ¶æ€æ£€æŸ¥ã€å¯é€‰æ¡ä»¶ç­‰ã€‚</td>
</tr>
<tr>
<td>â€‹<strong>â€‹æ€§èƒ½å½±å“â€‹</strong>â€‹</td>
<td>åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­é€šå¸¸è¢«ä¼˜åŒ–æ‰ï¼Œä½†åœ¨è°ƒè¯•ç‰ˆæœ¬ä¸­å¼€é”€è¾ƒå¤§ã€‚</td>
<td>åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­é€šå¸¸è¢«ç§»é™¤æˆ–ä¼˜åŒ–ï¼Œå¯¹æ€§èƒ½å½±å“è¾ƒå°ã€‚</td>
</tr>
</tbody></table>
<h3 id="ensure-çš„ä½¿ç”¨ç¤ºä¾‹"><a href="#ensure-çš„ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ensureÂ çš„ä½¿ç”¨ç¤ºä¾‹"></a><code>ensure</code>Â çš„ä½¿ç”¨ç¤ºä¾‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€äº›åœ¨è™šå¹»å¼•æ“ä¸­ä½¿ç”¨Â <code>ensure</code>Â çš„ç¤ºä¾‹ï¼š</p>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ 1ï¼šæ£€æŸ¥æŒ‡é’ˆæ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">AActor* MyActor = <span class="built_in">GetOwner</span>();</span><br><span class="line"><span class="built_in">ensure</span>(MyActor != <span class="literal">nullptr</span>);</span><br><span class="line"><span class="keyword">if</span> (MyActor)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œéœ€è¦ MyActor æœ‰æ•ˆçš„æ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 2ï¼šæ£€æŸ¥å˜é‡èŒƒå›´</span></span><br><span class="line">int32 Health = <span class="built_in">GetHealth</span>();</span><br><span class="line"><span class="built_in">ensure</span>(Health &gt;= <span class="number">0</span> &amp;&amp; Health &lt;= <span class="number">100</span>);</span><br><span class="line"><span class="keyword">if</span> (Health &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Health = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (Health &gt; <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">    Health = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 3ï¼šæ£€æŸ¥å‡½æ•°è¿”å›å€¼</span></span><br><span class="line"><span class="type">bool</span> bSuccess = <span class="built_in">SomeFunction</span>();</span><br><span class="line"><span class="built_in">ensure</span>(bSuccess);</span><br><span class="line"><span class="keyword">if</span> (!bSuccess)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å¤±è´¥æƒ…å†µ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ensure-çš„å·¥ä½œåŸç†"><a href="#ensure-çš„å·¥ä½œåŸç†" class="headerlink" title="ensureÂ çš„å·¥ä½œåŸç†"></a><code>ensure</code>Â çš„å·¥ä½œåŸç†</h3><p>åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œå½“Â <code>ensure</code>Â çš„æ¡ä»¶ä¸ºå‡æ—¶ï¼Œè™šå¹»å¼•æ“ä¼šï¼š</p>
<ol>
<li>â€‹<strong>â€‹è®°å½•é”™è¯¯æ—¥å¿—â€‹</strong>â€‹ï¼šå°†Â <code>ensure</code>Â å¤±è´¥çš„ä¿¡æ¯è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€è¡Œå·å’Œå¤±è´¥çš„æ¡ä»¶ã€‚</li>
<li>â€‹<strong>â€‹è§¦å‘è°ƒè¯•è¡Œä¸ºâ€‹</strong>â€‹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šè§¦å‘æ–­ç‚¹æˆ–å¼¹å‡ºè°ƒè¯•çª—å£ï¼Œå¸®åŠ©å¼€å‘è€…ç«‹å³å®šä½é—®é¢˜ã€‚</li>
<li>â€‹<strong>â€‹ç»§ç»­æ‰§è¡Œâ€‹</strong>â€‹ï¼šä¸ä¼šç»ˆæ­¢ç¨‹åºï¼Œå…è®¸å¼€å‘è€…è§‚å¯Ÿç¨‹åºåœ¨é”™è¯¯çŠ¶æ€ä¸‹çš„è¡Œä¸ºï¼Œä»¥ä¾¿è¿›ä¸€æ­¥è°ƒè¯•ã€‚</li>
</ol>
<p>åœ¨å‘å¸ƒæ¨¡å¼ä¸‹ï¼Œ<code>ensure</code>Â é€šå¸¸ä¼šè¢«ä¼˜åŒ–æ‰ï¼Œå› æ­¤ä¸ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚</p>
<h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><ol>
<li>â€‹<strong>â€‹ç”¨äºéå…³é”®æ€§æ£€æŸ¥â€‹</strong>â€‹ï¼š<code>ensure</code>Â åº”è¯¥ç”¨äºé‚£äº›å³ä½¿å¤±è´¥ä¹Ÿä¸ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜çš„æƒ…å†µã€‚å¯¹äºå…³é”®çš„ä¸å˜é‡ï¼Œåº”è¯¥ä½¿ç”¨Â <code>check</code>Â æ¥ç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§ã€‚</li>
<li>â€‹<strong>â€‹æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯â€‹</strong>â€‹ï¼šåœ¨ä½¿ç”¨Â <code>ensure</code>Â æ—¶ï¼Œå¯ä»¥ç»“åˆÂ <code>UE_LOG</code>Â æˆ–å…¶ä»–æ—¥å¿—æœºåˆ¶ï¼Œæä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½é—®é¢˜ã€‚</li>
<li>â€‹<strong>â€‹é¿å…æ»¥ç”¨â€‹</strong>â€‹ï¼šè¿‡åº¦ä½¿ç”¨Â <code>ensure</code>Â å¯èƒ½ä¼šå¯¼è‡´æ—¥å¿—æ–‡ä»¶è†¨èƒ€ï¼Œå¢åŠ è°ƒè¯•éš¾åº¦ã€‚åº”æ ¹æ®å®é™…éœ€è¦åˆç†ä½¿ç”¨ã€‚</li>
</ol>
<h3 id="ç›¸å…³å®"><a href="#ç›¸å…³å®" class="headerlink" title="ç›¸å…³å®"></a>ç›¸å…³å®</h3><ul>
<li><p>â€‹<strong>â€‹<code>check</code>â€‹</strong>â€‹ï¼šç”¨äºç¡®ä¿æ¡ä»¶ä¸ºçœŸï¼Œå¦åˆ™ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚</p>
</li>
<li><p>â€‹<strong>â€‹<code>ensureMsgf</code>â€‹</strong>â€‹ï¼šç±»ä¼¼äºÂ <code>ensure</code>ï¼Œä½†å…è®¸è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼Œä¾¿äºæä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>  cpp</p>
<p>  å¤åˆ¶</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ensureMsgf</span>(Health &gt;= <span class="number">0</span>, <span class="built_in">TEXT</span>(<span class="string">&quot;Health is negative: %d&quot;</span>), Health);</span><br></pre></td></tr></table></figure>
</li>
<li><p>â€‹<strong>â€‹<code>verify</code>â€‹</strong>â€‹ï¼šç±»ä¼¼äºÂ <code>check</code>ï¼Œä½†åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­ä¸ä¼šè¢«ç§»é™¤ï¼Œä»ç„¶ä¼šæ‰§è¡Œæ£€æŸ¥ã€‚</p>
</li>
</ul>
<h3 id="åŠ¨æ€å¤šæ’­å§”æ‰˜"><a href="#åŠ¨æ€å¤šæ’­å§”æ‰˜" class="headerlink" title="åŠ¨æ€å¤šæ’­å§”æ‰˜"></a>åŠ¨æ€å¤šæ’­å§”æ‰˜</h3><p>è¿™æ®µä»£ç æ˜¯åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­ä½¿ç”¨C++è¯­è¨€å®šä¹‰çš„ä¸€ä¸ªåŠ¨æ€å¤šæ’­å§”æ‰˜ï¼ˆDynamic Multicast Delegateï¼‰ã€‚å®ƒå£°æ˜äº†ä¸€ä¸ªåä¸ºÂ <code>FOnHealthChanged</code>Â çš„å§”æ‰˜ç±»å‹ï¼Œè¯¥å§”æ‰˜å¯ä»¥æºå¸¦å››ä¸ªå‚æ•°ï¼š</p>
<ol>
<li><code>InstigatorActor</code>ï¼šç±»å‹ä¸ºÂ <code>AActor*</code>ï¼Œè¡¨ç¤ºå¼•å‘å¥åº·å€¼å˜åŒ–çš„Actorã€‚</li>
<li><code>USAttributeComponent*</code>ï¼šç±»å‹ä¸ºÂ <code>USAttributeComponent*</code>ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç”¨äºç®¡ç†è§’è‰²å±æ€§ï¼ˆæ¯”å¦‚ç”Ÿå‘½å€¼ç­‰ï¼‰çš„ç»„ä»¶æŒ‡é’ˆã€‚</li>
<li><code>float NewHealth</code>ï¼šç±»å‹ä¸ºÂ <code>float</code>ï¼Œè¡¨ç¤ºå˜åŒ–åçš„æ–°ç”Ÿå‘½å€¼ã€‚</li>
<li><code>float Delta</code>ï¼šç±»å‹ä¸ºÂ <code>float</code>ï¼Œè¡¨ç¤ºç”Ÿå‘½å€¼çš„å˜åŒ–é‡ï¼ˆå¢åŠ æˆ–å‡å°‘çš„æ•°å€¼ï¼‰ã€‚</li>
</ol>
<h3 id="å¯èƒ½çš„ç”¨é€”åŠè§£ç­”æ€è·¯"><a href="#å¯èƒ½çš„ç”¨é€”åŠè§£ç­”æ€è·¯" class="headerlink" title="å¯èƒ½çš„ç”¨é€”åŠè§£ç­”æ€è·¯"></a>å¯èƒ½çš„ç”¨é€”åŠè§£ç­”æ€è·¯</h3><p>è¿™ç§å§”æ‰˜é€šå¸¸ç”¨äºåœ¨æ¸¸æˆå¼€å‘ä¸­å®ç°å½“è§’è‰²æˆ–å…¶ä»–å¯¹è±¡çš„å¥åº·å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥å¤šä¸ªç›¸å…³çš„å¯¹è±¡æˆ–ç³»ç»Ÿè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>â€‹<strong>â€‹UIæ›´æ–°â€‹</strong>â€‹ï¼šå½“è§’è‰²ç”Ÿå‘½å€¼æ”¹å˜æ—¶ï¼Œé€šè¿‡ç»‘å®šåˆ°è¿™ä¸ªå§”æ‰˜ï¼Œé€šçŸ¥HUDï¼ˆHeads - Up Displayï¼Œå¹³è§†æ˜¾ç¤ºå™¨ï¼‰ç­‰UIç»„ä»¶æ›´æ–°æ˜¾ç¤ºçš„ç”Ÿå‘½å€¼æ¡ã€‚</li>
<li>â€‹<strong>â€‹éŸ³æ•ˆæ’­æ”¾â€‹</strong>â€‹ï¼šå¯ä»¥åœ¨ç”Ÿå‘½å€¼å˜åŒ–æ—¶è§¦å‘ç‰¹å®šçš„éŸ³æ•ˆï¼Œæ¯”å¦‚å—åˆ°ä¼¤å®³æ—¶çš„ç—›è‹¦éŸ³æ•ˆæˆ–å›å¤ç”Ÿå‘½å€¼æ—¶çš„æ¢å¤éŸ³æ•ˆã€‚</li>
<li>â€‹<strong>â€‹æ¸¸æˆé€»è¾‘å“åº”â€‹</strong>â€‹ï¼šä¾‹å¦‚å½“è§’è‰²ç”Ÿå‘½å€¼é™ä¸º0æ—¶ï¼Œè§¦å‘æ¸¸æˆç»“æŸé€»è¾‘ç­‰ã€‚</li>
</ul>
<p>å¦‚æœè¦åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªå§”æ‰˜ï¼Œä¸€èˆ¬éœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>â€‹<strong>â€‹å£°æ˜å§”æ‰˜å®ä¾‹â€‹</strong>â€‹ï¼šåœ¨éœ€è¦ä½¿ç”¨è¯¥å§”æ‰˜çš„ç±»ä¸­å£°æ˜ä¸€ä¸ªÂ <code>FOnHealthChanged</code>Â ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä¾‹å¦‚Â <code>DECLARE_DYNAMIC_MULTICAST_DELEGATE(FOnHealthChanged, ...);</code>Â ä¹‹åï¼Œ</li>
<li>åœ¨ç±»ä¸­Â &#96;UPROPERTY(BlueprintAssignable, Category &#x3D; â€œHealthâ€) </li>
<li>FOnHealthChanged OnHealthChanged;<code>ï¼ˆè¿™é‡Œä½¿ç”¨Â </code>BlueprintAssignable<code>Â æ˜¯ä¸ºäº†åœ¨è“å›¾ä¸­ä¹Ÿèƒ½ç»‘å®šå‡½æ•°ï¼Œ</code>Category&#96;Â ç”¨äºåœ¨ç¼–è¾‘å™¨ä¸­åˆ†ç±»æ˜¾ç¤ºï¼‰ã€‚</li>
<li>â€‹<strong>â€‹ç»‘å®šå‡½æ•°â€‹</strong>â€‹ï¼šå¯ä»¥åœ¨è“å›¾æˆ–è€…C++ä»£ç ä¸­é€šè¿‡Â <code>OnHealthChanged.AddUFunction(this, FName(&quot;YourFunctionName&quot;));</code>Â ï¼ˆC++ä¸­ç»‘å®šç±»å†…å‡½æ•°ï¼‰æˆ–è€…è“å›¾èŠ‚ç‚¹æ¥å°†ç‰¹å®šçš„å‡½æ•°ç»‘å®šåˆ°è¿™ä¸ªå§”æ‰˜ä¸Šã€‚</li>
<li>â€‹<strong>â€‹è°ƒç”¨å§”æ‰˜â€‹</strong>â€‹ï¼šå½“è§’è‰²å¥åº·å€¼ç¡®å®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåœ¨ç›¸åº”çš„ä»£ç é€»è¾‘ä¸­è°ƒç”¨Â <code>OnHealthChanged.Broadcast(InstigatorActor, AttributeComponent, NewHealth, Delta);</code>Â æ¥è§¦å‘æ‰€æœ‰ç»‘å®šçš„å‡½æ•°æ‰§è¡Œã€‚</li>
</ol>
<h1 id="AIè¡Œä¸ºæ ‘"><a href="#AIè¡Œä¸ºæ ‘" class="headerlink" title="AIè¡Œä¸ºæ ‘"></a>AIè¡Œä¸ºæ ‘</h1><p>éœ€è¦é‡å†™Beginplay()<br>å¤´æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦åˆ›å»ºAIè¡Œä¸ºæ ‘å¯¹è±¡ï¼Œåœ¨beginpalyä¸­è¿è¡Œ<br>![[Pasted image 20250411161843.png]]</p>
<p>![[Pasted image 20250411162416.png]]</p>
<h3 id="è¡Œä¸ºæ ‘èŠ‚ç‚¹çŠ¶æ€é¢„è§ˆ"><a href="#è¡Œä¸ºæ ‘èŠ‚ç‚¹çŠ¶æ€é¢„è§ˆ" class="headerlink" title="è¡Œä¸ºæ ‘èŠ‚ç‚¹çŠ¶æ€é¢„è§ˆ"></a>è¡Œä¸ºæ ‘èŠ‚ç‚¹çŠ¶æ€é¢„è§ˆ</h3><p>![[Pasted image 20250411164703.png]]</p>
<p>![[Pasted image 20250411164444.png]]<br>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªè¡Œä¸ºæ ‘æœåŠ¡ï¼ˆ<code>UBTService</code>ï¼‰çš„Â <code>TickNode</code>Â å‡½æ•°å®ç°ï¼Œä¸»è¦ç”¨äºåœ¨è¡Œä¸ºæ ‘æ‰§è¡Œè¿‡ç¨‹ä¸­æ£€æŸ¥AIæ§åˆ¶çš„æ£‹å­ï¼ˆPawnï¼‰ä¸ç›®æ ‡Actorä¹‹é—´çš„è·ç¦»ï¼Œå¹¶å°†æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…çš„ç»“æœå­˜å‚¨åˆ°é»‘æ¿ï¼ˆBlackboardï¼‰ç»„ä»¶ä¸­ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åœ¨è™šå¹»å¼•æ“è“å›¾ä¸­ä½¿ç”¨ä¸Šè¿°C++ä»£ç é€»è¾‘çš„æ­¥éª¤ï¼š</p>
<h3 id="1-åˆ›å»ºè¡Œä¸ºæ ‘"><a href="#1-åˆ›å»ºè¡Œä¸ºæ ‘" class="headerlink" title="1. åˆ›å»ºè¡Œä¸ºæ ‘"></a>1. åˆ›å»ºè¡Œä¸ºæ ‘</h3><p>åœ¨è™šå¹»ç¼–è¾‘å™¨ä¸­ï¼Œæ‰“å¼€å†…å®¹æµè§ˆå™¨ï¼Œå³é”®ç‚¹å‡»å¹¶é€‰æ‹©Â <code>AI</code>Â -&gt;Â <code>è¡Œä¸ºæ ‘</code>Â æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¡Œä¸ºæ ‘èµ„äº§ã€‚å‘½åä¸ºä¾‹å¦‚Â <code>MyAITree</code>ã€‚</p>
<h3 id="2-åˆ›å»ºé»‘æ¿"><a href="#2-åˆ›å»ºé»‘æ¿" class="headerlink" title="2. åˆ›å»ºé»‘æ¿"></a>2. åˆ›å»ºé»‘æ¿</h3><p>åŒæ ·åœ¨å†…å®¹æµè§ˆå™¨ä¸­ï¼Œå³é”®ç‚¹å‡»å¹¶é€‰æ‹©Â <code>AI</code>Â -&gt;Â <code>é»‘æ¿</code>Â æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é»‘æ¿èµ„äº§ã€‚å‘½åä¸ºä¾‹å¦‚Â <code>MyBlackboard</code>ã€‚</p>
<h3 id="3-åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨é»‘æ¿"><a href="#3-åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨é»‘æ¿" class="headerlink" title="3. åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨é»‘æ¿"></a>3. åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨é»‘æ¿</h3><p>æ‰“å¼€åˆšæ‰åˆ›å»ºçš„è¡Œä¸ºæ ‘Â <code>MyAITree</code>ï¼Œåœ¨è¡Œä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹å±æ€§ä¸­ï¼Œå°†Â <code>é»‘æ¿</code>Â å±æ€§æŒ‡å®šä¸ºåˆšåˆšåˆ›å»ºçš„Â <code>MyBlackboard</code>ã€‚</p>
<h3 id="4-åˆ›å»ºAIæ§åˆ¶å™¨ç±»"><a href="#4-åˆ›å»ºAIæ§åˆ¶å™¨ç±»" class="headerlink" title="4. åˆ›å»ºAIæ§åˆ¶å™¨ç±»"></a>4. åˆ›å»ºAIæ§åˆ¶å™¨ç±»</h3><p>åœ¨å†…å®¹æµè§ˆå™¨ä¸­ï¼Œå³é”®ç‚¹å‡»å¹¶é€‰æ‹©Â <code>C++ç±»</code>Â -&gt; é€‰æ‹©æˆ–åˆ›å»ºä¸€ä¸ªåˆé€‚çš„çˆ¶ç±»ï¼ˆæ¯”å¦‚Â <code>AIController</code>ï¼‰ï¼Œå‘½åä¸ºä¾‹å¦‚Â <code>MyAIController</code>ã€‚ç¼–è¯‘é¡¹ç›®ï¼Œç¡®ä¿C++ä»£ç ç¼–è¯‘é€šè¿‡ã€‚</p>
<h3 id="5-åœ¨AIæ§åˆ¶å™¨ç±»ä¸­å…³è”é»‘æ¿"><a href="#5-åœ¨AIæ§åˆ¶å™¨ç±»ä¸­å…³è”é»‘æ¿" class="headerlink" title="5. åœ¨AIæ§åˆ¶å™¨ç±»ä¸­å…³è”é»‘æ¿"></a>5. åœ¨AIæ§åˆ¶å™¨ç±»ä¸­å…³è”é»‘æ¿</h3><p>æ‰“å¼€Â <code>MyAIController</code>Â çš„å¤´æ–‡ä»¶ï¼ˆ<code>.h</code>Â æ–‡ä»¶ï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç æ¥å£°æ˜é»‘æ¿ç»„ä»¶ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AIController.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAIController.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURGAMENAME_API</span> AMyAIController : <span class="keyword">public</span> AAIController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">    UBlackboardComponent* BlackBoardComp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨Â <code>MyAIController</code>Â çš„æºæ–‡ä»¶ï¼ˆ<code>.cpp</code>Â æ–‡ä»¶ï¼‰çš„æ„é€ å‡½æ•°æˆ–Â <code>BeginPlay</code>Â å‡½æ•°ä¸­åˆå§‹åŒ–é»‘æ¿ç»„ä»¶ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAIController.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">AMyAIController::<span class="built_in">AMyAIController</span>()</span><br><span class="line">&#123;</span><br><span class="line">    PrimaryActorTick.bCanEverTick = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    BlackBoardComp = <span class="built_in">CreateDefaultSubobject</span>&lt;UBlackboardComponent&gt;(<span class="built_in">TEXT</span>(<span class="string">&quot;BlackBoardComp&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-åˆ›å»ºè¡Œä¸ºæ ‘æœåŠ¡ç±»"><a href="#6-åˆ›å»ºè¡Œä¸ºæ ‘æœåŠ¡ç±»" class="headerlink" title="6. åˆ›å»ºè¡Œä¸ºæ ‘æœåŠ¡ç±»"></a>6. åˆ›å»ºè¡Œä¸ºæ ‘æœåŠ¡ç±»</h3><p>åœ¨å†…å®¹æµè§ˆå™¨ä¸­ï¼Œå³é”®ç‚¹å‡»å¹¶é€‰æ‹©Â <code>C++ç±»</code>Â -&gt; é€‰æ‹©æˆ–åˆ›å»ºä¸€ä¸ªåˆé€‚çš„çˆ¶ç±»ï¼ˆæ¯”å¦‚Â <code>BTService</code>ï¼‰ï¼Œå‘½åä¸ºä¾‹å¦‚Â <code>S8TService</code>ã€‚ç¼–è¯‘é¡¹ç›®ã€‚</p>
<h3 id="7-åœ¨è¡Œä¸ºæ ‘æœåŠ¡ç±»ä¸­å…³è”é»‘æ¿é”®"><a href="#7-åœ¨è¡Œä¸ºæ ‘æœåŠ¡ç±»ä¸­å…³è”é»‘æ¿é”®" class="headerlink" title="7. åœ¨è¡Œä¸ºæ ‘æœåŠ¡ç±»ä¸­å…³è”é»‘æ¿é”®"></a>7. åœ¨è¡Œä¸ºæ ‘æœåŠ¡ç±»ä¸­å…³è”é»‘æ¿é”®</h3><p>æ‰“å¼€Â <code>S8TService</code>Â çš„å¤´æ–‡ä»¶ï¼Œç¡®ä¿Â <code>AttackRangeKey</code>Â æ˜¯ä¸€ä¸ªå·²å£°æ˜çš„æˆå‘˜å˜é‡ï¼Œå¹¶ä¸”ç±»å‹åˆé€‚ï¼ˆæ¯”å¦‚Â <code>FName</code>Â ç±»å‹ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;BehaviorTree/BTService.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;S8TService.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURGAMENAME_API</span> US8TService : <span class="keyword">public</span> UBTService</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">    FName AttackRangeKey;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">TickNode</span><span class="params">(UBehaviorTreeComponent&amp; OwnerComp, uint8* NodeMemory, <span class="type">float</span> DeltaSeconds)</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨æºæ–‡ä»¶ä¸­å®ç°Â <code>TickNode</code>Â å‡½æ•°ï¼Œå°±æ˜¯ä½ æä¾›çš„é‚£æ®µC++ä»£ç ï¼ˆæ³¨æ„ä¿®æ­£ä»£ç ä¸­çš„è¯­æ³•é”™è¯¯ï¼Œæ¯”å¦‚ä¸€äº›ä¹±ç å’Œä¸è§„èŒƒçš„å†™æ³•ï¼‰ã€‚</p>
<h3 id="8-åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨æœåŠ¡"><a href="#8-åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨æœåŠ¡" class="headerlink" title="8. åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨æœåŠ¡"></a>8. åœ¨è¡Œä¸ºæ ‘ä¸­ä½¿ç”¨æœåŠ¡</h3><p>å›åˆ°è¡Œä¸ºæ ‘Â <code>MyAITree</code>ï¼Œå³é”®ç‚¹å‡»è¡Œä¸ºæ ‘çš„èŠ‚ç‚¹åŒºåŸŸï¼Œæœç´¢å¹¶æ·»åŠ Â <code>S8TService</code>Â æœåŠ¡èŠ‚ç‚¹ã€‚å°†å…¶æ”¾ç½®åœ¨åˆé€‚çš„ä½ç½®ï¼ˆæ¯”å¦‚åœ¨æ ¹èŠ‚ç‚¹ä¸‹ä½œä¸ºå­èŠ‚ç‚¹ï¼‰ã€‚</p>
<h3 id="9-è®¾ç½®é»‘æ¿é”®"><a href="#9-è®¾ç½®é»‘æ¿é”®" class="headerlink" title="9. è®¾ç½®é»‘æ¿é”®"></a>9. è®¾ç½®é»‘æ¿é”®</h3><p>é€‰ä¸­æ·»åŠ çš„Â <code>S8TService</code>Â èŠ‚ç‚¹ï¼Œåœ¨ç»†èŠ‚é¢æ¿ä¸­æ‰¾åˆ°Â <code>AttackRangeKey</code>Â å±æ€§ï¼Œè®¾ç½®å…¶å€¼ä¸ºé»‘æ¿ä¸­ç”¨äºå­˜å‚¨æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…çš„å¸ƒå°”é”®çš„åç§°ï¼ˆä¾‹å¦‚å‘½åä¸ºÂ <code>bIsInAttackRange</code>ï¼‰ã€‚</p>
<h3 id="10-åœ¨é»‘æ¿ä¸­è®¾ç½®åˆå§‹å€¼"><a href="#10-åœ¨é»‘æ¿ä¸­è®¾ç½®åˆå§‹å€¼" class="headerlink" title="10. åœ¨é»‘æ¿ä¸­è®¾ç½®åˆå§‹å€¼"></a>10. åœ¨é»‘æ¿ä¸­è®¾ç½®åˆå§‹å€¼</h3><p>æ‰“å¼€Â <code>MyBlackboard</code>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¸ƒå°”ç±»å‹çš„é”®ï¼Œå‘½åä¸ºåˆšæ‰åœ¨æœåŠ¡èŠ‚ç‚¹ä¸­è®¾ç½®çš„åç§°ï¼ˆå¦‚Â <code>bIsInAttackRange</code>ï¼‰ï¼Œå¹¶è®¾ç½®å…¶åˆå§‹å€¼ä¸ºÂ <code>false</code>ã€‚</p>
<h3 id="11-åœ¨AIæ§åˆ¶å™¨ä¸­ä½¿ç”¨è¡Œä¸ºæ ‘"><a href="#11-åœ¨AIæ§åˆ¶å™¨ä¸­ä½¿ç”¨è¡Œä¸ºæ ‘" class="headerlink" title="11. åœ¨AIæ§åˆ¶å™¨ä¸­ä½¿ç”¨è¡Œä¸ºæ ‘"></a>11. åœ¨AIæ§åˆ¶å™¨ä¸­ä½¿ç”¨è¡Œä¸ºæ ‘</h3><p>æ‰“å¼€Â <code>MyAIController</code>Â çš„æºæ–‡ä»¶ï¼Œåœ¨Â <code>Possess</code>Â å‡½æ•°ä¸­å¯åŠ¨è¡Œä¸ºæ ‘ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyAIController::Possess</span><span class="params">(APawn* InPawn)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">Possess</span>(InPawn);</span><br><span class="line">    <span class="built_in">RunBehaviorTree</span>(MyBTTree); <span class="comment">// å‡è®¾MyBTTreeæ˜¯è¡Œä¸ºæ ‘èµ„äº§çš„å¼•ç”¨ï¼Œåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å¹¶èµ‹å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å¤´æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„å£°æ˜ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;AIController.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyAIController.generated.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyBTTree.h&quot;</span> <span class="comment">// å¼•å…¥è¡Œä¸ºæ ‘èµ„äº§çš„å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURGAMENAME_API</span> AMyAIController : <span class="keyword">public</span> AAIController</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">    UBlackboardComponent* BlackBoardComp;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UPROPERTY</span>(EditAnywhere, BlueprintReadWrite, Category = <span class="string">&quot;AI&quot;</span>)</span><br><span class="line">    UBehaviorTree* MyBTTree;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Possess</span><span class="params">(APawn* InPawn)</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œåœ¨æ¸¸æˆè¿è¡Œæ—¶ï¼ŒAIæ§åˆ¶å™¨ä¼šæŒ‰ç…§è¡Œä¸ºæ ‘çš„é€»è¾‘ï¼Œé€šè¿‡Â <code>S8TService</code>Â æœåŠ¡èŠ‚ç‚¹å®šæœŸæ£€æŸ¥AIæ§åˆ¶çš„Pawnä¸ç›®æ ‡Actorä¹‹é—´çš„è·ç¦»ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨é»‘æ¿çš„æŒ‡å®šå¸ƒå°”é”®ä¸­ï¼Œä¾›åç»­çš„è¡Œä¸ºæ ‘èŠ‚ç‚¹ä½¿ç”¨ã€‚</p>
<h3 id="ä»£ç è¯¦ç»†è§£æ"><a href="#ä»£ç è¯¦ç»†è§£æ" class="headerlink" title="ä»£ç è¯¦ç»†è§£æ"></a>ä»£ç è¯¦ç»†è§£æ</h3><ol>
<li>â€‹<strong>â€‹è°ƒç”¨çˆ¶ç±»çš„Â <code>TickNode</code>Â å‡½æ•°â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Super::<span class="built_in">TickNode</span>(OwnerComp, NodeMemory, DeltaSeconds);</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸€æ­¥ç¡®ä¿è¡Œä¸ºæ ‘æœåŠ¡çš„çˆ¶ç±»é€»è¾‘ä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œç»´æŒè¡Œä¸ºæ ‘ç³»ç»Ÿçš„åŸºæœ¬è¿è¡Œæµç¨‹ã€‚</p>
<ol start="2">
<li>â€‹<strong>â€‹è·å–é»‘æ¿ç»„ä»¶â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UBlackboardComponent* BlackBoardComp = OwnerComp.<span class="built_in">GetBlackboardComponent</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">ensure</span>(BlackBoardComp))</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡Â <code>OwnerComp</code>Â è·å–ä¸ä¹‹å…³è”çš„é»‘æ¿ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨Â <code>ensure</code>Â å®è¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ã€‚å¦‚æœé»‘æ¿ç»„ä»¶ä¸å­˜åœ¨ï¼Œ<code>ensure</code>Â å®ä¼šè§¦å‘æ–­è¨€ï¼ˆåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼‰æˆ–è¿›è¡Œé€‚å½“çš„é”™è¯¯å¤„ç†ï¼ˆåœ¨å‘å¸ƒç¯å¢ƒä¸‹ï¼‰ã€‚</p>
<ol start="3">
<li>â€‹<strong>â€‹è·å–ç›®æ ‡Actorâ€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AActor* TargetActor = <span class="built_in">Cast</span>&lt;AActor&gt;(BlackBoardComp-&gt;<span class="built_in">GetValueAsObject</span>(<span class="string">&quot;TargetActor&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (TargetActor)</span><br></pre></td></tr></table></figure>
<p>ä»é»‘æ¿ç»„ä»¶ä¸­è·å–é”®ä¸ºÂ <code>&quot;TargetActor&quot;</code>Â çš„å€¼ï¼Œå¹¶å°è¯•å°†å…¶è½¬æ¢ä¸ºÂ <code>AActor</code>Â ç±»å‹ã€‚å¦‚æœè½¬æ¢æˆåŠŸä¸”ç›®æ ‡Actorå­˜åœ¨ï¼Œåˆ™ç»§ç»­åç»­æ“ä½œã€‚<br>4. â€‹<strong>â€‹è·å–AIæ§åˆ¶å™¨å’Œå…¶æ§åˆ¶çš„Pawnâ€‹</strong>â€‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AAIController* MyController = OwnerComp.<span class="built_in">GetAIOwner</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">ensure</span>(MyController))</span><br><span class="line">&#123;</span><br><span class="line">    APawn* AIPawn = MyController-&gt;<span class="built_in">GetPawn</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">ensure</span>(AIPawn))</span><br><span class="line">    &#123;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆä»Â <code>OwnerComp</code>Â è·å–AIçš„æ‰€æœ‰è€…ï¼ˆå³AIæ§åˆ¶å™¨ï¼‰ï¼Œç„¶åç¡®ä¿æ§åˆ¶å™¨å­˜åœ¨ã€‚æ¥ç€é€šè¿‡æ§åˆ¶å™¨è·å–å…¶æ§åˆ¶çš„Pawnï¼Œå¹¶å¯¹Pawnçš„å­˜åœ¨æ€§è¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ã€‚</p>
<ol start="5">
<li>â€‹<strong>â€‹è®¡ç®—è·ç¦»å¹¶åˆ¤æ–­æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">float</span> DistanceTo = FVector::<span class="built_in">Distance</span>(TargetActor-&gt;<span class="built_in">GetActorLocation</span>(), AIPawn-&gt;<span class="built_in">GetActorLocation</span>());</span><br><span class="line"><span class="type">bool</span> bWithinRange = DistanceTo &lt; <span class="number">2000.0f</span>;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Â <code>FVector::Distance</code>Â å‡½æ•°è®¡ç®—ç›®æ ‡Actorå’ŒAIæ§åˆ¶çš„Pawnä¹‹é—´çš„è·ç¦»ï¼Œå¹¶å°†è·ç¦»ä¸è®¾å®šçš„é˜ˆå€¼Â <code>2000.0f</code>Â è¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤æ–­ç›®æ ‡æ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…ã€‚</p>
<ol start="6">
<li>â€‹<strong>â€‹å°†ç»“æœå­˜å‚¨åˆ°é»‘æ¿ç»„ä»¶â€‹</strong>â€‹ï¼š</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BlackBoardComp-&gt;<span class="built_in">SetValueAsBool</span>(AttackRangeKey.SelectedKeyName, bWithinRange);</span><br></pre></td></tr></table></figure>

<p>å°†åˆ¤æ–­ç»“æœï¼ˆæ˜¯å¦åœ¨æ”»å‡»èŒƒå›´å†…ï¼‰ä»¥å¸ƒå°”å€¼çš„å½¢å¼å­˜å‚¨åˆ°é»‘æ¿ç»„ä»¶ä¸­ï¼Œä½¿ç”¨Â <code>AttackRangeKey.SelectedKeyName</code>Â ä½œä¸ºé”®ã€‚</p>
<p>![[Pasted image 20250411170301.png]]<br>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªè¡Œä¸ºæ ‘ä»»åŠ¡ï¼ˆ<code>UBTTask</code>ï¼‰çš„<code>ExecuteTask</code>å‡½æ•°å®ç°ï¼Œç”¨äºåœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­æ‰§è¡Œä¸€ä¸ªèŒƒå›´æ”»å‡»ä»»åŠ¡ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯è®©AIè§’è‰²ä»æªå£ä½ç½®å‘ç›®æ ‡è§’è‰²å‘å°„ä¸€ä¸ªæŠ•å°„ç‰©ï¼ˆå¦‚å­å¼¹ç­‰ï¼‰ã€‚</p>
<h3 id="ä»£ç è¯¦ç»†è§£æ-1"><a href="#ä»£ç è¯¦ç»†è§£æ-1" class="headerlink" title="ä»£ç è¯¦ç»†è§£æ"></a>ä»£ç è¯¦ç»†è§£æ</h3><ol>
<li>â€‹<strong>â€‹è·å–AIæ§åˆ¶å™¨å’Œæ‰€å±è§’è‰²â€‹</strong>â€‹</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AAIController* MyController = OwnerComp.<span class="built_in">GetAIOwner</span>();</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">ensure</span>(MyController))</span><br><span class="line">&#123;</span><br><span class="line">    ACharacter* MyPawn = <span class="built_in">Cast</span>&lt;ACharacter&gt;(MyController-&gt;<span class="built_in">GetPawn</span>());</span><br><span class="line">    <span class="keyword">if</span> (MyPawn == <span class="literal">nullptr</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- é¦–å…ˆé€šè¿‡`OwnerComp.GetAIOwner()`è·å–è¡Œä¸ºæ ‘ç»„ä»¶çš„AIæ§åˆ¶å™¨ã€‚</span><br><span class="line">- ä½¿ç”¨`ensure`å®æ£€æŸ¥AIæ§åˆ¶å™¨æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæœ‰æ•ˆï¼Œå†é€šè¿‡`MyController-&gt;GetPawn()`è·å–AIè§’è‰²æ‰€æ§åˆ¶çš„è§’è‰²ï¼ˆ`ACharacter`ç±»å‹ï¼‰ï¼Œå¹¶æ£€æŸ¥è¯¥è§’è‰²æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœè§’è‰²ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ä»»åŠ¡å¤±è´¥ã€‚</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>â€‹<strong>â€‹è·å–æªå£ä½ç½®å’Œç›®æ ‡è§’è‰²â€‹</strong>â€‹</li>
</ol>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FVector MuzzleLocation = MyPawn-&gt;<span class="built_in">GetMesh</span>()-&gt;<span class="built_in">GetSocketLocation</span>(<span class="string">&quot;Muzzle_01&quot;</span>);</span><br><span class="line">AActor* TargetActor = <span class="built_in">Cast</span>&lt;AActor&gt;(OwnerComp.<span class="built_in">GetBlackboardComponent</span>()-&gt;<span class="built_in">GetValueAsObject</span>(<span class="string">&quot;TargetActor&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (TargetActor == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> EBTNodeResult::Failed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- é€šè¿‡`MyPawn-&gt;GetMesh()-&gt;GetSocketLocation(&quot;Muzzle_01&quot;)`è·å–è§’è‰²æ¨¡å‹ä¸Šåä¸º`&quot;Muzzle_01&quot;`çš„æ’æ§½ä½ç½®ï¼Œå³æªå£ä½ç½®ã€‚</span><br><span class="line">- ä»é»‘æ¿ç»„ä»¶ï¼ˆ`BlackboardComponent`ï¼‰ä¸­è·å–åä¸º`&quot;TargetActor&quot;`çš„å¯¹è±¡ï¼Œå¹¶å°è¯•å°†å…¶è½¬æ¢ä¸º`AActor`ç±»å‹ï¼Œå¾—åˆ°ç›®æ ‡è§’è‰²ã€‚å¦‚æœç›®æ ‡è§’è‰²ä¸å­˜åœ¨ï¼Œè¿”å›ä»»åŠ¡å¤±è´¥ã€‚</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>â€‹<strong>â€‹è®¡ç®—å‘å°„æ–¹å‘å’Œæ—‹è½¬â€‹</strong>â€‹</li>
</ol>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FVector Direction = TargetActor-&gt;<span class="built_in">GetActorLocation</span>() - MuzzleLocation;</span><br><span class="line">FRotator MuzzleRotation = Direction.<span class="built_in">Rotation</span>();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- è®¡ç®—ä»æªå£ä½ç½®åˆ°ç›®æ ‡è§’è‰²ä½ç½®çš„æ–¹å‘å‘é‡`Direction`ã€‚</span><br><span class="line">- æ ¹æ®è¯¥æ–¹å‘å‘é‡è·å–å¯¹åº”çš„æ—‹è½¬`MuzzleRotation`ã€‚</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>â€‹<strong>â€‹ç”ŸæˆæŠ•å°„ç‰©â€‹</strong>â€‹</li>
</ol>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FActorSpawnParameters Params;</span><br><span class="line">Params.SpawnCollisionHandlingOverride = ESpawnActorCollisionHandlingMethod::AlwaysSpawn;</span><br><span class="line">AActor* NewProj = <span class="built_in">GetWorld</span>()-&gt;<span class="built_in">SpawnActor</span>&lt;AActor&gt;(ProjectileClass, MuzzleLocation, MuzzleRotation, Params);</span><br><span class="line"><span class="keyword">return</span> NewProj? EBTNodeResult::Succeeded : EBTNodeResult::Failed;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- åˆ›å»ºä¸€ä¸ª`FActorSpawnParameters`å¯¹è±¡`Params`ï¼Œå¹¶è®¾ç½®å…¶ç¢°æ’å¤„ç†æ–¹å¼ä¸ºæ€»æ˜¯ç”Ÿæˆï¼ˆ`ESpawnActorCollisionHandlingMethod::AlwaysSpawn`ï¼‰ã€‚</span><br><span class="line">- ä½¿ç”¨`GetWorld()-&gt;SpawnActor&lt;AActor&gt;`åœ¨ä¸–ç•Œä¸­ç”Ÿæˆä¸€ä¸ªæŒ‡å®šç±»ï¼ˆ`ProjectileClass`ï¼‰çš„æŠ•å°„ç‰©ï¼Œä½ç½®ä¸ºæªå£ä½ç½®ï¼Œæ—‹è½¬ä¸ºè®¡ç®—å¾—åˆ°çš„æªå£æ—‹è½¬ï¼ŒåŒæ—¶ä¼ å…¥ç”Ÿæˆå‚æ•°`Params`ã€‚å¦‚æœç”ŸæˆæˆåŠŸï¼Œè¿”å›ä»»åŠ¡æˆåŠŸï¼›å¦åˆ™è¿”å›ä»»åŠ¡å¤±è´¥ã€‚</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>â€‹<strong>â€‹é»˜è®¤è¿”å›å¤±è´¥â€‹</strong>â€‹</li>
</ol>
<p>cpp</p>
<p>å¤åˆ¶</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> EBTNodeResult::Failed;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­æ²¡æœ‰æå‰è¿”å›æˆåŠŸæˆ–å¤±è´¥ï¼Œæœ€åè¿”å›ä»»åŠ¡å¤±è´¥ã€‚</p>
<h1 id="C-ä¸UMGæ¡ˆä¾‹"><a href="#C-ä¸UMGæ¡ˆä¾‹" class="headerlink" title="C++ä¸UMGæ¡ˆä¾‹"></a>C++ä¸UMGæ¡ˆä¾‹</h1><p>åœ¨Unreal Engineä¸­ä½¿ç”¨C++åˆ›å»ºä¸€ä¸ªç®€å•çš„3D UIä¼¤å®³æ•°å­—ï¼Œé€šå¸¸æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>â€‹<strong>â€‹åˆ›å»ºUIç»„ä»¶â€‹</strong>â€‹ï¼š<ul>
<li>ä½¿ç”¨UMGï¼ˆUnreal Motion Graphicsï¼‰åˆ›å»ºä¸€ä¸ªUIå°éƒ¨ä»¶ï¼Œç”¨äºæ˜¾ç¤ºä¼¤å®³æ•°å­—ã€‚UMGå…è®¸ä½ è®¾è®¡UIå…ƒç´ å¹¶åœ¨æ¸¸æˆä¸­ä½¿ç”¨å®ƒä»¬ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹ç»‘å®šUIäº‹ä»¶â€‹</strong>â€‹ï¼š<ul>
<li>åœ¨C++ä¸­ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªUIæ§ä»¶ç±»ï¼Œå¹¶å°†å…¶ä¸UMGå°éƒ¨ä»¶ç»‘å®šã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª<code>UUserWidget</code>çš„C++ç±»ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹å¤„ç†ä¼¤å®³äº‹ä»¶â€‹</strong>â€‹ï¼š<ul>
<li>åœ¨æ¸¸æˆé€»è¾‘ä¸­ï¼Œå½“è§’è‰²å—åˆ°ä¼¤å®³æ—¶ï¼Œè§¦å‘ä¸€ä¸ªäº‹ä»¶æ¥æ˜¾ç¤ºä¼¤å®³æ•°å­—ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹åŠ¨ç”»å’Œæ˜¾ç¤ºâ€‹</strong>â€‹ï¼š<ul>
<li>å®ç°ä¼¤å®³æ•°å­—çš„åŠ¨ç”»æ•ˆæœï¼Œä¾‹å¦‚ä»å±å¹•å¤–é£å…¥å¹¶é€æ¸æ¶ˆå¤±ã€‚</li>
</ul>
</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨C++ä¸­åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ä¼¤å®³æ•°å­—UIï¼š</p>
<h3 id="æ­¥éª¤1ï¼šåˆ›å»ºUMGå°éƒ¨ä»¶"><a href="#æ­¥éª¤1ï¼šåˆ›å»ºUMGå°éƒ¨ä»¶" class="headerlink" title="æ­¥éª¤1ï¼šåˆ›å»ºUMGå°éƒ¨ä»¶"></a>æ­¥éª¤1ï¼šåˆ›å»ºUMGå°éƒ¨ä»¶</h3><ol>
<li>æ‰“å¼€Unreal Editorï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„UMGå°éƒ¨ä»¶ã€‚</li>
<li>æ·»åŠ ä¸€ä¸ª<code>TextBlock</code>æ§ä»¶ï¼Œå¹¶è®¾ç½®å…¶å±æ€§ï¼Œå¦‚å­—ä½“å¤§å°ã€é¢œè‰²å’Œä½ç½®ã€‚</li>
<li>å°†UMGå°éƒ¨ä»¶ä¿å­˜ä¸ºä¸€ä¸ªè“å›¾ç±»ï¼ˆä¾‹å¦‚<code>UDamageNumberWidget</code>ï¼‰ã€‚</li>
</ol>
<h3 id="æ­¥éª¤2ï¼šåˆ›å»ºC-UIæ§ä»¶ç±»"><a href="#æ­¥éª¤2ï¼šåˆ›å»ºC-UIæ§ä»¶ç±»" class="headerlink" title="æ­¥éª¤2ï¼šåˆ›å»ºC++ UIæ§ä»¶ç±»"></a>æ­¥éª¤2ï¼šåˆ›å»ºC++ UIæ§ä»¶ç±»</h3><p>åœ¨ä½ çš„C++é¡¹ç›®ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„C++ç±»ï¼Œç»§æ‰¿è‡ª<code>UUserWidget</code>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/UMG/Public/UMG.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/UMG/Public/Slate/SObjectWidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/UMG/Public/IUMGModule.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/UMG/Public/UMGStyle.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/Core/Public/Misc/Paths.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/Core/Public/Misc/FileHelper.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Runtime/Core/Public/GenericPlatform/GenericPlatformFile.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURPROJECT_API</span> UDamageNumberWidget : <span class="keyword">public</span> UUserWidget</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">UPROPERTY</span>(meta = (BindWidget))</span><br><span class="line">    UTextBlock* DamageText;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Damage UI&quot;</span>)</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetDamageText</span><span class="params">(<span class="type">const</span> FString&amp; Text)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥éª¤3ï¼šå®ç°C-UIæ§ä»¶ç±»"><a href="#æ­¥éª¤3ï¼šå®ç°C-UIæ§ä»¶ç±»" class="headerlink" title="æ­¥éª¤3ï¼šå®ç°C++ UIæ§ä»¶ç±»"></a>æ­¥éª¤3ï¼šå®ç°C++ UIæ§ä»¶ç±»</h3><p>åœ¨<code>.cpp</code>æ–‡ä»¶ä¸­å®ç°<code>SetDamageText</code>å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DamageNumberWidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UDamageNumberWidget::SetDamageText</span><span class="params">(<span class="type">const</span> FString&amp; Text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (DamageText)</span><br><span class="line">    &#123;</span><br><span class="line">        DamageText-&gt;<span class="built_in">SetText</span>(FText::<span class="built_in">FromString</span>(Text));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥éª¤4ï¼šåœ¨æ¸¸æˆä¸­ä½¿ç”¨UIæ§ä»¶"><a href="#æ­¥éª¤4ï¼šåœ¨æ¸¸æˆä¸­ä½¿ç”¨UIæ§ä»¶" class="headerlink" title="æ­¥éª¤4ï¼šåœ¨æ¸¸æˆä¸­ä½¿ç”¨UIæ§ä»¶"></a>æ­¥éª¤4ï¼šåœ¨æ¸¸æˆä¸­ä½¿ç”¨UIæ§ä»¶</h3><p>åœ¨ä½ çš„æ¸¸æˆé€»è¾‘ä¸­ï¼Œåˆ›å»ºå¹¶æ˜¾ç¤ºUIæ§ä»¶ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;DamageNumberWidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AYourCharacter::TakeDamage</span><span class="params">(<span class="type">float</span> DamageAmount)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºUIæ§ä»¶å®ä¾‹</span></span><br><span class="line">    UDamageNumberWidget* DamageWidget = <span class="built_in">CreateWidget</span>&lt;UDamageNumberWidget&gt;(<span class="built_in">GetWorld</span>(), UDamageNumberWidget::<span class="built_in">StaticClass</span>());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (DamageWidget)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¼¤å®³æ–‡æœ¬</span></span><br><span class="line">        DamageWidget-&gt;<span class="built_in">SetDamageText</span>(FString::<span class="built_in">Printf</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;%d&quot;</span>), FMath::<span class="built_in">RoundToInt</span>(DamageAmount)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†UIæ§ä»¶æ·»åŠ åˆ°è§†å£</span></span><br><span class="line">        <span class="keyword">if</span> (GEngine &amp;&amp; GEngine-&gt;GameViewport)</span><br><span class="line">        &#123;</span><br><span class="line">            DamageWidget-&gt;<span class="built_in">AddToViewport</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ä»¥æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œä¾‹å¦‚æ·¡å‡ºæˆ–ç§»åŠ¨</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="è™šå¹»5è‡ªå®šä¹‰æ§åˆ¶å°å‡½æ•°"><a href="#è™šå¹»5è‡ªå®šä¹‰æ§åˆ¶å°å‡½æ•°" class="headerlink" title="è™šå¹»5è‡ªå®šä¹‰æ§åˆ¶å°å‡½æ•°"></a>è™šå¹»5è‡ªå®šä¹‰æ§åˆ¶å°å‡½æ•°</h1><p>åœ¨Unreal Engineï¼ˆUEï¼‰ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨æ§åˆ¶å°å‘½ä»¤ï¼ˆConsole Commandsï¼‰å°†å‡½æ•°æš´éœ²ç»™æ§åˆ¶å°ï¼Œä»è€Œä¾¿äºåœ¨æ¸¸æˆè¿è¡Œæ—¶è°ƒç”¨è¿™äº›å‡½æ•°ã€‚è¿™åœ¨è°ƒè¯•ã€æµ‹è¯•æˆ–å®ç°ä½œå¼ŠåŠŸèƒ½æ—¶éå¸¸æœ‰ç”¨ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤å’Œç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å®ç°è¿™ä¸€ç›®æ ‡ï¼š</p>
<h2 id="æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤"><a href="#æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤" class="headerlink" title="æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤"></a>æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤</h2><h3 id="1-åœ¨C-ä¸­åˆ›å»ºæ§åˆ¶å°å‘½ä»¤"><a href="#1-åœ¨C-ä¸­åˆ›å»ºæ§åˆ¶å°å‘½ä»¤" class="headerlink" title="1. åœ¨C++ä¸­åˆ›å»ºæ§åˆ¶å°å‘½ä»¤"></a>1. åœ¨C++ä¸­åˆ›å»ºæ§åˆ¶å°å‘½ä»¤</h3><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯C++ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤åˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤ï¼š</p>
<h4 id="a-åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°å’Œå‘½ä»¤"><a href="#a-åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°å’Œå‘½ä»¤" class="headerlink" title="a. åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°å’Œå‘½ä»¤"></a>a. åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°å’Œå‘½ä»¤</h4><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªç±»Â <code>MyGameInstance</code>ï¼Œä½ å¸Œæœ›åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤æ¥è°ƒç”¨æŸä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyGameInstance.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/GameInstance.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyGameInstance.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURPROJECT_API</span> UMyGameInstance : <span class="keyword">public</span> UGameInstance</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">UMyGameInstance</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æ—¶æ³¨å†Œæ§åˆ¶å°å‘½ä»¤</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Init</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ§åˆ¶å°å‘½ä»¤è°ƒç”¨çš„å‡½æ•°</span></span><br><span class="line">    <span class="built_in">UFUNCTION</span>(Exec)</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">CheatFunction</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="b-åœ¨æºæ–‡ä»¶ä¸­å®ç°å‡½æ•°"><a href="#b-åœ¨æºæ–‡ä»¶ä¸­å®ç°å‡½æ•°" class="headerlink" title="b. åœ¨æºæ–‡ä»¶ä¸­å®ç°å‡½æ•°"></a>b. åœ¨æºæ–‡ä»¶ä¸­å®ç°å‡½æ•°</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyGameInstance.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyGameInstance.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/Engine.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">UMyGameInstance::<span class="built_in">UMyGameInstance</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®æ­¤GameInstanceåœ¨æ¸¸æˆå¼€å§‹æ—¶è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line">    bAutoInitialize = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyGameInstance::Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">Init</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯ä»¥æ·»åŠ åˆå§‹åŒ–ä»£ç </span></span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;MyGameInstance Initialized&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyGameInstance::CheatFunction</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œç¼–å†™ä½ å¸Œæœ›æ‰§è¡Œçš„ä½œå¼Šé€»è¾‘</span></span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Cheat Function Called&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ï¼šç»™ç©å®¶å¢åŠ ç”Ÿå‘½å€¼ï¼ˆå‡è®¾ç©å®¶æœ‰ä¸€ä¸ªSetHealthçš„æ–¹æ³•ï¼‰</span></span><br><span class="line">    APlayerController* PlayerController = <span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line">    <span class="keyword">if</span> (PlayerController)</span><br><span class="line">    &#123;</span><br><span class="line">        ACharacter* Character = PlayerController-&gt;<span class="built_in">GetCharacter</span>();</span><br><span class="line">        <span class="keyword">if</span> (Character)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å‡è®¾Characteræœ‰ä¸€ä¸ªSetHealthæ–¹æ³•</span></span><br><span class="line">            <span class="comment">// Character-&gt;SetHealth(Character-&gt;GetHealth() + 100);</span></span><br><span class="line">            <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Player Health Increased by 100&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹<strong>â€‹è¯´æ˜ï¼šâ€‹</strong>â€‹</p>
<ul>
<li><code>UFUNCTION(Exec)</code>Â å®ç”¨äºå°†å‡½æ•°æš´éœ²ç»™æ§åˆ¶å°ï¼Œä½¿å…¶å¯ä»¥é€šè¿‡æ§åˆ¶å°å‘½ä»¤è°ƒç”¨ã€‚</li>
<li>ç¡®ä¿ä½ çš„Â <code>GameInstance</code>Â ç±»åœ¨é¡¹ç›®è®¾ç½®ä¸­è¢«æ­£ç¡®è®¾ç½®ä¸ºé»˜è®¤çš„Â <code>GameInstance</code>Â ç±»ã€‚</li>
</ul>
<h2 id="æ­¥éª¤äºŒï¼šç¡®ä¿æ§åˆ¶å°å‘½ä»¤å¯ç”¨"><a href="#æ­¥éª¤äºŒï¼šç¡®ä¿æ§åˆ¶å°å‘½ä»¤å¯ç”¨" class="headerlink" title="æ­¥éª¤äºŒï¼šç¡®ä¿æ§åˆ¶å°å‘½ä»¤å¯ç”¨"></a>æ­¥éª¤äºŒï¼šç¡®ä¿æ§åˆ¶å°å‘½ä»¤å¯ç”¨</h2><ol>
<li>â€‹<strong>â€‹å¯ç”¨æ§åˆ¶å°ï¼šâ€‹</strong>â€‹<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒUEçš„æ§åˆ¶å°å¯ä»¥é€šè¿‡æŒ‰ä¸‹Â <code>~</code>Â é”®ï¼ˆä½äºÂ <code>Tab</code>Â é”®ä¸Šæ–¹ï¼‰æ‰“å¼€ã€‚å¦‚æœæ— æ³•æ‰“å¼€ï¼Œå¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­æ£€æŸ¥è¾“å…¥è®¾ç½®ï¼Œç¡®ä¿æ²¡æœ‰ç¦ç”¨æ§åˆ¶å°ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æ³¨å†Œæ§åˆ¶å°å‘½ä»¤ï¼šâ€‹</strong>â€‹<ul>
<li>ä½¿ç”¨Â <code>UFUNCTION(Exec)</code>Â å®å£°æ˜çš„å‡½æ•°ä¼šè‡ªåŠ¨æ³¨å†Œä¸ºæ§åˆ¶å°å‘½ä»¤ã€‚ç¡®ä¿ä½ çš„ç±»ï¼ˆå¦‚Â <code>GameInstance</code>ï¼‰åœ¨æ¸¸æˆå¯åŠ¨æ—¶è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚</li>
</ul>
</li>
</ol>
<h2 id="æ­¥éª¤ä¸‰ï¼šæµ‹è¯•æ§åˆ¶å°å‘½ä»¤"><a href="#æ­¥éª¤ä¸‰ï¼šæµ‹è¯•æ§åˆ¶å°å‘½ä»¤" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šæµ‹è¯•æ§åˆ¶å°å‘½ä»¤"></a>æ­¥éª¤ä¸‰ï¼šæµ‹è¯•æ§åˆ¶å°å‘½ä»¤</h2><ol>
<li>â€‹<strong>â€‹è¿è¡Œæ¸¸æˆï¼šâ€‹</strong>â€‹<ul>
<li>å¯åŠ¨ä½ çš„æ¸¸æˆï¼Œç¡®ä¿Â <code>GameInstance</code>Â å·²æ­£ç¡®åˆå§‹åŒ–ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æ‰“å¼€æ§åˆ¶å°ï¼šâ€‹</strong>â€‹<ul>
<li>æŒ‰ä¸‹Â <code>~</code>Â é”®æ‰“å¼€æ§åˆ¶å°ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹è¾“å…¥å‘½ä»¤ï¼šâ€‹</strong>â€‹<ul>
<li>è¾“å…¥Â <code>CheatFunction</code>ï¼ˆå‡è®¾ä½ çš„å‡½æ•°åä¸ºÂ <code>CheatFunction</code>ï¼‰ï¼Œç„¶åæŒ‰ä¸‹Â <code>Enter</code>Â é”®ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æŸ¥çœ‹ç»“æœï¼šâ€‹</strong>â€‹<ul>
<li>å¦‚æœä¸€åˆ‡è®¾ç½®æ­£ç¡®ï¼Œä½ åº”è¯¥åœ¨è¾“å‡ºæ—¥å¿—ä¸­çœ‹åˆ°Â <code>Cheat Function Called</code>Â çš„æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶ä¸”ä½œå¼Šé€»è¾‘ï¼ˆå¦‚å¢åŠ ç”Ÿå‘½å€¼ï¼‰åº”è¢«æ‰§è¡Œã€‚</li>
</ul>
</li>
</ol>
<h2 id="ç¤ºä¾‹ï¼šå®Œæ•´å®ç°å¢åŠ ç©å®¶ç”Ÿå‘½å€¼çš„ä½œå¼ŠåŠŸèƒ½"><a href="#ç¤ºä¾‹ï¼šå®Œæ•´å®ç°å¢åŠ ç©å®¶ç”Ÿå‘½å€¼çš„ä½œå¼ŠåŠŸèƒ½" class="headerlink" title="ç¤ºä¾‹ï¼šå®Œæ•´å®ç°å¢åŠ ç©å®¶ç”Ÿå‘½å€¼çš„ä½œå¼ŠåŠŸèƒ½"></a>ç¤ºä¾‹ï¼šå®Œæ•´å®ç°å¢åŠ ç©å®¶ç”Ÿå‘½å€¼çš„ä½œå¼ŠåŠŸèƒ½</h2><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªç©å®¶è§’è‰²ç±»Â <code>MyCharacter</code>ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªÂ <code>SetHealth</code>Â æ–¹æ³•ï¼š</p>
<h3 id="1-åœ¨-MyCharacter-h-ä¸­å®šä¹‰æ–¹æ³•"><a href="#1-åœ¨-MyCharacter-h-ä¸­å®šä¹‰æ–¹æ³•" class="headerlink" title="1. åœ¨Â MyCharacter.hÂ ä¸­å®šä¹‰æ–¹æ³•"></a>1. åœ¨Â <code>MyCharacter.h</code>Â ä¸­å®šä¹‰æ–¹æ³•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Character.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOURPROJECT_API</span> AMyCharacter : <span class="keyword">public</span> ACharacter</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">AMyCharacter</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;Health&quot;</span>)</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">SetHealth</span><span class="params">(<span class="type">float</span> NewHealth)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UPROPERTY</span>(BlueprintReadOnly, Category = <span class="string">&quot;Health&quot;</span>)</span><br><span class="line">    <span class="type">float</span> CurrentHealth;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-åœ¨-MyCharacter-cpp-ä¸­å®ç°æ–¹æ³•"><a href="#2-åœ¨-MyCharacter-cpp-ä¸­å®ç°æ–¹æ³•" class="headerlink" title="2. åœ¨Â MyCharacter.cppÂ ä¸­å®ç°æ–¹æ³•"></a>2. åœ¨Â <code>MyCharacter.cpp</code>Â ä¸­å®ç°æ–¹æ³•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCharacter.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">AMyCharacter::<span class="built_in">AMyCharacter</span>()</span><br><span class="line">&#123;</span><br><span class="line">    PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line">    CurrentHealth = <span class="number">100.0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Super::<span class="built_in">Tick</span>(DeltaTime);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AMyCharacter::SetHealth</span><span class="params">(<span class="type">float</span> NewHealth)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CurrentHealth = FMath::<span class="built_in">Clamp</span>(NewHealth, <span class="number">0.0f</span>, <span class="number">100.0f</span>);</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Health set to %f&quot;</span>), CurrentHealth);</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯ä»¥æ·»åŠ æ›´æ–°UIæˆ–å…¶ä»–é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-ä¿®æ”¹-MyGameInstance-CheatFunction-æ¥è°ƒç”¨-SetHealth"><a href="#3-ä¿®æ”¹-MyGameInstance-CheatFunction-æ¥è°ƒç”¨-SetHealth" class="headerlink" title="3. ä¿®æ”¹Â MyGameInstance::CheatFunctionÂ æ¥è°ƒç”¨Â SetHealth"></a>3. ä¿®æ”¹Â <code>MyGameInstance::CheatFunction</code>Â æ¥è°ƒç”¨Â <code>SetHealth</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyGameInstance.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyGameInstance.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Engine/Engine.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyCharacter.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyGameInstance::CheatFunction</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Cheat Function Called&quot;</span>));</span><br><span class="line"></span><br><span class="line">    APlayerController* PlayerController = <span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line">    <span class="keyword">if</span> (PlayerController)</span><br><span class="line">    &#123;</span><br><span class="line">        ACharacter* Character = PlayerController-&gt;<span class="built_in">GetCharacter</span>();</span><br><span class="line">        <span class="keyword">if</span> (Character &amp;&amp; Character-&gt;<span class="built_in">IsA</span>&lt;AMyCharacter&gt;())</span><br><span class="line">        &#123;</span><br><span class="line">            AMyCharacter* MyCharacter = <span class="built_in">Cast</span>&lt;AMyCharacter&gt;(Character);</span><br><span class="line">            <span class="keyword">if</span> (MyCharacter)</span><br><span class="line">            &#123;</span><br><span class="line">                MyCharacter-&gt;<span class="built_in">SetHealth</span>(<span class="number">200.0f</span>); <span class="comment">// è®¾ç½®ç”Ÿå‘½å€¼ä¸º200</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â€‹<strong>â€‹æ³¨æ„ï¼šâ€‹</strong>â€‹</p>
<ul>
<li>ç¡®ä¿ä½ çš„ç©å®¶è§’è‰²ç±»æ˜¯Â <code>AMyCharacter</code>Â æˆ–è€…æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ç±»å‹è½¬æ¢ã€‚</li>
<li>ä½ å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±•ä½œå¼ŠåŠŸèƒ½ï¼Œå¦‚æ·»åŠ æ›´å¤šæ§åˆ¶å°å‘½ä»¤ï¼Œè°ƒç”¨ä¸åŒçš„å‡½æ•°ç­‰ã€‚</li>
</ul>
<h3 id="é¢å¤–æç¤º"><a href="#é¢å¤–æç¤º" class="headerlink" title="é¢å¤–æç¤º"></a>é¢å¤–æç¤º</h3><ul>
<li><p>â€‹<strong>â€‹å®‰å…¨æ€§è€ƒè™‘ï¼šâ€‹</strong>â€‹ æ§åˆ¶å°å‘½ä»¤å¯ä»¥ç”¨äºè°ƒè¯•å’Œå¼€å‘ï¼Œä½†åœ¨å‘å¸ƒç‰ˆæœ¬ä¸­åº”è°¨æ…ä½¿ç”¨ï¼Œé¿å…è¢«æ¶æ„åˆ©ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡ç¼–è¯‘æ¡ä»¶ï¼ˆå¦‚Â <code>UE_BUILD_SHIPPING</code>ï¼‰æ¥ç§»é™¤æˆ–ç¦ç”¨ä½œå¼Šç›¸å…³çš„æ§åˆ¶å°å‘½ä»¤ã€‚</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> !UE_BUILD_SHIPPING</span></span><br><span class="line">    <span class="built_in">UFUNCTION</span>(Exec)</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">CheatFunction</span><span class="params">()</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>â€‹<strong>â€‹å‘½ä»¤å‚æ•°ï¼šâ€‹</strong>â€‹ ä½ å¯ä»¥ä¸ºæ§åˆ¶å°å‘½ä»¤æ·»åŠ å‚æ•°ï¼Œä»¥å¢åŠ çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œå…è®¸ç©å®¶è¾“å…¥è¦å¢åŠ çš„ç”Ÿå‘½å€¼æ•°é‡ã€‚</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyGameInstance.h</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">UFUNCTION</span>(Exec)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CheatAddHealth</span><span class="params">(<span class="type">float</span> Amount)</span></span>;</span><br></pre></td></tr></table></figure>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyGameInstance.cpp</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UMyGameInstance::CheatAddHealth</span><span class="params">(<span class="type">float</span> Amount)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">UE_LOG</span>(LogTemp, Warning, <span class="built_in">TEXT</span>(<span class="string">&quot;Cheat Add Health Called with Amount: %f&quot;</span>), Amount);</span><br><span class="line"></span><br><span class="line">    APlayerController* PlayerController = <span class="built_in">GetFirstPlayerController</span>();</span><br><span class="line">    <span class="keyword">if</span> (PlayerController)</span><br><span class="line">    &#123;</span><br><span class="line">        ACharacter* Character = PlayerController-&gt;<span class="built_in">GetCharacter</span>();</span><br><span class="line">        <span class="keyword">if</span> (Character &amp;&amp; Character-&gt;<span class="built_in">IsA</span>&lt;AMyCharacter&gt;())</span><br><span class="line">        &#123;</span><br><span class="line">            AMyCharacter* MyCharacter = <span class="built_in">Cast</span>&lt;AMyCharacter&gt;(Character);</span><br><span class="line">            <span class="keyword">if</span> (MyCharacter)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">float</span> NewHealth = MyCharacter-&gt;<span class="built_in">GetCurrentHealth</span>() + Amount;</span><br><span class="line">                MyCharacter-&gt;<span class="built_in">SetHealth</span>(NewHealth);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  è¿™æ ·ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­è¾“å…¥Â <code>CheatAddHealth 50</code>Â æ¥å¢åŠ 50ç‚¹ç”Ÿå‘½å€¼ã€‚</p>
</li>
<li><p>â€‹<strong>â€‹æ–‡æ¡£ä¸è°ƒè¯•ï¼šâ€‹</strong>â€‹ ä¸ºä½ çš„æ§åˆ¶å°å‘½ä»¤ç¼–å†™æ–‡æ¡£ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜äº†è§£å¯ç”¨çš„ä½œå¼Šå‘½ä»¤åŠå…¶ç”¨é€”ã€‚åŒæ—¶ï¼Œåˆ©ç”¨UEçš„æ—¥å¿—ç³»ç»Ÿè®°å½•å‘½ä»¤è°ƒç”¨ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§ã€‚</p>
</li>
</ul>
<h2 id="ç»§æ‰¿gamemodeå¹¶ç®¡ç†è§’è‰²æ­»äº¡ç­‰äº‹ä»¶"><a href="#ç»§æ‰¿gamemodeå¹¶ç®¡ç†è§’è‰²æ­»äº¡ç­‰äº‹ä»¶" class="headerlink" title="ç»§æ‰¿gamemodeå¹¶ç®¡ç†è§’è‰²æ­»äº¡ç­‰äº‹ä»¶"></a>ç»§æ‰¿gamemodeå¹¶ç®¡ç†è§’è‰²æ­»äº¡ç­‰äº‹ä»¶</h2><p>![[Pasted image 20250411174105.png]]<br>è¿™æ®µC++ ä»£ç æ˜¯åŸºäºè™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰çš„ï¼Œä¸»è¦å®ç°äº†æ¸¸æˆä¸­ç©å®¶æ­»äº¡åçš„é‡ç”Ÿé€»è¾‘ä»¥åŠè®°å½•ç©å®¶è¢«å‡»æ€çš„ç›¸å…³æ—¥å¿—ä¿¡æ¯ã€‚</p>
<h3 id="å…·ä½“å‡½æ•°åŠŸèƒ½åˆ†æ"><a href="#å…·ä½“å‡½æ•°åŠŸèƒ½åˆ†æ" class="headerlink" title="å…·ä½“å‡½æ•°åŠŸèƒ½åˆ†æ"></a>å…·ä½“å‡½æ•°åŠŸèƒ½åˆ†æ</h3><ol>
<li>â€‹<strong>â€‹<code>ASGameModeBase::RespawnPlayerElapsed</code>Â å‡½æ•°â€‹</strong>â€‹<ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šè´Ÿè´£åœ¨åˆé€‚çš„æ—¶æœºè®©ç©å®¶è§’è‰²é‡æ–°ç”Ÿæˆã€‚</li>
<li>â€‹<strong>â€‹ä»£ç ç»†èŠ‚â€‹</strong>â€‹ï¼š<ul>
<li>é¦–å…ˆä½¿ç”¨Â <code>ensure(controller)</code>Â æ¥ç¡®ä¿ä¼ å…¥çš„Â <code>controller</code>ï¼ˆç©å®¶æ§åˆ¶å™¨æŒ‡é’ˆï¼‰æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœæœ‰æ•ˆï¼Œè°ƒç”¨Â <code>Controller-&gt;UnPossess()</code>Â æ–¹æ³•ï¼Œè¿™ä¼šè§£é™¤ç©å®¶æ§åˆ¶å™¨ä¸å½“å‰æ‰€æ§åˆ¶çš„è§’è‰²ä¹‹é—´çš„å…³è”ã€‚</li>
<li>ç„¶åè°ƒç”¨Â <code>RestartPlayer(controller)</code>Â æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šé‡æ–°ç”Ÿæˆç©å®¶è§’è‰²ï¼Œè®©ç©å®¶å¯ä»¥é‡æ–°å›åˆ°æ¸¸æˆä¸­ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>â€‹<strong>â€‹<code>ASGameModeBase::OnActorKilled</code>Â å‡½æ•°â€‹</strong>â€‹<ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šå½“ä¸€ä¸ªÂ <code>Actor</code>ï¼ˆè¿™é‡Œä¸»è¦å…³æ³¨ç©å®¶è§’è‰²è¢«å‡»æ€çš„æƒ…å†µï¼‰è¢«å‡»æ€æ—¶è¢«è°ƒç”¨ï¼Œå¤„ç†ç©å®¶è¢«å‡»æ€åçš„é‡ç”Ÿå»¶è¿Ÿä»¥åŠè®°å½•å‡»æ€æ—¥å¿—ç­‰æ“ä½œã€‚</li>
<li>â€‹<strong>â€‹ä»£ç ç»†èŠ‚â€‹</strong>â€‹ï¼š<ul>
<li>é¦–å…ˆå°†Â <code>VictimActor</code>Â å°è¯•è½¬æ¢ä¸ºÂ <code>ASCharacter</code>Â ç±»å‹çš„æŒ‡é’ˆÂ <code>player</code>ï¼Œå› ä¸ºåªæœ‰ç©å®¶è§’è‰²æ‰éœ€è¦è¿›è¡Œåç»­çš„é‡ç”Ÿç­‰å¤„ç†ã€‚å¦‚æœè½¬æ¢æˆåŠŸï¼ˆå³Â <code>player</code>Â ä¸ä¸ºç©ºï¼‰ï¼š<ul>
<li>å£°æ˜ä¸€ä¸ªÂ <code>FTimerHandle</code>Â ç±»å‹çš„å˜é‡Â <code>TimerHandle_RespawnDelay</code>ï¼Œç”¨äºç®¡ç†é‡ç”Ÿå»¶è¿Ÿå®šæ—¶å™¨ã€‚</li>
<li>å£°æ˜ä¸€ä¸ªÂ <code>FTimerDelegate</code>Â ç±»å‹çš„å˜é‡Â <code>Delegate</code>ï¼Œå¹¶é€šè¿‡Â <code>BindUFunction</code>Â å°†å½“å‰å¯¹è±¡çš„Â <code>RespawnPlayerElapsed</code>Â å‡½æ•°ç»‘å®šåˆ°è¯¥å§”æ‰˜ä¸Šï¼ŒåŒæ—¶ä¼ å…¥è¢«å‡»æ€ç©å®¶çš„æ§åˆ¶å™¨æŒ‡é’ˆä½œä¸ºå‚æ•°ã€‚è¿™æ ·åœ¨å®šæ—¶å™¨è§¦å‘æ—¶å°±ä¼šè°ƒç”¨Â <code>RespawnPlayerElapsed</code>Â å‡½æ•°æ¥é‡ç”Ÿç©å®¶ã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªÂ <code>float</code>Â ç±»å‹çš„å˜é‡Â <code>RespawnDelay</code>Â å¹¶èµ‹å€¼ä¸ºÂ <code>2.0f</code>ï¼Œè¡¨ç¤ºé‡ç”Ÿå»¶è¿Ÿæ—¶é—´ä¸º2ç§’ã€‚</li>
<li>æœ€åé€šè¿‡Â <code>GetWorldTimerManager().SetTimer</code>Â æ–¹æ³•è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´ï¼ˆ<code>RespawnDelay</code>ï¼‰åˆ°è¾¾æ—¶ï¼Œä¼šè§¦å‘ç»‘å®šçš„å§”æ‰˜å‡½æ•°Â <code>Delegate</code>ï¼Œå¹¶ä¸”è®¾ç½®Â <code>false</code>Â è¡¨ç¤ºè¯¥å®šæ—¶å™¨åªè§¦å‘ä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨Â <code>UE_LOG</code>Â å®è®°å½•ç©å®¶è¢«å‡»æ€çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¢«å‡»æ€ç©å®¶çš„åå­—å’Œå‡»æ€è€…çš„åå­—ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•æ–¹å‘"><a href="#å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•æ–¹å‘" class="headerlink" title="å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•æ–¹å‘"></a>å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•æ–¹å‘</h3><ul>
<li>â€‹<strong>â€‹å¯é…ç½®çš„é‡ç”Ÿæ—¶é—´â€‹</strong>â€‹ï¼šç›®å‰é‡ç”Ÿå»¶è¿Ÿæ—¶é—´Â <code>RespawnDelay</code>Â æ˜¯ç¡¬ç¼–ç ä¸ºÂ <code>2.0f</code>ï¼Œå¯ä»¥è€ƒè™‘ä»é…ç½®æ–‡ä»¶æˆ–æ¸¸æˆè®¾ç½®ä¸­è¯»å–è¯¥å€¼ï¼Œä»¥ä¾¿åœ¨ä¸åŒåœºæ™¯æˆ–æ¸¸æˆæ¨¡å¼ä¸‹çµæ´»è°ƒæ•´ã€‚</li>
<li>â€‹<strong>â€‹æ›´å¤šçš„å‡»æ€æ—¥å¿—ä¿¡æ¯â€‹</strong>â€‹ï¼šé™¤äº†è®°å½•ç©å®¶åå­—ï¼Œè¿˜å¯ä»¥è®°å½•å‡»æ€å‘ç”Ÿçš„åœ°ç‚¹ã€ä½¿ç”¨çš„æ­¦å™¨ç­‰ä¿¡æ¯ï¼Œä»¥æä¾›æ›´è¯¦ç»†çš„å‡»æ€åˆ†ææ•°æ®ã€‚</li>
<li>â€‹<strong>â€‹é”™è¯¯å¤„ç†ä¼˜åŒ–â€‹</strong>â€‹ï¼šå¯¹äºÂ <code>Cast</code>Â æ“ä½œï¼Œç›®å‰åªæ˜¯ç®€å•åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼Œå¯ä»¥è€ƒè™‘åœ¨è½¬æ¢å¤±è´¥æ—¶è¿›è¡Œæ›´è¯¦ç»†çš„é”™è¯¯è®°å½•æˆ–å¤„ç†ï¼Œæ¯”å¦‚è®°å½•ä¸€ä¸ªè­¦å‘Šæ—¥å¿—è¯´æ˜è½¬æ¢å¤±è´¥çš„åŸå› ã€‚</li>
</ul>
<h1 id="ç»§æ‰¿è“å›¾å‡½æ•°åº“æ·»åŠ è‡ªå®šä¹‰é™æ€å‡½æ•°"><a href="#ç»§æ‰¿è“å›¾å‡½æ•°åº“æ·»åŠ è‡ªå®šä¹‰é™æ€å‡½æ•°" class="headerlink" title="ç»§æ‰¿è“å›¾å‡½æ•°åº“æ·»åŠ è‡ªå®šä¹‰é™æ€å‡½æ•°"></a>ç»§æ‰¿è“å›¾å‡½æ•°åº“æ·»åŠ è‡ªå®šä¹‰é™æ€å‡½æ•°</h1><p>![[Pasted image 20250411174833.png]]</p>
<ol>
<li><p>â€‹<strong>â€‹<code>ApplyDamage</code>å‡½æ•°â€‹</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šå¯¹ç›®æ ‡è§’è‰²ï¼ˆ<code>TargetActor</code>ï¼‰åº”ç”¨ä¼¤å®³ï¼Œä¼¤å®³ç”±ä¼¤å®³æ–½åŠ è€…ï¼ˆ<code>DamageCauser</code>ï¼‰é€ æˆï¼Œä¼¤å®³é‡ä¸º<code>DamageAmount</code>ã€‚</li>
<li>â€‹<strong>â€‹å®ç°é€»è¾‘â€‹</strong>â€‹ï¼š<ul>
<li>é¦–å…ˆé€šè¿‡<code>USAttributeComponent::GetAttributes(TargetActor)</code>è·å–ç›®æ ‡è§’è‰²çš„å±æ€§ç»„ä»¶ï¼ˆ<code>AttributeComp</code>ï¼‰ã€‚</li>
<li>å¦‚æœæˆåŠŸè·å–åˆ°å±æ€§ç»„ä»¶ï¼ˆå³<code>AttributeComp</code>ä¸ä¸ºç©ºï¼‰ï¼Œåˆ™è°ƒç”¨å±æ€§ç»„ä»¶çš„<code>ApplyHealthChange</code>æ–¹æ³•ï¼Œä¼ å…¥ä¼¤å®³æ–½åŠ è€…å’Œä¼¤å®³é‡ï¼Œæ¥åº”ç”¨å¥åº·å€¼çš„å˜åŒ–ï¼Œå¹¶è¿”å›è¯¥æ“ä½œçš„ç»“æœï¼ˆå¸ƒå°”å€¼ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è·å–åˆ°å±æ€§ç»„ä»¶ï¼Œåˆ™ç›´æ¥è¿”å›<code>false</code>ï¼Œè¡¨ç¤ºä¼¤å®³åº”ç”¨å¤±è´¥ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>â€‹<strong>â€‹<code>ApplyDirectionalDamage</code>å‡½æ•°â€‹</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šå¯¹ç›®æ ‡è§’è‰²åº”ç”¨å¸¦æœ‰æ–¹å‘æ€§çš„ä¼¤å®³ï¼Œé™¤äº†ä¼¤å®³æ–½åŠ è€…ã€ç›®æ ‡è§’è‰²å’Œä¼¤å®³é‡å¤–ï¼Œè¿˜è€ƒè™‘äº†ç¢°æ’ç»“æœï¼ˆ<code>HitResult</code>ï¼‰ï¼Œç”¨äºåœ¨ç‰¹å®šæ–¹å‘ä¸Šæ–½åŠ å†²åŠ›ã€‚</li>
<li>â€‹<strong>â€‹å®ç°é€»è¾‘â€‹</strong>â€‹ï¼š<ul>
<li>é¦–å…ˆè°ƒç”¨<code>ApplyDamage</code>å‡½æ•°å°è¯•å¯¹ç›®æ ‡è§’è‰²åº”ç”¨ä¼¤å®³ã€‚å¦‚æœ<code>ApplyDamage</code>è¿”å›<code>true</code>ï¼ˆå³ä¼¤å®³åº”ç”¨æˆåŠŸï¼‰ï¼š<ul>
<li>ä»ç¢°æ’ç»“æœï¼ˆ<code>HitResult</code>ï¼‰ä¸­è·å–å¯¹åº”çš„ç»„ä»¶ï¼ˆ<code>HitComp</code>ï¼‰ã€‚</li>
<li>æ£€æŸ¥è¯¥ç»„ä»¶æ˜¯å¦æ­£åœ¨æ¨¡æ‹Ÿç‰©ç†ï¼ˆé€šè¿‡<code>HitComp-&gt;IsSimulatingPhysics(HitResult.BoneName)</code>ï¼‰ã€‚</li>
<li>å¦‚æœç»„ä»¶æ­£åœ¨æ¨¡æ‹Ÿç‰©ç†ï¼Œåˆ™é€šè¿‡<code>HitComp-&gt;AddImpulseAtLocation</code>æ–¹æ³•åœ¨ç¢°æ’ç‚¹ï¼ˆ<code>HitResult.ImpactPoint</code>ï¼‰æ–½åŠ ä¸€ä¸ªå†²åŠ›ï¼Œå†²åŠ›çš„æ–¹å‘ç”±ç¢°æ’æ³•çº¿ï¼ˆ<code>HitResult.ImpactNormal</code>ï¼‰å’Œå¤§å°ï¼ˆ<code>30000.0f</code>ï¼‰å†³å®šï¼ŒåŒæ—¶æŒ‡å®šäº†å—å½±å“çš„éª¨éª¼åç§°ï¼ˆ<code>HitResult.BoneName</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>æœ€åè¿”å›<code>true</code>ï¼Œè¡¨ç¤ºå¸¦æœ‰æ–¹å‘æ€§çš„ä¼¤å®³åº”ç”¨æˆåŠŸã€‚å¦‚æœ<code>ApplyDamage</code>è¿”å›<code>false</code>ï¼Œåˆ™æ•´ä¸ªå‡½æ•°ä¹Ÿè¿”å›<code>false</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•ç‚¹"><a href="#å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•ç‚¹" class="headerlink" title="å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•ç‚¹"></a>å¯èƒ½çš„æ”¹è¿›æˆ–æ‰©å±•ç‚¹</h3><ol>
<li>â€‹<strong>â€‹é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•â€‹</strong>â€‹ï¼šç›®å‰ä»£ç åœ¨è·å–å±æ€§ç»„ä»¶å¤±è´¥æˆ–ç»„ä»¶ä¸æ¨¡æ‹Ÿç‰©ç†æ—¶åªæ˜¯ç®€å•åœ°è¿”å›ç»“æœï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ ä¸€äº›æ—¥å¿—è®°å½•ï¼Œæ–¹ä¾¿è°ƒè¯•æ—¶äº†è§£å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆæƒ…å†µã€‚ä¾‹å¦‚ä½¿ç”¨<code>UE_LOG</code>å®ï¼ˆå¦‚æœæ˜¯è™šå¹»å¼•æ“é¡¹ç›®ï¼‰æ¥è®°å½•ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>â€‹<strong>â€‹ä¼¤å®³ç±»å‹å’Œæ•ˆæœæ‰©å±•â€‹</strong>â€‹ï¼šç›®å‰åªè€ƒè™‘äº†ç®€å•çš„å¥åº·å€¼å˜åŒ–å’Œæ–¹å‘æ€§å†²åŠ›ï¼Œå®é™…æ¸¸æˆä¸­å¯èƒ½éœ€è¦è€ƒè™‘æ›´å¤šä¼¤å®³ç±»å‹ï¼ˆå¦‚ç«ç„°ä¼¤å®³ã€æ¯’ç´ ä¼¤å®³ç­‰ï¼‰ä»¥åŠä¸åŒçš„ä¼¤å®³æ•ˆæœï¼ˆå¦‚å‡é€Ÿã€çœ©æ™•ç­‰ï¼‰ï¼Œå¯ä»¥åœ¨<code>AttributeComp</code>çš„<code>ApplyHealthChange</code>æ–¹æ³•ä¸­è¿›ä¸€æ­¥æ‰©å±•ç›¸å…³é€»è¾‘ã€‚</li>
<li>â€‹<strong>â€‹æ€§èƒ½ä¼˜åŒ–â€‹</strong>â€‹ï¼šå¦‚æœé¢‘ç¹è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼Œæ¯”å¦‚å‡å°‘ä¸å¿…è¦çš„ç»„ä»¶è·å–æ“ä½œç­‰ã€‚</li>
</ol>
<p>åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­ç»§æ‰¿<code>UBlueprintFunctionLibrary</code>æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦æ€æƒ³å’Œå®é™…ç”¨é€”ï¼š</p>
<h3 id="æä¾›å¯åœ¨è“å›¾ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰å‡½æ•°"><a href="#æä¾›å¯åœ¨è“å›¾ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="æä¾›å¯åœ¨è“å›¾ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰å‡½æ•°"></a>æä¾›å¯åœ¨è“å›¾ä¸­ä½¿ç”¨çš„è‡ªå®šä¹‰å‡½æ•°</h3><p><code>UBlueprintFunctionLibrary</code>æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œç”¨äºåˆ›å»ºå¯ä»¥åœ¨è™šå¹»è“å›¾ç³»ç»Ÿä¸­è°ƒç”¨çš„è‡ªå®šä¹‰å‡½æ•°é›†åˆã€‚é€šè¿‡ç»§æ‰¿å®ƒï¼Œå¼€å‘è€…èƒ½å¤Ÿå°†ä¸€äº›é€šç”¨çš„ã€å¤æ‚çš„æˆ–è€…éœ€è¦åœ¨è“å›¾å±‚é¢å¤ç”¨çš„é€»è¾‘å°è£…æˆå‡½æ•°ã€‚è¿™æ ·ï¼Œå…³å¡è®¾è®¡å¸ˆã€ç­–åˆ’äººå‘˜ç­‰éç¨‹åºå‘˜ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°åœ¨è“å›¾èŠ‚ç‚¹ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œè€Œæ— éœ€ç¼–å†™å®é™…çš„C++ä»£ç ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡å’Œçµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªRPGæ¸¸æˆä¸­ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª<code>UBlueprintFunctionLibrary</code>çš„ç±»ï¼Œé‡Œé¢åŒ…å«è®¡ç®—è§’è‰²ç»éªŒå€¼å‡çº§æ‰€éœ€ç»éªŒçš„å‡½æ•°ï¼Œè“å›¾è®¾è®¡å¸ˆåœ¨è®¾ç½®è§’è‰²å‡çº§é€»è¾‘æ—¶å°±å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>
<h3 id="ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–"><a href="#ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–" class="headerlink" title="ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–"></a>ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–</h3><p>å°†ç›¸å…³çš„åŠŸèƒ½å‡½æ•°é›†ä¸­æ”¾åœ¨ä¸€ä¸ªç»§æ‰¿è‡ª<code>UBlueprintFunctionLibrary</code>çš„ç±»ä¸­ï¼Œæœ‰åŠ©äºå¯¹ä»£ç è¿›è¡Œè‰¯å¥½çš„ç»„ç»‡å’Œç®¡ç†ã€‚ä¸åŒçš„åŠŸèƒ½æ¨¡å—å¯ä»¥åˆ†åˆ«å°è£…åœ¨ä¸åŒçš„å‡½æ•°åº“ç±»é‡Œï¼Œä½¿å¾—ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªå¼€æ”¾ä¸–ç•Œæ¸¸æˆä¸­ï¼Œå¯èƒ½ä¼šæœ‰ä¸“é—¨å¤„ç†ç¯å¢ƒäº¤äº’çš„å‡½æ•°åº“ç±»ï¼ŒåŒ…å«æ£€æµ‹è§’è‰²ä¸åœºæ™¯ç‰©ä½“ç¢°æ’ã€è·å–é™„è¿‘èµ„æºç‚¹ç­‰å‡½æ•°ï¼›è¿˜æœ‰å¤„ç†è§’è‰²æˆ˜æ–—çš„å‡½æ•°åº“ç±»ï¼ŒåŒ…å«è®¡ç®—ä¼¤å®³ã€åº”ç”¨çŠ¶æ€æ•ˆæœç­‰å‡½æ•°ã€‚</p>
<h3 id="å¤ç”¨æ€§å’Œä¸€è‡´æ€§"><a href="#å¤ç”¨æ€§å’Œä¸€è‡´æ€§" class="headerlink" title="å¤ç”¨æ€§å’Œä¸€è‡´æ€§"></a>å¤ç”¨æ€§å’Œä¸€è‡´æ€§</h3><p>ä¸€æ—¦åœ¨<code>UBlueprintFunctionLibrary</code>çš„æ´¾ç”Ÿç±»ä¸­å®ç°äº†æŸä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥åœ¨æ•´ä¸ªé¡¹ç›®çš„å¤šä¸ªè“å›¾ä¸­é‡å¤ä½¿ç”¨ã€‚è¿™ä¿è¯äº†åœ¨ä¸åŒåœ°æ–¹è°ƒç”¨ç›¸åŒåŠŸèƒ½æ—¶é€»è¾‘çš„ä¸€è‡´æ€§ï¼Œé¿å…äº†é‡å¤ç¼–å†™ç›¸åŒä»£ç å¯¼è‡´çš„æ½œåœ¨é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œè®¡ç®—ä¸¤ç‚¹ä¹‹é—´è·ç¦»çš„å‡½æ•°ï¼Œåœ¨æ¸¸æˆä¸­çš„å¯»è·¯ç³»ç»Ÿã€ç‰©ä½“äº¤äº’åˆ¤å®šç­‰å¤šä¸ªåœºæ™¯éƒ½å¯èƒ½ç”¨åˆ°ï¼Œé€šè¿‡å°è£…åœ¨å‡½æ•°åº“ç±»ä¸­ï¼Œå°±å¯ä»¥ç¡®ä¿åœ¨å„ä¸ªåœ°æ–¹è®¡ç®—çš„ç»“æœéƒ½æ˜¯å‡†ç¡®ä¸€è‡´çš„ã€‚</p>
<h3 id="ä¸è™šå¹»å¼•æ“ç”Ÿæ€é›†æˆ"><a href="#ä¸è™šå¹»å¼•æ“ç”Ÿæ€é›†æˆ" class="headerlink" title="ä¸è™šå¹»å¼•æ“ç”Ÿæ€é›†æˆ"></a>ä¸è™šå¹»å¼•æ“ç”Ÿæ€é›†æˆ</h3><p>è™šå¹»å¼•æ“çš„è“å›¾ç³»ç»Ÿæ˜¯å…¶é‡è¦çš„å¯è§†åŒ–ç¼–ç¨‹å·¥å…·ï¼Œ<code>UBlueprintFunctionLibrary</code>ä½œä¸ºä¸è“å›¾ç³»ç»Ÿç´§å¯†é›†æˆçš„åŸºç±»ï¼Œä½¿å¾—è‡ªå®šä¹‰å‡½æ•°èƒ½å¤Ÿæ— ç¼åœ°èå…¥åˆ°å¼•æ“çš„ç”Ÿæ€ç³»ç»Ÿå½“ä¸­ã€‚å¼€å‘è€…å¯ä»¥åˆ©ç”¨è“å›¾çš„å¯è§†åŒ–è¿çº¿ã€å˜é‡ä¼ é€’ç­‰ç‰¹æ€§ï¼Œæ–¹ä¾¿åœ°ä¸è¿™äº›è‡ªå®šä¹‰å‡½æ•°è¿›è¡Œäº¤äº’ï¼Œå……åˆ†å‘æŒ¥è™šå¹»å¼•æ“å¼ºå¤§çš„å¯è§†åŒ–å¼€å‘ä¼˜åŠ¿ã€‚</p>
<p>æ€»ä¹‹ï¼Œç»§æ‰¿<code>UBlueprintFunctionLibrary</code>ä¸»è¦æ˜¯ä¸ºäº†åœ¨è™šå¹»å¼•æ“é¡¹ç›®ä¸­æ›´å¥½åœ°ç»„ç»‡ã€å¤ç”¨ä»£ç ï¼Œå¹¶å¢å¼ºä»£ç çš„å¯è®¿é—®æ€§å’Œæ˜“ç”¨æ€§ï¼Œä»¥é€‚åº”ä¸åŒè§’è‰²åœ¨æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­çš„éœ€æ±‚ã€‚</p>
<h1 id="metaæ ‡è¯†ç¬¦"><a href="#metaæ ‡è¯†ç¬¦" class="headerlink" title="metaæ ‡è¯†ç¬¦"></a>metaæ ‡è¯†ç¬¦</h1><p>åœ¨è™šå¹»å¼•æ“ï¼ˆUnreal Engineï¼‰ä¸­ï¼Œ<code>Meta</code>Â æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸»è¦ç”¨äºÂ <strong>å±æ€§ï¼ˆUPROPERTYï¼‰</strong>ã€<strong>å‡½æ•°ï¼ˆUFUNCTIONï¼‰</strong>Â å’ŒÂ <strong>ç±»ï¼ˆUCLASSï¼‰</strong>Â çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰æ ‡è®°ï¼Œä»¥æ§åˆ¶ç¼–è¾‘å™¨è¡Œä¸ºã€åºåˆ—åŒ–ã€è“å›¾äº¤äº’ç­‰ã€‚ä»¥ä¸‹æ˜¯Â <code>Meta</code>Â çš„è¯¦ç»†è§£æï¼š</p>
<hr>
<h2 id="1-Meta-çš„ä½œç”¨"><a href="#1-Meta-çš„ä½œç”¨" class="headerlink" title="1. Meta çš„ä½œç”¨"></a><strong>1. Meta çš„ä½œç”¨</strong></h2><p><code>Meta</code>Â ç”¨äºæä¾›é¢å¤–çš„ä¿¡æ¯æˆ–æŒ‡ä»¤ï¼Œä¸»è¦å½±å“ï¼š</p>
<ul>
<li><p><strong>ç¼–è¾‘å™¨ UI è¡Œä¸º</strong>ï¼ˆå¦‚åˆ†ç±»ã€æ˜¾ç¤ºåç§°ã€å·¥å…·æç¤ºï¼‰</p>
</li>
<li><p><strong>åºåˆ—åŒ–è§„åˆ™</strong>ï¼ˆå¦‚æ˜¯å¦ä¿å­˜åˆ°ç£ç›˜ï¼‰</p>
</li>
<li><p><strong>è“å›¾äº¤äº’</strong>ï¼ˆå¦‚æ˜¯å¦åœ¨è“å›¾ä¸­å¯è§ï¼‰</p>
</li>
<li><p><strong>è¿è¡Œæ—¶è¡Œä¸º</strong>ï¼ˆå¦‚ç½‘ç»œå¤åˆ¶æ¡ä»¶ï¼‰</p>
</li>
</ul>
<hr>
<h2 id="2-å¸¸è§ä½¿ç”¨åœºæ™¯"><a href="#2-å¸¸è§ä½¿ç”¨åœºæ™¯" class="headerlink" title="2. å¸¸è§ä½¿ç”¨åœºæ™¯"></a><strong>2. å¸¸è§ä½¿ç”¨åœºæ™¯</strong></h2><h3 id="1-åœ¨-UPROPERTY-ä¸­ä½¿ç”¨-Meta"><a href="#1-åœ¨-UPROPERTY-ä¸­ä½¿ç”¨-Meta" class="headerlink" title="(1) åœ¨Â UPROPERTYÂ ä¸­ä½¿ç”¨ Meta"></a><strong>(1) åœ¨Â <code>UPROPERTY</code>Â ä¸­ä½¿ç”¨ Meta</strong></h3><p>UPROPERTY(EditAnywhere, BlueprintReadWrite, Category &#x3D; â€œCharacterâ€,<br>          meta &#x3D; (DisplayName &#x3D; â€œç”Ÿå‘½å€¼â€, ToolTip &#x3D; â€œè§’è‰²çš„ç”Ÿå‘½å€¼ï¼ŒèŒƒå›´ä¸º0-100â€))<br>float Health;</p>
<p><strong>å¸¸ç”¨ Meta å‚æ•°</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>DisplayName</code></td>
<td>åœ¨ç¼–è¾‘å™¨ä¸­çš„æ˜¾ç¤ºåç§°ï¼ˆè¦†ç›–å˜é‡åï¼‰</td>
</tr>
<tr>
<td><code>ToolTip</code></td>
<td>é¼ æ ‡æ‚¬åœæ—¶çš„æç¤ºæ–‡æœ¬</td>
</tr>
<tr>
<td><code>ClampMin</code>&#x2F;<code>ClampMax</code></td>
<td>é™åˆ¶è¾“å…¥èŒƒå›´ï¼ˆå¦‚Â <code>ClampMin=&quot;0&quot;</code>ï¼‰</td>
</tr>
<tr>
<td><code>UIMin</code>&#x2F;<code>UIMax</code></td>
<td>åœ¨ Slider æ§ä»¶ä¸­çš„èŒƒå›´</td>
</tr>
<tr>
<td><code>EditCondition</code></td>
<td>åŠ¨æ€æ§åˆ¶å±æ€§æ˜¯å¦å¯ç¼–è¾‘ï¼ˆå¦‚Â <code>EditCondition=&quot;bIsEditable&quot;</code>ï¼‰</td>
</tr>
<tr>
<td><code>BlueprintPrivate</code></td>
<td>å¯¹è“å›¾éšè—è¯¥å±æ€§</td>
</tr>
</tbody></table>
<hr>
<h3 id="2-åœ¨-UFUNCTION-ä¸­ä½¿ç”¨-Meta"><a href="#2-åœ¨-UFUNCTION-ä¸­ä½¿ç”¨-Meta" class="headerlink" title="(2) åœ¨Â UFUNCTIONÂ ä¸­ä½¿ç”¨ Meta"></a><strong>(2) åœ¨Â <code>UFUNCTION</code>Â ä¸­ä½¿ç”¨ Meta</strong></h3><p>UFUNCTION(BlueprintCallable, Category &#x3D; â€œAIâ€,<br>          meta &#x3D; (DisplayName &#x3D; â€œè®¡ç®—ä¼¤å®³â€, Keywords &#x3D; â€œDamage|Attackâ€))<br>void CalculateDamage(float BaseDamage);</p>
<p><strong>å¸¸ç”¨ Meta å‚æ•°</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>Keywords</code></td>
<td>åœ¨è“å›¾æœç´¢æ—¶çš„å…³é”®å­—ï¼ˆç”¨ &#96;</td>
</tr>
<tr>
<td><code>DefaultToSelf</code></td>
<td>è‡ªåŠ¨ä¼ é€’Â <code>self</code>Â å¯¹è±¡ï¼ˆå¦‚Â <code>DefaultToSelf=&quot;Target&quot;</code>ï¼‰</td>
</tr>
<tr>
<td><code>HidePin</code></td>
<td>éšè—è“å›¾ä¸­å‡½æ•°çš„æŸäº›å¼•è„š</td>
</tr>
<tr>
<td><code>AdvancedDisplay</code></td>
<td>å°†å‚æ•°æ ‡è®°ä¸ºâ€œé«˜çº§â€ï¼ˆé»˜è®¤æŠ˜å ï¼‰</td>
</tr>
</tbody></table>
<hr>
<h3 id="3-åœ¨-UCLASS-ä¸­ä½¿ç”¨-Meta"><a href="#3-åœ¨-UCLASS-ä¸­ä½¿ç”¨-Meta" class="headerlink" title="(3) åœ¨Â UCLASSÂ ä¸­ä½¿ç”¨ Meta"></a><strong>(3) åœ¨Â <code>UCLASS</code>Â ä¸­ä½¿ç”¨ Meta</strong></h3><p>UCLASS(Blueprintable, meta &#x3D; (DisplayName &#x3D; â€œç©å®¶è§’è‰²â€, ShortToolTip &#x3D; â€œå¯æ§åˆ¶çš„ç©å®¶å®ä½“â€))<br>class APlayerCharacter : public ACharacter;</p>
<p><strong>å¸¸ç”¨ Meta å‚æ•°</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>BlueprintType</code></td>
<td>å…è®¸è¯¥ç±»åœ¨è“å›¾ä¸­ä½œä¸ºå˜é‡ç±»å‹</td>
</tr>
<tr>
<td><code>IsBlueprintBase</code></td>
<td>å…è®¸è“å›¾ç»§æ‰¿è¯¥ç±»</td>
</tr>
<tr>
<td><code>ChildCanTick</code></td>
<td>å­ç±»æ˜¯å¦å¯ä»¥é‡å†™Â <code>Tick</code>Â äº‹ä»¶</td>
</tr>
</tbody></table>
<hr>
<h2 id="3-é«˜çº§ç”¨æ³•"><a href="#3-é«˜çº§ç”¨æ³•" class="headerlink" title="3. é«˜çº§ç”¨æ³•"></a><strong>3. é«˜çº§ç”¨æ³•</strong></h2><h3 id="1-åŠ¨æ€ç¼–è¾‘æ¡ä»¶"><a href="#1-åŠ¨æ€ç¼–è¾‘æ¡ä»¶" class="headerlink" title="(1) åŠ¨æ€ç¼–è¾‘æ¡ä»¶"></a><strong>(1) åŠ¨æ€ç¼–è¾‘æ¡ä»¶</strong></h3><p>é€šè¿‡Â <code>meta = (EditCondition)</code>Â å®ç°å±æ€§è”åŠ¨çš„æ˜¾éš&#x2F;ç¦ç”¨é€»è¾‘ï¼š</p>
<p>UPROPERTY(EditAnywhere)<br>bool bUseCustomSpeed;</p>
<p>UPROPERTY(EditAnywhere, meta &#x3D; (EditCondition &#x3D; â€œbUseCustomSpeedâ€))<br>float CustomSpeed; &#x2F;&#x2F; ä»…å½“bUseCustomSpeedä¸ºtrueæ—¶å¯ç¼–è¾‘</p>
<h3 id="2-ç½‘ç»œåŒæ­¥æ§åˆ¶"><a href="#2-ç½‘ç»œåŒæ­¥æ§åˆ¶" class="headerlink" title="(2) ç½‘ç»œåŒæ­¥æ§åˆ¶"></a><strong>(2) ç½‘ç»œåŒæ­¥æ§åˆ¶</strong></h3><p>UPROPERTY(Replicated, meta &#x3D; (ReplicateCondition &#x3D; â€œbIsAliveâ€))<br>float Health; &#x2F;&#x2F; ä»…åœ¨bIsAliveä¸ºtrueæ—¶åŒæ­¥</p>
<h3 id="3-èµ„äº§å¼•ç”¨è§„åˆ™"><a href="#3-èµ„äº§å¼•ç”¨è§„åˆ™" class="headerlink" title="(3) èµ„äº§å¼•ç”¨è§„åˆ™"></a><strong>(3) èµ„äº§å¼•ç”¨è§„åˆ™</strong></h3><p>UPROPERTY(EditAnywhere, meta &#x3D; (AllowedClasses &#x3D; â€œTexture2D,Materialâ€))<br>UObject* VisualAsset; &#x2F;&#x2F; é™åˆ¶åªèƒ½é€‰æ‹©çº¹ç†æˆ–æè´¨</p>
<hr>
<h2 id="4-å®é™…æ¡ˆä¾‹"><a href="#4-å®é™…æ¡ˆä¾‹" class="headerlink" title="4. å®é™…æ¡ˆä¾‹"></a><strong>4. å®é™…æ¡ˆä¾‹</strong></h2><h3 id="æ¡ˆä¾‹1ï¼šå±æ€§åˆ†ç±»ä¸å·¥å…·æç¤º"><a href="#æ¡ˆä¾‹1ï¼šå±æ€§åˆ†ç±»ä¸å·¥å…·æç¤º" class="headerlink" title="æ¡ˆä¾‹1ï¼šå±æ€§åˆ†ç±»ä¸å·¥å…·æç¤º"></a><strong>æ¡ˆä¾‹1ï¼šå±æ€§åˆ†ç±»ä¸å·¥å…·æç¤º</strong></h3><p>UPROPERTY(EditDefaultsOnly, Category &#x3D; â€œWeaponâ€,<br>          meta &#x3D; (DisplayName &#x3D; â€œä¼¤å®³å€¼â€, ToolTip &#x3D; â€œæ­¦å™¨çš„åŸºç¡€ä¼¤å®³å€¼â€))<br>float BaseDamage;</p>
<h3 id="æ¡ˆä¾‹2ï¼šåŠ¨æ€æ»‘å—æ§åˆ¶"><a href="#æ¡ˆä¾‹2ï¼šåŠ¨æ€æ»‘å—æ§åˆ¶" class="headerlink" title="æ¡ˆä¾‹2ï¼šåŠ¨æ€æ»‘å—æ§åˆ¶"></a><strong>æ¡ˆä¾‹2ï¼šåŠ¨æ€æ»‘å—æ§åˆ¶</strong></h3><p>UPROPERTY(EditAnywhere, meta &#x3D; (UIMin &#x3D; 0, UIMax &#x3D; 100, ClampMin &#x3D; 0, ClampMax &#x3D; 100))<br>int32 AccuracyPercent;</p>
<hr>
<h2 id="5-æ³¨æ„äº‹é¡¹"><a href="#5-æ³¨æ„äº‹é¡¹" class="headerlink" title="5. æ³¨æ„äº‹é¡¹"></a><strong>5. æ³¨æ„äº‹é¡¹</strong></h2><ol>
<li><strong>åŒºåˆ†Â <code>Meta</code>Â å’ŒÂ <code>Specifiers</code></strong><ul>
<li><code>BlueprintReadWrite</code>Â æ˜¯Â <strong>è¯´æ˜ç¬¦ï¼ˆSpecifierï¼‰</strong>ï¼Œç›´æ¥æ§åˆ¶åŸºç¡€è¡Œä¸ºã€‚</li>
<li><code>DisplayName</code>Â æ˜¯Â <strong>å…ƒæ•°æ®ï¼ˆMetaï¼‰</strong>ï¼Œæä¾›é™„åŠ ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li><strong>ç¼–è¾‘å™¨åˆ·æ–°é—®é¢˜</strong><br> ä¿®æ”¹ Meta åå¯èƒ½éœ€è¦é‡å¯ç¼–è¾‘å™¨æˆ–é‡æ–°ç¼–è¯‘æ‰èƒ½ç”Ÿæ•ˆã€‚</li>
<li><strong>C++ ä¸è“å›¾çš„å·®å¼‚</strong><br> éƒ¨åˆ† Meta å‚æ•°ï¼ˆå¦‚Â <code>BlueprintPrivate</code>ï¼‰ä»…å½±å“è“å›¾ï¼Œä¸å½±å“ C++ ä»£ç ã€‚</li>
</ol>
<h1 id="FgameplayTagæ¸¸æˆæ ‡ç­¾"><a href="#FgameplayTagæ¸¸æˆæ ‡ç­¾" class="headerlink" title="FgameplayTagæ¸¸æˆæ ‡ç­¾"></a>FgameplayTagæ¸¸æˆæ ‡ç­¾</h1><p>åœ¨æ¸¸æˆå¼€å‘ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨è™šå¹»å¼•æ“ç­‰å¼•æ“å¼€å‘æ—¶ï¼‰ï¼ŒPlay Tagï¼ˆç©æ³•æ ‡ç­¾ï¼‰æ˜¯ä¸€ç§ç”¨äºæ ‡è¯†å’Œåˆ†ç±»æ¸¸æˆç©æ³•ç›¸å…³å…ƒç´ çš„æœºåˆ¶ã€‚</p>
<ol>
<li>â€‹<strong>â€‹åŠŸèƒ½ç‰¹æ€§â€‹</strong>â€‹<ul>
<li>â€‹<strong>â€‹åˆ†ç±»ä¸ç»„ç»‡â€‹</strong>â€‹<ul>
<li>FGamePlayTagå¯ä»¥ç”¨æ¥å¯¹æ¸¸æˆä¸­çš„å„ç§ç©æ³•ç›¸å…³çš„å†…å®¹è¿›è¡Œåˆ†ç±»ï¼Œæ¯”å¦‚ä¸åŒçš„è§’è‰²èƒ½åŠ›ç±»å‹ï¼ˆè¿‘æˆ˜å‹ã€è¿œç¨‹å‹ç­‰ï¼‰ã€ä»»åŠ¡ç±»å‹ï¼ˆä¸»çº¿ä»»åŠ¡ã€æ”¯çº¿ä»»åŠ¡ã€æ—¥å¸¸ä»»åŠ¡ç­‰ï¼‰ã€æ¸¸æˆæ¨¡å¼ï¼ˆå•äººæ¨¡å¼ã€å¤šäººåˆä½œæ¨¡å¼ã€å¤šäººå¯¹æˆ˜æ¨¡å¼ç­‰ï¼‰ã€‚é€šè¿‡è¿™ç§åˆ†ç±»æ–¹å¼ï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œç»„ç»‡æ¸¸æˆå†…å®¹ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹ç­›é€‰ä¸æŸ¥è¯¢â€‹</strong>â€‹<ul>
<li>åœ¨æ¸¸æˆçš„å¼€å‘å·¥å…·æˆ–ç¼–è¾‘å™¨ä¸­ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨è¿™äº›æ ‡ç­¾æ¥ç­›é€‰ç‰¹å®šçš„æ¸¸æˆå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå½“æƒ³è¦æŸ¥æ‰¾æ‰€æœ‰ä¸å¤šäººå¯¹æˆ˜æ¨¡å¼ç›¸å…³çš„æ¸¸æˆé€»è¾‘ã€èµ„äº§ï¼ˆå¦‚åœ°å›¾ã€è§’è‰²ç­‰ï¼‰æ—¶ï¼Œå¯ä»¥é€šè¿‡â€œå¤šäººå¯¹æˆ˜æ¨¡å¼â€è¿™ä¸ªFGamePlayTagè¿›è¡Œå¿«é€Ÿç­›é€‰ã€‚</li>
</ul>
</li>
<li>â€‹<strong>â€‹æ¸¸æˆé€»è¾‘å…³è”â€‹</strong>â€‹<ul>
<li>åœ¨æ¸¸æˆçš„è¿è¡Œæ—¶é€»è¾‘ä¸­ï¼ŒFGamePlayTagä¹Ÿèµ·åˆ°é‡è¦ä½œç”¨ã€‚æ¯”å¦‚ï¼Œæ ¹æ®ç©å®¶å½“å‰çš„ä»»åŠ¡ç±»å‹æ ‡ç­¾ï¼ˆå¦‚æ”¯çº¿ä»»åŠ¡æ ‡ç­¾ï¼‰ï¼Œæ¸¸æˆå¯ä»¥åŠ¨æ€è°ƒæ•´ç•Œé¢æ˜¾ç¤ºã€NPCäº¤äº’è¡Œä¸ºæˆ–è€…ä»»åŠ¡æç¤ºç­‰ç›¸å…³é€»è¾‘ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>â€‹<strong>â€‹å®ç°æ–¹å¼ï¼ˆä»¥è™šå¹»å¼•æ“ä¸ºä¾‹ï¼‰â€‹</strong>â€‹<ul>
<li>åœ¨è™šå¹»å¼•æ“ä¸­ï¼ŒFGamePlayTagæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®ç»“æ„ã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨é¡¹ç›®çš„ä»£ç å’Œè“å›¾ä¸­å®šä¹‰å’Œä½¿ç”¨è¿™äº›æ ‡ç­¾ã€‚</li>
<li>å¯ä»¥é€šè¿‡C++ä»£ç åˆ›å»ºè‡ªå®šä¹‰çš„FGamePlayTagï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°ç›¸åº”çš„æ¸¸æˆå¯¹è±¡ã€ç»„ä»¶æˆ–è€…å‡½æ•°ä¸­ã€‚åœ¨è“å›¾ä¸­ï¼Œä¹Ÿæœ‰ç›´è§‚çš„èŠ‚ç‚¹æ¥å¤„ç†FGamePlayTagï¼Œä¾‹å¦‚æ£€æŸ¥æŸä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰ç‰¹å®šçš„FGamePlayTagï¼Œæˆ–è€…æ ¹æ®FGamePlayTagæ‰§è¡Œä¸åŒçš„åˆ†æ”¯é€»è¾‘ç­‰ã€‚![[Pasted image 20250413161403.png]]</li>
<li><code>FGameplayTag</code>Â æ˜¯ä¸€ç§ç”¨äºæ ‡è¯†å’Œåˆ†ç±»æ¸¸æˆå†…å®¹çš„å¼ºå¤§å·¥å…·ã€‚å…·ä½“åˆ°ä½ æä¾›çš„ä»£ç ç‰‡æ®µä¸­çš„Â <code>FindNativeInputActionByTag</code>Â å‡½æ•°ï¼Œ<code>FGameplayTag</code>Â çš„ä½œç”¨ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</li>
</ul>
</li>
</ol>
<h3 id="1-â€‹â€‹è¾“å…¥åŠ¨ä½œçš„åˆ†ç±»ä¸æ ‡è¯†â€‹â€‹"><a href="#1-â€‹â€‹è¾“å…¥åŠ¨ä½œçš„åˆ†ç±»ä¸æ ‡è¯†â€‹â€‹" class="headerlink" title="1. â€‹â€‹è¾“å…¥åŠ¨ä½œçš„åˆ†ç±»ä¸æ ‡è¯†â€‹â€‹"></a>1. â€‹<strong>â€‹è¾“å…¥åŠ¨ä½œçš„åˆ†ç±»ä¸æ ‡è¯†â€‹</strong>â€‹</h3><p><code>FGameplayTag</code>Â åœ¨è¿™é‡Œç”¨äºå¯¹ä¸åŒçš„è¾“å…¥åŠ¨ä½œè¿›è¡Œåˆ†ç±»å’Œæ ‡è¯†ã€‚é€šè¿‡ä¸ºæ¯ä¸ªè¾“å…¥åŠ¨ä½œåˆ†é…ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å’Œå¼•ç”¨è¿™äº›åŠ¨ä½œã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>â€‹<strong>â€‹åŠ¨ä½œç±»å‹â€‹</strong>â€‹ï¼šå¦‚â€œæ”»å‡»â€ã€â€œé˜²å¾¡â€ã€â€œè·³è·ƒâ€ã€â€œç§»åŠ¨â€ç­‰ã€‚</li>
<li>â€‹<strong>â€‹ä¸Šä¸‹æ–‡â€‹</strong>â€‹ï¼šå¦‚â€œè¿‘æˆ˜â€ã€â€œè¿œç¨‹â€ã€â€œç‰¹æ®Šâ€ç­‰ã€‚</li>
<li>â€‹<strong>â€‹çŠ¶æ€â€‹</strong>â€‹ï¼šå¦‚â€œæŒ‰ä¸‹â€ã€â€œé‡Šæ”¾â€ã€â€œé•¿æŒ‰â€ç­‰ã€‚</li>
</ul>
<h3 id="2-â€‹â€‹ç®€åŒ–è¾“å…¥ç³»ç»Ÿçš„ç®¡ç†â€‹â€‹"><a href="#2-â€‹â€‹ç®€åŒ–è¾“å…¥ç³»ç»Ÿçš„ç®¡ç†â€‹â€‹" class="headerlink" title="2. â€‹â€‹ç®€åŒ–è¾“å…¥ç³»ç»Ÿçš„ç®¡ç†â€‹â€‹"></a>2. â€‹<strong>â€‹ç®€åŒ–è¾“å…¥ç³»ç»Ÿçš„ç®¡ç†â€‹</strong>â€‹</h3><p>ä½¿ç”¨Â <code>FGameplayTag</code>Â å¯ä»¥ç®€åŒ–è¾“å…¥ç³»ç»Ÿçš„ç®¡ç†ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚çš„è¾“å…¥é€»è¾‘æ—¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡æ ‡ç­¾æ¥åŠ¨æ€ç»‘å®šå’Œè§£ç»‘è¾“å…¥åŠ¨ä½œï¼Œè€Œæ— éœ€ç¡¬ç¼–ç æ¯ä¸ªè¾“å…¥çš„å…·ä½“å…³è”ã€‚è¿™åœ¨éœ€è¦é¢‘ç¹æ›´æ”¹æˆ–æ‰©å±•è¾“å…¥ç³»ç»Ÿæ—¶å°¤ä¸ºæœ‰ç”¨ã€‚</p>
<h3 id="3-â€‹â€‹æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§â€‹â€‹"><a href="#3-â€‹â€‹æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§â€‹â€‹" class="headerlink" title="3. â€‹â€‹æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§â€‹â€‹"></a>3. â€‹<strong>â€‹æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§â€‹</strong>â€‹</h3><p>é€šè¿‡ä½¿ç”¨æ ‡ç­¾è€Œä¸æ˜¯ç›´æ¥å¼•ç”¨å…·ä½“çš„è¾“å…¥åŠ¨ä½œï¼Œä»£ç å˜å¾—æ›´åŠ æŠ½è±¡å’Œé€šç”¨ã€‚è¿™ä¸ä»…æé«˜äº†ä»£ç æ€§ï¼Œè¿˜ä½¿å¾—åœ¨ä¿®æ”¹æˆ–æ‰©å±•è¾“å…¥åŠ¨ä½œæ—¶æ›´åŠ æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„è¾“å…¥åŠ¨ä½œåªéœ€è¦ä¸ºå…¶åˆ†é…ä¸€ä¸ªåˆé€‚çš„æ ‡ç­¾ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å¤§é‡çš„æŸ¥æ‰¾é€»è¾‘ã€‚</p>
<h3 id="4-â€‹â€‹æ”¯æŒè¿è¡Œæ—¶çš„åŠ¨æ€é…ç½®â€‹â€‹"><a href="#4-â€‹â€‹æ”¯æŒè¿è¡Œæ—¶çš„åŠ¨æ€é…ç½®â€‹â€‹" class="headerlink" title="4. â€‹â€‹æ”¯æŒè¿è¡Œæ—¶çš„åŠ¨æ€é…ç½®â€‹â€‹"></a>4. â€‹<strong>â€‹æ”¯æŒè¿è¡Œæ—¶çš„åŠ¨æ€é…ç½®â€‹</strong>â€‹</h3><p><code>FGameplayTag</code>Â å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æŸ¥è¯¢å’Œç®¡ç†è¾“å…¥åŠ¨ä½œã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æ ¹æ®æ¸¸æˆçš„çŠ¶æ€æˆ–ç©å®¶çš„è®¾ç½®ï¼ŒåŠ¨æ€åœ°å†³å®šå“ªäº›è¾“å…¥åŠ¨ä½œæ˜¯å¯ç”¨çš„ã€‚ä¾‹å¦‚ï¼ŒæŸäº›æŠ€èƒ½å¯èƒ½åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹å¯ç”¨ï¼Œé€šè¿‡æ ‡ç­¾å¯ä»¥è½»æ¾å®ç°è¿™ç§æ¡ä»¶åˆ¤æ–­ã€‚</p>
<h3 id="5-â€‹â€‹ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆâ€‹â€‹"><a href="#5-â€‹â€‹ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆâ€‹â€‹" class="headerlink" title="5. â€‹â€‹ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆâ€‹â€‹"></a>5. â€‹<strong>â€‹ä¸å…¶ä»–ç³»ç»Ÿçš„é›†æˆâ€‹</strong>â€‹</h3><p><code>FGameplayTag</code>Â ä¸ä»…é™äºè¾“å…¥ç³»ç»Ÿï¼Œå®ƒè¿˜å¯ä»¥ä¸å…¶ä»–è™šå¹»å¼•æ“çš„ç³»ç»Ÿï¼ˆå¦‚ Gameplay Ability System, GASï¼‰æ— ç¼é›†æˆã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾æ¥æ§åˆ¶è§’è‰²çš„èƒ½åŠ›æ¿€æ´»ã€åŠ¨ç”»æ’­æ”¾ç­‰ï¼Œä»è€Œå®ç°è·¨ç³»ç»Ÿçš„ä¸€è‡´æ€§å’ŒååŒå·¥ä½œã€‚</p>
<h3 id="å…·ä½“åˆ°ä½ çš„ä»£ç "><a href="#å…·ä½“åˆ°ä½ çš„ä»£ç " class="headerlink" title="å…·ä½“åˆ°ä½ çš„ä»£ç "></a>å…·ä½“åˆ°ä½ çš„ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">UInputAction* <span class="title">UDataAsset_input::FindNativeInputActionByTag</span><span class="params">(<span class="type">const</span> FGameplayTag&amp; inTags)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// éå†è¿™ä¸ªæ•°ç»„ï¼Œå¦‚æœæ ‡ç­¾ç­‰äºåŠ¨ä½œ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> FWarriorInput&amp; InputActionConfig : NativeInput) &#123;</span><br><span class="line">        <span class="keyword">if</span> (InputActionConfig.Tags == inTags &amp;&amp; InputActionConfig.Input_Action)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> InputActionConfig.Input_Action;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>â€‹<strong>â€‹åŠŸèƒ½â€‹</strong>â€‹ï¼šè¯¥å‡½æ•°é€šè¿‡ä¼ å…¥çš„Â <code>FGameplayTag</code>Â (<code>inTags</code>) æ¥æŸ¥æ‰¾å¯¹åº”çš„Â <code>UInputAction</code>Â å¯¹è±¡ã€‚</li>
<li>â€‹<strong>â€‹ç”¨é€”â€‹</strong>â€‹ï¼š<br>  æŸ¥æ‰¾ç‰¹å®šåŠ¨ä½œâ€‹**â€‹ï¼šæ ¹æ®æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„è¾“å…¥åŠ¨ä½œï¼Œä¾‹å¦‚â€œè·³è·ƒâ€æˆ–â€œæ”»å‡»â€ã€‚</li>
<li>â€‹<strong>â€‹åŠ¨æ€ç»‘å®šâ€‹</strong>â€‹ï¼šåœ¨è¿è¡Œæ—¶æ ¹æ®ä¸åŒçš„æ ‡ç­¾åŠ¨æ€ç»‘å®šè¾“å…¥åŠ¨ä½œï¼Œå¢å¼ºæ¸¸æˆçš„çµæ´»æ€§ã€‚</li>
<li>â€‹<strong>â€‹æ¡ä»¶æ§åˆ¶â€‹</strong>â€‹ï¼šç»“åˆæ¸¸æˆçŠ¶æ€ï¼Œé€šè¿‡æ ‡ç­¾æ§åˆ¶å“ªäº›è¾“å…¥åŠ¨ä½œå¯ç”¨ã€‚</li>
</ul>
<h2 id="è¾“å…¥é…ç½®æ˜ å°„é›†åˆ-DataAsset"><a href="#è¾“å…¥é…ç½®æ˜ å°„é›†åˆ-DataAsset" class="headerlink" title="è¾“å…¥é…ç½®æ˜ å°„é›†åˆ-DataAsset"></a>è¾“å…¥é…ç½®æ˜ å°„é›†åˆ-DataAsset</h2><p>ç”¨ä¸å°†è¾“å…¥æ ‡ç­¾æ˜ å°„åˆ°å”¯ä¸€çš„è¾“å…¥æ“ä½œ</p>
<h1 id="GENERATED-BODY-å®"><a href="#GENERATED-BODY-å®" class="headerlink" title="GENERATED_BODY()å®"></a>GENERATED_BODY()å®</h1><p><code>GENERATED_BODY()</code>Â å®æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒé€šå¸¸å‡ºç°åœ¨ç”± Unreal Engine çš„ Unreal Header Tool (UHT) è‡ªåŠ¨ç”Ÿæˆä»£ç çš„ç±»ä¸­ã€‚è¿™ä¸ªå®ç”¨äºå¤„ç† Unreal Engine çš„åå°„ç³»ç»Ÿï¼Œå®ƒä½¿å¾—ç±»èƒ½å¤Ÿåœ¨ç¼–è¾‘å™¨ä¸­è¢«è¯†åˆ«å’Œä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒåºåˆ—åŒ–ã€ç½‘ç»œå¤åˆ¶ç­‰åŠŸèƒ½ã€‚<br>&#x3D;&#x3D;tips:çœ‹è§ç±»ä¸ç»“æ„ä½“å°±æ”¾åœ¨é‡Œé¢ï¼&#x3D;&#x3D;</p>
<h2 id="USTRUCT"><a href="#USTRUCT" class="headerlink" title="USTRUCT"></a>USTRUCT</h2><p><code>USTRUCT(BlueprintType)</code>Â æ˜¯ä¸€ä¸ªç”¨äºå£°æ˜ç»“æ„çš„å®ï¼Œå®ƒå‘Šè¯‰ Unreal Engine è¿™ä¸ªç»“æ„å¯ä»¥åœ¨è“å›¾ä¸­è¢«ä½¿ç”¨</p>
<h1 id="TArray"><a href="#TArray" class="headerlink" title="TArray"></a>TArray</h1><p><code>TArray</code>Â æ˜¯ Unreal Engine 4 å’Œ Unreal Engine 5 ä¸­ç”¨äºå­˜å‚¨åŠ¨æ€æ•°ç»„çš„ç±»æ¨¡æ¿ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§æ¥ç®¡ç†æ•°ç»„ä¸­çš„å…ƒç´ ï¼ŒåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤ã€æ’å…¥ã€æŸ¥æ‰¾ç­‰æ“ä½œã€‚<code>TArray</code>Â å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ã€ç»“æ„ä½“ã€ç±»å®ä¾‹ç­‰ã€‚</p>
<h1 id="æ•°æ®èµ„äº§"><a href="#æ•°æ®èµ„äº§" class="headerlink" title="æ•°æ®èµ„äº§"></a>æ•°æ®èµ„äº§</h1><p>-ç”¨äºå­˜å‚¨å’Œç®¡ç†æ¸¸æˆä¸­çš„é…ç½®æ•°æ®ï¼Œå¦‚è¾“å…¥åŠ¨ä½œã€è§’è‰²å±æ€§ç­‰ã€‚é€šè¿‡æ•°æ®èµ„äº§ï¼Œå¯ä»¥å°†é…ç½®ä¸ä»£ç åˆ†ç¦»ï¼Œä¾¿äºéç¨‹åºå‘˜è¿›è¡Œç¼–è¾‘å’Œç®¡ç†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  
  


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zoomi"
      src="/images/avatar.jpg" style="border-radius:0;width:120px;height:160px;object-fit:cover;">
  <p class="site-author-name" itemprop="name">Zoomi</p>
  <div class="site-description" itemprop="description">æ¬¢è¿æ¥åˆ°æˆ‘çš„è™šå¹»ä¸ªäººåšå®¢ï¼Œä¸å®šæœŸæ›´æ–°</div>

  <!-- åœ¨çº¿éŸ³ä¹æ’­æ”¾å™¨ï¼ˆQQéŸ³ä¹ç¤ºä¾‹æ­Œå•ï¼‰ -->
  <meting-js
    server="tencent"
    type="playlist"
    id="1948308000"
    fixed="true"
    mini="true"
    autoplay="false"
    order="random"
    loop="all"
    theme="#409EFF">
  </meting-js>

  <!-- æ–‡å¿ƒä¸€è¨€ AI åŠ©æ‰‹ï¼ˆç½‘é¡µç‰ˆåµŒå…¥ï¼‰ -->
  <div style="width:100%;min-width:220px;max-width:320px;margin:0 auto;margin-top:12px;">
    <iframe 
      src="https://yiyan.baidu.com/welcome"
      style="width:100%;height:320px;border:none;border-radius:8px;box-shadow:0 2px 8px #0001;"
      title="æ–‡å¿ƒä¸€è¨€AIåŠ©æ‰‹"
      loading="lazy"
      referrerpolicy="no-referrer">
    </iframe>
    <div style="text-align:center;font-size:13px;color:#888;margin-top:2px;">AIåŠ©æ‰‹ Â· æ–‡å¿ƒä¸€è¨€</div>
  </div>

  <!-- UE5 API è®°å¿†æ»šåŠ¨åŒº -->
  <div id="ue5-api-scroller" style="max-height:180px;overflow:hidden;border-radius:8px;background:rgba(64,158,255,0.07);margin:12px 0;padding:8px 4px 8px 8px;box-shadow:0 1px 4px #0001;font-size:13px;"></div>
  <link rel="stylesheet" href="/css/ue5-api-scroll.css">
  <script src="/js/ue5-api-scroll.js"></script>

  <!-- å½“å‰æ—¶é—´æ˜¾ç¤º -->
  <div style="text-align:center;font-size:15px;color:#409EFF;margin-top:12px;">
    <span id="hexo-current-time"></span>
  </div>
  <script>
    function updateHexoTime() {
      var now = new Date();
      var y = now.getFullYear();
      var m = (now.getMonth()+1).toString().padStart(2,'0');
      var d = now.getDate().toString().padStart(2,'0');
      var h = now.getHours().toString().padStart(2,'0');
      var min = now.getMinutes().toString().padStart(2,'0');
      var s = now.getSeconds().toString().padStart(2,'0');
      document.getElementById('hexo-current-time').innerText = `${y}-${m}-${d} ${h}:${min}:${s}`;
    }
    setInterval(updateHexoTime, 1000);
    updateHexoTime();
  </script>

  <!-- å¤©æ°”é¢„æŠ¥ï¼ˆå’Œé£å¤©æ°”ï¼‰ -->
  <div style="margin:10px 0;text-align:center;">
    <iframe src="https://widget.qweather.net/simple/static/index.html?location=101010100&lang=zh&unit=c&theme=light" width="100%" height="60" frameborder="0" scrolling="no" style="border-radius:8px;"></iframe>
  </div>

  <!-- è®¿å®¢ç»Ÿè®¡ï¼ˆä¸è’œå­ï¼‰ -->
  <div style="font-size:13px;color:#888;text-align:center;margin-bottom:4px;">
    <span id="busuanzi_container_site_pv" style="display:inline;">æœ¬ç«™è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span></span>
    <span id="busuanzi_container_site_uv" style="display:inline;margin-left:8px;">è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv"></span></span>
  </div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <!-- ç•™è¨€æ¿å…¥å£æŒ‰é’® -->
  <div style="text-align:center;margin:8px 0 0 0;">
    <a href="/message" style="display:inline-block;padding:6px 18px;background:#409EFF;color:#fff;border-radius:16px;font-size:15px;text-decoration:none;box-shadow:0 2px 8px #0001;">ğŸ’¬ ç•™è¨€æ¿</a>
  </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">ç›®å½•</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æˆ‘çš„é‚®ç®±:LFF3216689784@outlook.com</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script color='255,255,255' opacity='0.7' zIndex='-1' count='88' src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


  <!-- ç•™è¨€å¼¹å¹•åŠŸèƒ½è„šæœ¬ -->
  <script src="/js/ue5-api-scroll.js"></script>


<script type="text/javascript" color="80,80,80" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>
</body>
</html>
